function fCheckLoginNow(){if(fGetCookie("S_INFO")){document.documentElement.style.display="none";if(!$id("loginjustnowiframe")){var a=document.createElement("iframe");
a.id="loginjustnowiframe";a.style.display="none";a.src=gOption.url+fUrlP("df","loginjustnow"+gOption.product,true)+fUrlP("funcid","loginjustnow")+fUrlP("iframe","1");
try{document.body.appendChild(a);setTimeout(function(){document.documentElement.style.display="block";},500);}catch(b){setTimeout(function(){fCheckLoginNow();
},80);}}}else{document.documentElement.style.display="block";return;}}function fCheckAutoLogin(){try{if(window.location.href.indexOf("#return")!=-1){if(gOption.sDomain=="163.com"){fSetCookie("P_INFO","",false,gOption.sDomain);
}else{fSetCookie("P_INFO","");}}}catch(a){}return;}function fAutoLogin(){try{var d=fGetCookie("S_INFO");var g=fGetCookie("P_INFO");var e="",b="",h="",a=0;
if(g){var c=g.split("|");e=c[0];b=c[1];h=c[2];a=(new Date()).getTime()-(b+"000");}if(!location.hash&&e.indexOf("@"+gOption.sDomain)>-1&&h=="1"&&a<10*24*60*60*1000){if(gUserInfo&&gUserInfo.style){window.location.href=gOption.sAutoLoginUrl+"&style="+gUserInfo.style;
}else{window.location.href=gOption.sAutoLoginUrl;}}}catch(f){}if(gOption.sDomain=="yeah.net"||gOption.sDomain=="126.com"||gOption.sDomain=="163.com"){fCheckLoginNow();
}}var gbForcepc;var oAndroidRedirect={sPhoneUrl:"",sPadUrl:""};function fCheckBrowser(){gbForcepc=fGetQuery("dv")=="pc";if(!gbForcepc){var b=navigator.userAgent.toLowerCase();
var d;var a={ipad:"http://ipad.mail."+gOption.sDomain+"/?dv=ipad",pad:"http://pad.mail."+gOption.sDomain+"/",smart:"http://smart.mail."+gOption.sDomain+"/?dv=smart",m:"http://m.mail."+gOption.sDomain+"/"};
var e=["ipad","iphone os","android","ucweb","rv:1.2.3.4","windows ce","windows mobile","midp"];for(var c=0;c<e.length;c++){if(b.indexOf(e[c])!=-1){switch(e[c]){case"ipad":d=a.ipad;
break;case"iphone os":d=a.smart;break;case"pad":d=a.pad;break;case"android":if(!a.smart){a.smart="http://email.163.com/?dv=pc";}if(!a.pad){a.pad="http://email.163.com/?dv=pc";
}oAndroidRedirect={sPhoneUrl:a.smart,sPadUrl:a.pad};top.location.href="http://mail.163.com/html/android_device/v1.htm?smart="+encodeURIComponent(oAndroidRedirect.sPhoneUrl)+"&pad="+encodeURIComponent(oAndroidRedirect.sPadUrl);
return false;break;default:d=a.m;}window.location.href=d;}}}}function fHtml5Tag(){var a=["aside","figcaption","figure","footer","header","hgroup","nav","section"],b=0;
for(b in a){document.createElement(a[b]);}}function fCheckCookie(){if(!navigator.cookieEnabled){alert("您好，您的浏览器设置禁止使用cookie\n请设置您的浏览器，启用cookie功能，再重新登录。");
}}function fGetQuery(a,d){var c=window.location.search.substr(1);var b=c.match(new RegExp("(^|&)"+a+"=([^&]*)(&|$)"));if(d){return(b==null?null:b[2]);}else{return(b==null?null:unescape(b[2]));
}}function fGetQueryHash(a){var c=window.location.hash.substr(1);var b=c.match(new RegExp("(^|&)"+a+"=([^&]*)(&|$)"));return(b==null?null:unescape(b[2]));
}function $id(a){return document.getElementById(a);}function fTrim(a){return a.replace(/(^\s*)|(\s*$)/g,"").replace(/(^　*)|(　*$)/g,"");}function fParseMNum(a){var b=fTrim(a);
return/^0?(13|14|15|18)\d{9}$/.test(b);}function fCheckAccount(c){var a=c;var d;var b;d=a.toLowerCase();b=d.indexOf("@"+gOption.sDomain)==-1;if(!b){var e;
e=c.split("@");c=e[0];}return c;}function fGetScript(a,d){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);
try{b.setAttribute("defer","defer");}catch(c){}window.document.body.appendChild(b);b.onload=b.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){d&&d();
}};}function fGetCookie(b){var a=b+"=";if(document.cookie.length>0){offset=document.cookie.indexOf(a);if(offset!=-1){offset+=a.length;end=document.cookie.indexOf(";",offset);
if(end==-1){end=document.cookie.length;}return unescape(document.cookie.substring(offset,end));}else{return"";}}}function fSetCookie(c,e,b,d){var a=";domain="+(d||gOption.sCookieDomain);
document.cookie=c+"="+escape(e)+a+(b?";expires="+(new Date(2099,12,31)).toGMTString():"");}function fEventListen(b,c,d,a){a=!!a;if(b.addEventListener){b.addEventListener(c,d,a);
}else{if(b.attachEvent){b.attachEvent("on"+c,d);}}}function fEventUnlisten(b,c,d,a){a=!!a;if(b.removeEventListener){b.removeEventListener(c,d,a);}else{if(b.detachEvent){b.detachEvent("on"+c,d);
}}}function fRandom(a){return Math.floor(a*Math.random());}function fUrlP(b,c,a){if(!arguments[2]){a=false;}if(a){return b+"="+c;}else{return"&"+b+"="+c;
}}function fResize(){var c=document.body.offsetHeight,b=document.documentElement.clientHeight,a;if(c>b){a=c;}else{a=b;}$id("mask").style.height=a+"px";
}function fJSONP(f,c){if(!f){return;}var d=f;var e="&";for(var b in c){e+=b+"="+c[b]+"&";}var a=e.split("&");a.pop();a.shift();e=a.join("&");fGetScript(f+"?"+e+"&rnd="+Math.random());
}Object.extend=function(e,a,b){e=e||{};a=a||{};for(var c in a){if(c==="prototype"){continue;}try{if(!b||(this.has&&!this.has(e,c))){e[c]=a[c];}}catch(d){}}try{if(!b&&a.toString!==a.constructor.prototype.toString){e.toString=a.toString;
}}catch(d){}return e;};(function(a){a.CapsLock=function(e){var g={preStatus:undefined,status:undefined,initialize:c,isOn:i,trigger:d,_keyDown:b,_keyPress:f,_blur:h};
Object.extend(CapsLock.prototype,g);Object.extend(CapsLock.prototype,e);this.initialize(e);function c(m){var l=this;var j=l.el=m.el;var k={keypress:function(n){l._keyPress(n);
},keydown:function(n){l._keyDown(n);},blur:function(n){l._blur(n);}};l.capsLockInfo=k;l.change=m.change;fEventListen(j,"keypress",k.keypress);fEventListen(j,"keydown",k.keydown);
fEventListen(j,"blur",k.blur);}function i(){var j=this;return j.status;}function d(){var j=this;if(j.change){j.change(j.status);}}function b(j){var k=this;
var l=j.which||j.keyCode;if(l===20&&k.status!==undefined){k.preStatus=k.status=!k.status;k.trigger(k.status);}}function f(j){var m=this;var n=j.which||j.keyCode;
var k=false;if(j.shiftKey){k=true;}else{if(j.modifiers){k=!!(j.modifiers&4);}}var l=m.preStatus;m.preStatus=m.status;if(n>=65&&n<=90&&!k||n>=97&&n<122&&k){m.status=true;
}else{if(n>=65&&n<=90&&k||n>=97&&n<122&&!k){m.status=false;}else{m.status=l;}}if(m.status!==m.preStatus){m.trigger(m.status);}}function h(){var j=this;
j.preStatus=j.status=undefined;j.trigger(j.status);}};})(window);function fFQ(){var b=fGetQuery("fq");var g=(/^[0-9]/).test(b);var d=fGetQuery("uid");var a=(new RegExp("(@"+gOption.sDomain+")$")).test(d);
if(g&&a){var c=(new Date()).getTime();fSetCookie("fq",b+"_"+c,false);var f=document.createElement("img");var e="http://count.mail.163.com/beacon/login.gif?uid="+d+"&fq="+c+"&lf="+fGetQuery("fq");
f.setAttribute("src",e);f.setAttribute("alt","");f.style.display="none";document.body.appendChild(f);}}function fStartTime(){var a=fGetCookie("starttime");
if(a==""){a=(new Date()).getTime();fSetCookie("starttime",a,false);}}var gUserInfo={username:null,style:null,safe:null};var gVisitorCookie=(function(){var c=function(){var d=fGetCookie("nts_mail_user");
if(d!=undefined){var e=d.split(":");if(e.length==3){gUserInfo.username=e[0];gUserInfo.style=e[1];gUserInfo.safe=e[2];}}return;},b=function(){var d=gUserInfo.username+":"+gUserInfo.style+":"+gUserInfo.safe;
a("nts_mail_user",d,true);return;},a=function(f,h,e,g){var d=";domain="+(g||gOption.sCookieDomain);document.cookie=f+"="+h+d+(e?";expires="+(new Date(2099,12,31)).toGMTString():"");
};return{init:function(){c();return this;},saveInfo:function(){b();},loadInfo:function(){c();}};})().init();var gMobileNumMailIsForbidden,gMobileNumMailResult,gMobileNumMail=(function(){var k="http://mbind.mail.126.com/mbind/qn.do?uid=",m="http://mbind.mail.126.com/mbind/qu.do?pn=",g,q,h={},o,n,b,d=["xxxxx","xxx"],p=Math.round((new Date()).getTime()/86400000)+"",a=function(){var s=fGetCookie("MTip");
if(s==1){return true;}else{return false;}},c=function(){fSetCookie("MTip","1",true);$id("mobtips").style.display="none";},j=function(t){var s,u;s=t+"@"+gOption.sDomain;
u=r(t,s);if(u===-1){MobCallback({nCode:"private",sNum:"invalidMail"});return;}if(u===0){if(n===undefined){MobCallback({nCode:"404"});}else{MobCallback({nCode:"200",sNum:n});
}return;}g=s;h.all=fGetCookie("P_INFO");if(h.all&&h.all.length>0){h.uid=h.all.split("|")[0];h.num=h.all.split("|")[6];}if(h.uid&&h.uid!==s){l(s);return;
}if(h.num&&h.num.indexOf("&")>-1){o=h.num.split("&")[0];if(o==""){MobCallback({nCode:"404"});}else{MobCallback({nCode:"200",sNum:o});}return;}l(s);return;
},e=function(u){var s="",t=u;if(t.length===6){s=t.substr(0,3)+d[0]+t.substr(3,3);}if(t.length===8){s=t.substr(0,4)+d[1]+t.substr(4,4);}return s;},i=function(t){var s=fTrim(t);
if(s==q){if(b==undefined){MobCallback({nCode:"404"});}else{MobCallback({nCode:"200",sNum:b});}return;}if(fParseMNum(s)){q=s;f(s);return;}else{MobCallback({nCode:"private",sNum:"invalidNum"});
}},l=function(s){fGetScript(k+s+"&t="+p);},f=function(s){fGetScript(m+s+"&t="+p);},r=function(u,s){var t=/^[a-zA-Z0-9_\.-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
if(!t.test(s)||fParseMNum(u)){return -1;}if(typeof g==="string"&&g===s){return 0;}return 1;};window.MobCallback=function(A){var y,x,w=$id("mobtips"),s=$id("mobtips_txt"),t=$id("mobtips_close");
try{var z=A;if(z.nCode=="private"){gMobileNumMailResult=z.sNum;if(gMobileNumMailResult=="invalidMail"||gMobileNumMailResult=="invalidNum"){w.style.display="none";
}}if(z.nCode==200){if(z.sNum&&z.sNum.length>8){b=z.sNum;gMobileNumMailResult=b;x=gMobileNumMailResult.split("@")[1];if(x!=gOption.sDomain){var u=q+"@"+x;
w.style.height="auto";y="此手机号码的邮箱是<br/><em>"+u+'</em>，<a style="text-decoration:none;" href="http://email.163.com/index.htm#uid='+u+'">点此登录</a>';}else{y="此号码已与帐号：<em>"+gMobileNumMailResult+"</em> 绑定";
}}else{n=z.sNum;gMobileNumMailResult=e(n);y="用你的手机号 <em>"+gMobileNumMailResult+"</em> 也可登录";}s.innerHTML=y;w.style.display="block";}if(z.nCode==404){if(ntabOn==1){y='手机号码也可登录，<a href="http://e.mail.163.com/mobilemail/home.do?from=mail163">免费激活</a>';
n=undefined;}else{y="此号码还未手机号登录";b=undefined;}s.innerHTML=y;w.style.display="block";}}catch(v){w.style.display="none";}return;};return{init:function(){return this;
},forbidden:function(){gMobileNumMailIsForbidden=a();if(gMobileNumMailIsForbidden){return false;}else{c();}},getNumFromMail:function(s){gMobileNumMailIsForbidden=a();
if(gMobileNumMailIsForbidden){return false;}else{j(s);}},getMailFromNum:function(s){gMobileNumMailIsForbidden=a();if(gMobileNumMailIsForbidden){return false;
}else{i(s);}}};})().init();window.bGettingAlgorithm=false;function fEnData(g){if(!window.RSAKey){if(!window.bGettingAlgorithm){fGetScript("http://mimg.127.net/index/lib/scripts/algorithm.js");
window.bGettingAlgorithm=true;}setTimeout(function(){fEnData(g);},200);return;}if(g==null||g.length==0){alert("参数非法");return false;}var h=new Array();h=g.split("\n");
var a=h[0];if(a=="401"){alert("参数非法");}else{if(a=="500"){alert("服务端异常");}else{if(a=="200"){var f=h[1];var b=h[2];var c=$id("pwdInput").value;var e=new RSAKey();
e.setPublic(b,f);var d=e.encrypt(MD5(c));window.location.href="http://reg.163.com/httpLoginVerifyNew.jsp?"+fUrlP("product",gOption.product,true)+fUrlP("rcode",d)+fUrlP("savelogin",$id("savelogin").value)+fUrlP("url",encodeURIComponent(window.sHttpAction))+fUrlP("url2",encodeURIComponent(gOption.url2))+fUrlP("username",$id("idInput").value+"@"+gOption.sDomain);
}}}}function loginRequest(b){var a=getRnd($id("idInput").value+"@"+gOption.sDomain);c_url="http://reg.163.com/services/httpLoginExchgKeyNew?rnd="+a;c_url+="&jsonp="+b;
fGetScript(c_url);}function getRnd(b){var a=base64encode(utf16to8(b));return a;}var DOMContentLoaded;var DOMREADY=function(c){var b={isReady:false,ready:c,bindReady:function(){try{if(document.readyState==="complete"){b.isReady=true;
return setTimeout(b.ready,1);}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);
var d=false;try{d=window.frameElement==null;}catch(f){}if(document.documentElement.doScroll&&d){a();}}}}catch(f){}}};if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);
b.ready();};}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);
if(b.isReady){return;}else{b.isReady=true;b.ready();}}};}}function a(){if(b.isReady){return;}try{document.documentElement.doScroll("left");}catch(d){setTimeout(a,1);
return;}b.isReady=true;b.ready();}b.bindReady();};var base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function base64encode(g){var c,e,a;
var f,d,b;a=g.length;e=0;c="";while(e<a){f=g.charCodeAt(e++)&255;if(e==a){c+=base64EncodeChars.charAt(f>>2);c+=base64EncodeChars.charAt((f&3)<<4);c+="==";
break;}d=g.charCodeAt(e++);if(e==a){c+=base64EncodeChars.charAt(f>>2);c+=base64EncodeChars.charAt(((f&3)<<4)|((d&240)>>4));c+=base64EncodeChars.charAt((d&15)<<2);
c+="=";break;}b=g.charCodeAt(e++);c+=base64EncodeChars.charAt(f>>2);c+=base64EncodeChars.charAt(((f&3)<<4)|((d&240)>>4));c+=base64EncodeChars.charAt(((d&15)<<2)|((b&192)>>6));
c+=base64EncodeChars.charAt(b&63);}return c;}function utf16to8(e){var b,d,a,f;b="";a=e.length;for(d=0;d<a;d++){f=e.charCodeAt(d);if((f>=1)&&(f<=127)){b+=e.charAt(d);
}else{if(f>2047){b+=String.fromCharCode(224|((f>>12)&15));b+=String.fromCharCode(128|((f>>6)&63));b+=String.fromCharCode(128|((f>>0)&63));}else{b+=String.fromCharCode(192|((f>>6)&31));
b+=String.fromCharCode(128|((f>>0)&63));}}}return b;}function fGetLocator(c){try{var h=c.split("&");window.gLocationProvince="common";window.gLocationCity="common";
if(h.length>0){for(var b=0;b<h.length;b++){var a=h[b].split("=");if(a.length==2){var f=a[0];var g=a[1];switch(f){case"province":window.gLocationProvince=g;
break;case"city":window.gLocationCity=g;break;default:}}else{continue;}}}if(window.fSetLocation){fSetLocation(c);}}catch(d){}}(function(c){c.loginExtAD={isOpen:true,init:b,initData:d,initParam:a,initInterface:h,getData:g,callback:i,template:e,outputHtml:f,_data:{},_dftData:{},_curDomain:"",_interface:"",_param:{},_ver:4,_tpl:{"163.com":'<li class="ext-#{index}">#{div}</li>',"126.com":'<li class="ext-#{index}">#{div}</li>',"yeah.net":"#{div}","email.163.com":'<li class="ext-#{index}"><span>·</span>#{div}</li>'},_adNum:{"163.com":2,"126.com":2,"yeah.net":1,"email.163.com":3},_dftAD:[{pid:1,div:'<a href="http://mail.163.com/html/131114_yixin/" target="_blank" style="">用手机号码邮箱可直接登录易信</a>'},{pid:2,div:'<a href="http://duobao.mail.163.com/index.do?from=WebLogin" target="_blank" style="">玩夺宝奇兵，拿丰厚礼品</a>'},{pid:3,div:'<a href="http://mail.163.com/html/ntesmail5/" target="_blank" style="">网易邮箱5.0版介绍</a>'}],_bSuc:false};
function b(){var j=this;j.initData();j.initParam();j.initInterface();j.getData();}function d(){var n=this;var k="";n._curDomain="email.163.com";if(gOption.sCookieDomain!=n._curDomain){n._curDomain=gOption.sDomain;
}if(n._dftAD.length>0){for(var m=0,j=n._dftAD.length;m<j;m++){n._dftAD[m].index=n._dftAD[m].pid;}k=n.outputHtml(n._dftAD);}n._data={domain:{"163.com":true,"126.com":true,"yeah.net":true,"email.163.com":true},html:k};
setTimeout(function(){if(n._bSuc){return;}else{var l=$id("extText");l.innerHTML=n._data.html;}},3000);}function a(){var l=this;var k=l._param;var m="";
if(l._curDomain=="email.163.com"){var j=fGetCookie("alllogindomain");if(j=="163"){m="163.com";}else{if(j=="126"){m="126.com";}else{if(j=="yeah"){m="yeah.net";
}else{m="email.163.com";}}}if(gLoginInfo[j]){k.uid=(gLoginInfo[j].username?gLoginInfo[j].username:"nt")+"@"+m;}else{k.uid="nt@"+l._curDomain;}}else{k.uid=(gUserInfo.username?gUserInfo.username:"nt")+"@"+l._curDomain;
}k.domain=l._curDomain;k.ver=l._ver;k.ph=-1;k.callback="loginExtAD.callback";}function h(){var j=this;var l="http://ir.mail.163.com/get.do";try{if(j._curDomain=="163.com"||j._curDomain=="email.163.com"){l="http://ir.mail.163.com/get.do";
}if(j._curDomain=="126.com"){l="http://ir.mail.126.com/get.do";}if(j._curDomain=="yeah.net"){l="http://ir.mail.yeah.net/get.do";}}catch(k){}j._interface=l;
}function g(){var k=this;if(!k.isOpen){k.callback();return;}var j=k._param;var l=k._interface;if(k._data.domain[k._curDomain]){fJSONP(l,j);}else{k.callback();
}}function i(m){var k=this;var j=k._data;var l=[];if(m.templateUrl==undefined){}else{fGetScript(m.templateUrl,function(){if(m&&m.lt){if(typeof gAdTemplate!=undefined&&gAdTemplate.parse){k._bSuc=true;
l=m.lt;for(var q=l.length-1;q>0;--q){for(var p=0;p<q;++p){if(l[p].pid>l[p+1].pid){var o=l[p];l[p]=l[p+1];l[p+1]=o;}}}m.lt=l;j.html=k.outputHtml(gAdTemplate.parse(m).lt);
}}var n=$id("extText");n.innerHTML=j.html;if(k._curDomain=="yeah.net"){indexLogin.shadowFix();}});}}function f(q){var p=this;var o="";var r=p._adNum[p._curDomain];
if(p._bSuc){for(var n=0,k=q.length;n<k;n++){q[n].index=n+1;}if(q.length<r){for(var m=0;m<r;m++){p._dftAD[m].index=q.length+m+1;}q=q.concat(p._dftAD);}}for(var n=0;
n<r;n++){o+=p.template(p._tpl[p._curDomain],q[n]);}return o;}function e(j,l){var k=/#\{([^\{\}]*?)\}/g;return j.replace(k,function(n,m){return typeof(l[m])==undefined?"":l[m];
});}})(window);