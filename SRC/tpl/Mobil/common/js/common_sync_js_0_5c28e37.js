var require,define;!function(e){function t(e,t,r){function n(t,r){var n=new window.XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){if(200!=n.status)throw new Error("A unkown error occurred.");i=n.responseText;var a=o.getItem(e);a&&o.removeItem(a);try{o.setItem(t,i),o.setItem(e,t)}catch(u){}r(i)}},n.open("get",t),n.send(null)}var i,o=localStorage;if(i=o.getItem(t)){if(!o.getItem(e))try{o.setItem(e,t)}catch(a){}r(i)}else n(t,r)}function r(e,t){if(!(e in s)){s[e]=!0;var r=document.createElement("script");if(t){var n=setTimeout(t,require.timeout);r.onerror=function(){clearTimeout(n),t()},r.onreadystatechange=function(){"complete"==this.readyState&&clearTimeout(n)}}return r.type="text/javascript",r.src=e,i.appendChild(r),r}}function n(e,n,a){var u=o[e]||(o[e]=[]);u.push(n);var p,l=c[e]||{},d=l.pkg;p=d?f[d].url:l.url||e,window.XMLHttpRequest?p in s||(s[p]=!0,t(e,p,function(e){script=document.createElement("script"),script.type="text/javascript",script.innerHTML=e,i.appendChild(script)})):r(p,a&&function(){a(e)})}var i=document.getElementsByTagName("head")[0],o={},a={},u={},s={},c={},f={};define=function(e,t){a[e]=t;var r=o[e];if(r){for(var n=r.length-1;n>=0;--n)r[n]();delete o[e]}},require=function(e){e=require.alias(e);var t=u[e];if(t)return t.exports;var r=a[e];if(!r)throw Error("Cannot find module `"+e+"`");t=u[e]={exports:{}};var n="function"==typeof r?r.apply(t,[require,t.exports,t]):r;return n&&(t.exports=n),t.exports},require.async=function(t,r,i){function o(e){for(var t=e.length-1;t>=0;--t){var r=e[t];if(!(r in a||r in f)){f[r]=!0,p++,n(r,u,i);var s=c[r];s&&"deps"in s&&o(s.deps)}}}function u(){if(0==p--){var n,i,o=[];for(n=0,i=t.length;i>n;++n)o[n]=require(t[n]);r&&r.apply(e,o)}}"string"==typeof t&&(t=[t]);for(var s=t.length-1;s>=0;--s)t[s]=require.alias(t[s]);var f={},p=0;o(t),u()},require.resourceMap=function(e){var t,r;r=e.res;for(t in r)r.hasOwnProperty(t)&&(c[t]=r[t]);r=e.pkg;for(t in r)r.hasOwnProperty(t)&&(f[t]=r[t])},require.loadJs=function(e){r(e)},require.loadCss=function(e){if(e.content){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e.content:t.innerHTML=e.content,i.appendChild(t)}else if(e.url){var r=document.createElement("link");r.href=e.url,r.rel="stylesheet",r.type="text/css",i.appendChild(r)}},require.alias=function(e){return e},require.timeout=5e3,define.amd={jQuery:!0,version:"1.0.0"}}(this);
;!function(t){String.prototype.trim===t&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===t&&(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,o=0;if("function"!=typeof e)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o++];break}if(++o>=r)throw new TypeError}for(;r>o;)o in i&&(n=e.call(t,n,i[o],o,i)),o++;return n})}();var Zepto=function(){function t(t){return null==t?String(t):Y[J.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!n(t)&&t.__proto__==Object.prototype}function a(t){return t instanceof Array}function s(t){return"number"==typeof t.length}function u(t){return O.call(t,function(t){return null!=t})}function c(t){return t.length>0?S.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function f(t){return t in D?D[t]:D[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function h(t,e){return"number"!=typeof e||$[l(t)]?e:e+"px"}function p(t){var e,n;return k[t]||(e=A.createElement(t),A.body.appendChild(e),n=_(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),k[t]=n),k[t]}function d(t){return"children"in t?C.call(t.children):S.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function m(t,e,n){for(T in e)n&&(o(e[T])||a(e[T]))?(o(e[T])&&!o(t[T])&&(t[T]={}),a(e[T])&&!a(t[T])&&(t[T]=[]),m(t[T],e[T],n)):e[T]!==E&&(t[T]=e[T])}function v(t,e){return e===E?S(t):S(t).filter(e)}function g(t,n,i,r){return e(n)?n.call(t,i,r):n}function y(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function b(t,e){var n=t.className,i=n&&n.baseVal!==E;return e===E?i?n.baseVal:n:(i?n.baseVal=e:t.className=e,void 0)}function w(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:isNaN(e=Number(t))?/^[\[\{]/.test(t)?S.parseJSON(t):t:e):t}catch(n){return t}}function x(t,e){e(t);for(var n in t.childNodes)x(t.childNodes[n],e)}var E,T,S,P,j,N,M=[],C=M.slice,O=M.filter,A=window.document,k={},D={},_=A.defaultView.getComputedStyle,$={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,z=/^(?:body|html)$/i,L=["val","css","html","text","data","width","height","offset"],U=["after","prepend","before","append"],q=A.createElement("table"),F=A.createElement("tr"),B={tr:A.createElement("tbody"),tbody:q,thead:q,tfoot:q,td:F,th:F,"*":A.createElement("div")},I=/complete|loaded|interactive/,X=/^\.([\w-]+)$/,H=/^#([\w-]*)$/,V=/^[\w-]+$/,Y={},J=Y.toString,G={},W=A.createElement("div");return G.matches=function(t,e){if(!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=W).appendChild(t),i=~G.qsa(r,e).indexOf(t),o&&W.removeChild(t),i},j=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},N=function(t){return O.call(t,function(e,n){return t.indexOf(e)==n})},G.fragment=function(t,e,n){t.replace&&(t=t.replace(Z,"<$1></$2>")),e===E&&(e=R.test(t)&&RegExp.$1),e in B||(e="*");var i,r,a=B[e];return a.innerHTML=""+t,r=S.each(C.call(a.childNodes),function(){a.removeChild(this)}),o(n)&&(i=S(r),S.each(n,function(t,e){L.indexOf(t)>-1?i[t](e):i.attr(t,e)})),r},G.Z=function(t,e){return t=t||[],t.__proto__=S.fn,t.selector=e||"",t},G.isZ=function(t){return t instanceof G.Z},G.init=function(t,n){if(t){if(e(t))return S(A).ready(t);if(G.isZ(t))return t;var i;if(a(t))i=u(t);else if(r(t))i=[o(t)?S.extend({},t):t],t=null;else if(R.test(t))i=G.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==E)return S(n).find(t);i=G.qsa(A,t)}return G.Z(i,t)}return G.Z()},S=function(t,e){return G.init(t,e)},S.extend=function(t){var e,n=C.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){m(t,n,e)}),t},G.qsa=function(t,e){var n;return i(t)&&H.test(e)?(n=t.getElementById(RegExp.$1))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:C.call(X.test(e)?t.getElementsByClassName(RegExp.$1):V.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))},S.contains=function(t,e){return t!==e&&t.contains(e)},S.type=t,S.isFunction=e,S.isWindow=n,S.isArray=a,S.isPlainObject=o,S.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},S.inArray=function(t,e,n){return M.indexOf.call(e,t,n)},S.camelCase=j,S.trim=function(t){return t.trim()},S.uuid=0,S.support={},S.expr={},S.map=function(t,e){var n,i,r,o=[];if(s(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&o.push(n);else for(r in t)n=e(t[r],r),null!=n&&o.push(n);return c(o)},S.each=function(t,e){var n,i;if(s(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},S.grep=function(t,e){return O.call(t,e)},window.JSON&&(S.parseJSON=JSON.parse),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()}),S.fn={forEach:M.forEach,reduce:M.reduce,push:M.push,sort:M.sort,indexOf:M.indexOf,concat:M.concat,map:function(t){return S(S.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return S(C.apply(this,arguments))},ready:function(t){return I.test(A.readyState)?t(S):A.addEventListener("DOMContentLoaded",function(){t(S)},!1),this},get:function(t){return t===E?C.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return M.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):S(O.call(this,function(e){return G.matches(e,t)}))},add:function(t,e){return S(N(this.concat(S(t,e))))},is:function(t){return this.length>0&&G.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==E)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):s(t)&&e(t.item)?C.call(t):S(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return S(n)},has:function(t){return this.filter(function(){return r(t)?S.contains(this,t):S(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:S(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:S(t)},find:function(t){var e,n=this;return e="object"==typeof t?S(t).filter(function(){var t=this;return M.some.call(n,function(e){return S.contains(e,t)})}):1==this.length?S(G.qsa(this[0],t)):this.map(function(){return G.qsa(this,t)})},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=S(t));n&&!(r?r.indexOf(n)>=0:G.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return S(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=S.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return v(e,t)},parent:function(t){return v(N(this.pluck("parentNode")),t)},children:function(t){return v(this.map(function(){return d(this)}),t)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(t){return v(this.map(function(t,e){return O.call(d(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return S.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==_(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=S(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){S(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){S(this[0]).before(t=S(t));for(var e;(e=t.children()).length;)t=e.first();S(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=S(this),r=i.contents(),o=n?t.call(this,e):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){S(this).replaceWith(S(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=S(this);(t===E?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return S(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return S(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return t===E?this.length>0?this[0].innerHTML:null:this.each(function(e){var n=this.innerHTML;S(this).empty().append(g(this,t,e,n))})},text:function(t){return t===E?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(t,e){var n;return"string"==typeof t&&e===E?0==this.length||1!==this[0].nodeType?E:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:this.each(function(n){if(1===this.nodeType)if(r(t))for(T in t)y(this,T,t[T]);else y(this,t,g(this,e,n,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&y(this,t)})},prop:function(t,e){return e===E?this[0]&&this[0][t]:this.each(function(n){this[t]=g(this,e,n,this[t])})},data:function(t,e){var n=this.attr("data-"+l(t),e);return null!==n?w(n):E},val:function(t){return t===E?this[0]&&(this[0].multiple?S(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=g(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var n=S(this),i=g(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2&&"string"==typeof e)return this[0]&&(this[0].style[j(e)]||_(this[0],"").getPropertyValue(e));var i="";if("string"==t(e))n||0===n?i=l(e)+":"+h(e,n):this.each(function(){this.style.removeProperty(l(e))});else for(T in e)e[T]||0===e[T]?i+=l(T)+":"+h(T,e[T])+";":this.each(function(){this.style.removeProperty(l(T))});return this.each(function(){this.style.cssText+=";"+i})},index:function(t){return t?this.indexOf(S(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return M.some.call(this,function(t){return this.test(b(t))},f(t))},addClass:function(t){return this.each(function(e){P=[];var n=b(this),i=g(this,t,e,n);i.split(/\s+/g).forEach(function(t){S(this).hasClass(t)||P.push(t)},this),P.length&&b(this,n+(n?" ":"")+P.join(" "))})},removeClass:function(t){return this.each(function(e){return t===E?b(this,""):(P=b(this),g(this,t,e,P).split(/\s+/g).forEach(function(t){P=P.replace(f(t)," ")}),b(this,P.trim()),void 0)})},toggleClass:function(t,e){return this.each(function(n){var i=S(this),r=g(this,t,n,b(this));r.split(/\s+/g).forEach(function(t){(e===E?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=z.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(S(t).css("margin-top"))||0,n.left-=parseFloat(S(t).css("margin-left"))||0,i.top+=parseFloat(S(e[0]).css("border-top-width"))||0,i.left+=parseFloat(S(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!z.test(t.nodeName)&&"static"==S(t).css("position");)t=t.offsetParent;return t})}},S.fn.detach=S.fn.remove,["width","height"].forEach(function(t){S.fn[t]=function(e){var r,o=this[0],a=t.replace(/./,function(t){return t[0].toUpperCase()});return e===E?n(o)?o["inner"+a]:i(o)?o.documentElement["offset"+a]:(r=this.offset())&&r[t]:this.each(function(n){o=S(this),o.css(t,g(this,e,n,o[t]()))})}}),U.forEach(function(e,n){var i=n%2;S.fn[e]=function(){var e,r,o=S.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:G.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null,o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return S(t).remove();x(r.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},S.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return S(t)[e](this),this}}),G.Z.prototype=S.fn,G.uniq=N,G.deserializeValue=w,S.zepto=G,S}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(t){function e(t){var e=this.os={},n=this.browser={},i=t.match(/WebKit\/([\d.]+)/),r=t.match(/(Android)\s+([\d.]+)/),o=t.match(/(iPad).*OS\s([\d_]+)/),a=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),s=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=s&&t.match(/TouchPad/),c=t.match(/Kindle\/([\d.]+)/),l=t.match(/Silk\/([\d._]+)/),f=t.match(/(BlackBerry).*Version\/([\d.]+)/),h=t.match(/(BB10).*Version\/([\d.]+)/),p=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),d=t.match(/PlayBook/),m=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),v=t.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(e.android=!0,e.version=r[2]),a&&(e.ios=e.iphone=!0,e.version=a[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),s&&(e.webos=!0,e.version=s[2]),u&&(e.touchpad=!0),f&&(e.blackberry=!0,e.version=f[2]),h&&(e.bb10=!0,e.version=h[2]),p&&(e.rimtabletos=!0,e.version=p[2]),d&&(n.playbook=!0),c&&(e.kindle=!0,e.version=c[1]),l&&(n.silk=!0,n.version=l[1]),!l&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),v&&(n.firefox=!0,n.version=v[1]),e.tablet=!!(o||d||r&&!t.match(/Mobile/)||v&&t.match(/Tablet/)),e.phone=!(e.tablet||!(r||a||s||f||h||m&&t.match(/Android/)||m&&t.match(/CriOS\/([\d.]+)/)||v&&t.match(/Mobile/)))}e.call(t,navigator.userAgent),t.__detect=e}(Zepto),function(t){function e(t){return t._zid||(t._zid=p++)}function n(t,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(h[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||o&&e(t.fn)!==e(o)||a&&t.sel!=a)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(e,n,i){"string"!=t.type(e)?t.each(e,i):e.split(/\s/).forEach(function(t){i(t,n)})}function a(t,e){return t.del&&("focus"==t.e||"blur"==t.e)||!!e}function s(t){return m[t]||t}function u(n,r,u,c,l,f){var p=e(n),d=h[p]||(h[p]=[]);o(r,u,function(e,r){var o=i(e);o.fn=r,o.sel=c,o.e in m&&(r=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=l&&l(r,e);var u=o.del||r;o.proxy=function(t){var e=u.apply(n,[t].concat(t.data));return e===!1&&(t.preventDefault(),t.stopPropagation()),e},o.i=d.length,d.push(o),n.addEventListener(s(o.e),o.proxy,a(o,f))})}function c(t,i,r,u,c){var l=e(t);o(i||"",r,function(e,i){n(t,e,i,u).forEach(function(e){delete h[l][e.i],t.removeEventListener(s(e.e),e.proxy,a(e,c))})})}function l(e){var n,i={originalEvent:e};for(n in e)y.test(n)||void 0===e[n]||(i[n]=e[n]);return t.each(b,function(t,n){i[t]=function(){return this[n]=v,e[t].apply(e,arguments)},i[n]=g}),i}function f(t){if(!("defaultPrevented"in t)){t.defaultPrevented=!1;var e=t.preventDefault;t.preventDefault=function(){this.defaultPrevented=!0,e.call(this)}}}var h=(t.zepto.qsa,{}),p=1,d={},m={mouseenter:"mouseover",mouseleave:"mouseout"};d.click=d.mousedown=d.mouseup=d.mousemove="MouseEvents",t.event={add:u,remove:c},t.proxy=function(n,i){if(t.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=e(n),r}if("string"==typeof i)return t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e){return this.each(function(){u(this,t,e)})},t.fn.unbind=function(t,e){return this.each(function(){c(this,t,e)})},t.fn.one=function(t,e){return this.each(function(n,i){u(this,t,e,null,function(t,e){return function(){var n=t.apply(i,arguments);return c(i,e,t),n}})})};var v=function(){return!0},g=function(){return!1},y=/^([A-Z]|layer[XY]$)/,b={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,n,i){return this.each(function(r,o){u(o,n,i,e,function(n){return function(i){var r,a=t(i.target).closest(e,o).get(0);return a?(r=t.extend(l(i),{currentTarget:a,liveFired:o}),n.apply(a,[r].concat([].slice.call(arguments,1)))):void 0}})})},t.fn.undelegate=function(t,e,n){return this.each(function(){c(this,e,n,t)})},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i){return!n||t.isFunction(n)?this.bind(e,n||i):this.delegate(n,e,i)},t.fn.off=function(e,n,i){return!n||t.isFunction(n)?this.unbind(e,n||i):this.undelegate(n,e,i)},t.fn.trigger=function(e,n){return("string"==typeof e||t.isPlainObject(e))&&(e=t.Event(e)),f(e),e.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(e)})},t.fn.triggerHandler=function(e,i){var r,o;return this.each(function(a,s){r=l("string"==typeof e?t.Event(e):e),r.data=i,r.target=s,t.each(n(s,e.type||e),function(t,e){return o=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){"string"!=typeof t&&(e=t,t=e.type);var n=document.createEvent(d[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.defaultPrevented}function n(t,n,i,r){return t.global?e(n||y,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:(n(e,i,"ajaxSend",[t,e]),void 0)}function a(t,e,i){var r=i.context,o="success";i.success.call(r,t,o,e),n(i,r,"ajaxSuccess",[e,i,t]),u(o,e,i)}function s(t,e,i,r){var o=r.context;r.error.call(o,i,e,t),n(r,o,"ajaxError",[i,r,t]),u(e,i,r)}function u(t,e,i){var o=i.context;i.complete.call(o,e,t),n(i,o,"ajaxComplete",[e,i]),r(i)}function c(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==T?"html":t==E?"json":w.test(t)?"script":x.test(t)&&"xml")||"text"}function f(t,e){return(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=f(e.url,e.data))}function p(e,n,i,r){var o=!t.isFunction(n);return{url:e,data:o?n:void 0,success:o?t.isFunction(i)?i:void 0:n,dataType:o?r||i:i}}function d(e,n,i,r){var o,a=t.isArray(n);t.each(n,function(n,s){o=t.type(s),r&&(n=i?r:r+"["+(a?"":n)+"]"),!r&&a?e.add(s.name,s.value):"array"==o||!i&&"object"==o?d(e,s,i,n):e.add(n,s)})}var m,v,g=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,x=/^(?:text|application)\/xml/i,E="application/json",T="text/html",S=/^\s*$/;t.active=0,t.ajaxJSONP=function(e){if(!("type"in e))return t.ajax(e);var n,i="jsonp"+ ++g,r=y.createElement("script"),u=function(){clearTimeout(n),t(r).remove(),delete window[i]},l=function(t){u(),t&&"timeout"!=t||(window[i]=c),s(null,t||"abort",f,e)},f={abort:l};return o(f,e)===!1?(l("abort"),!1):(window[i]=function(t){u(),a(t,f,e)},r.onerror=function(){l("error")},r.src=e.url.replace(/=\?/,"="+i),t("head").append(r),e.timeout>0&&(n=setTimeout(function(){l("timeout")},e.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:E,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{});for(m in t.ajaxSettings)void 0===n[m]&&(n[m]=t.ajaxSettings[m]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),h(n),n.cache===!1&&(n.url=f(n.url,"_="+Date.now()));var r=n.dataType,u=/=\?/.test(n.url);if("jsonp"==r||u)return u||(n.url=f(n.url,"callback=?")),t.ajaxJSONP(n);var p,d=n.accepts[r],g={},y=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,b=n.xhr();n.crossDomain||(g["X-Requested-With"]="XMLHttpRequest"),d&&(g.Accept=d,d.indexOf(",")>-1&&(d=d.split(",",2)[0]),b.overrideMimeType&&b.overrideMimeType(d)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&(g["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=t.extend(g,n.headers||{}),b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=c,clearTimeout(p);var e,i=!1;if(b.status>=200&&b.status<300||304==b.status||0==b.status&&"file:"==y){r=r||l(b.getResponseHeader("content-type")),e=b.responseText;try{"script"==r?(1,eval)(e):"xml"==r?e=b.responseXML:"json"==r&&(e=S.test(e)?null:t.parseJSON(e))}catch(o){i=o}i?s(i,"parsererror",b,n):a(e,b,n)}else s(null,b.status?"error":"abort",b,n)}};var w="async"in n?n.async:!0;b.open(n.type,n.url,w);for(v in n.headers)b.setRequestHeader(v,n.headers[v]);return o(b,n)===!1?(b.abort(),!1):(n.timeout>0&&(p=setTimeout(function(){b.onreadystatechange=c,b.abort(),s(null,"timeout",b,n)},n.timeout)),b.send(n.data?n.data:null),b)},t.get=function(){return t.ajax(p.apply(null,arguments))},t.post=function(){var e=p.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=p.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,a=e.split(/\s/),s=p(e,n,i),u=s.success;return a.length>1&&(s.url=a[0],r=a[1]),s.success=function(e){o.html(r?t("<div>").html(e.replace(b,"")).find(r):e),u&&u.apply(o,arguments)},t.ajax(s),this};var P=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(P(t)+"="+P(e))},d(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t(Array.prototype.slice.call(this.get(0).elements)).each(function(){e=t(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(t,e){function n(t){return i(t.replace(/([a-z])([A-Z])/,"$1-$2"))}function i(t){return t.toLowerCase()}function r(t){return o?o+t:i(t)}var o,a,s,u,c,l,f,h,p="",d={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},m=window.document,v=m.createElement("div"),g=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};t.each(d,function(t,n){return v.style[t+"TransitionProperty"]!==e?(p="-"+i(t)+"-",o=n,!1):void 0}),a=p+"transform",y[s=p+"transition-property"]=y[u=p+"transition-duration"]=y[c=p+"transition-timing-function"]=y[l=p+"animation-name"]=y[f=p+"animation-duration"]=y[h=p+"animation-timing-function"]="",t.fx={off:o===e&&v.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:p,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},t.fn.animate=function(e,n,i,r){return t.isPlainObject(n)&&(i=n.easing,r=n.complete,n=n.duration),n&&(n=("number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default)/1e3),this.anim(e,n,i,r)},t.fn.anim=function(i,r,o,p){var d,m,v,b={},w="",x=this,E=t.fx.transitionEnd;if(r===e&&(r=.4),t.fx.off&&(r=0),"string"==typeof i)b[l]=i,b[f]=r+"s",b[h]=o||"linear",E=t.fx.animationEnd;else{m=[];for(d in i)g.test(d)?w+=d+"("+i[d]+") ":(b[d]=i[d],m.push(n(d)));w&&(b[a]=w,m.push(a)),r>0&&"object"==typeof i&&(b[s]=m.join(", "),b[u]=r+"s",b[c]=o||"linear")}return v=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(E,v)}t(this).css(y),p&&p.call(this)},r>0&&this.bind(E,v),this.size()&&this.get(0).clientLeft,this.css(b),0>=r&&setTimeout(function(){x.each(function(){v.call(this)})},0),this},v=null}(Zepto),function(t){function e(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){c=null,f.last&&(f.el.trigger("longTap"),f={})}function i(){c&&clearTimeout(c),c=null}function r(){a&&clearTimeout(a),s&&clearTimeout(s),u&&clearTimeout(u),c&&clearTimeout(c),a=s=u=c=null,f={}}function o(t){return t.pointerType==t.MSPOINTER_TYPE_TOUCH&&t.isPrimary}var a,s,u,c,l,f={},h=750;t(document).ready(function(){var p,d,m,v=0,g=0;"MSGesture"in window&&(l=new MSGesture,l.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(f.el.trigger("swipe"),f.el.trigger("swipe"+e))}).on("touchstart MSPointerDown",function(e){("MSPointerDown"!=e.type||o(e))&&(m="MSPointerDown"==e.type?e:e.touches[0],p=Date.now(),d=p-(f.last||p),f.el=t("tagName"in m.target?m.target:m.target.parentNode),a&&clearTimeout(a),f.x1=m.pageX,f.y1=m.pageY,d>0&&250>=d&&(f.isDoubleTap=!0),f.last=p,c=setTimeout(n,h),l&&"MSPointerDown"==e.type&&l.addPointer(e.pointerId))}).on("touchmove MSPointerMove",function(t){("MSPointerMove"!=t.type||o(t))&&(m="MSPointerMove"==t.type?t:t.touches[0],i(),f.x2=m.pageX,f.y2=m.pageY,v+=Math.abs(f.x1-f.x2),g+=Math.abs(f.y1-f.y2))}).on("touchend MSPointerUp",function(n){("MSPointerUp"!=n.type||o(n))&&(i(),f.x2&&Math.abs(f.x1-f.x2)>30||f.y2&&Math.abs(f.y1-f.y2)>30?u=setTimeout(function(){f.el.trigger("swipe"),f.el.trigger("swipe"+e(f.x1,f.x2,f.y1,f.y2)),f={}},0):"last"in f&&(30>v&&30>g?s=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=r,f.el.trigger(e),f.isDoubleTap?(f.el.trigger("doubleTap"),f={}):a=setTimeout(function(){a=null,f.el.trigger("singleTap"),f={}},250)},0):f={}),v=g=0)}).on("touchcancel MSPointerCancel",r),t(window).on("scroll",r)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto);
;!function(){var n=50,t=25,e={},r=[].slice,a={},c=function(n,t,r,c){var o=a[n];o||(o=a[n]={}),o[t]=o[t]||[],o[t].push({func:r,context:c||e})},o=function(n,t,r,a){var o=function(){return e.off(n,t,o),r.apply(a||e,arguments)};c(n,t,o,a)},f=function(e,c){if(a[e]&&a[e][c]&&a[e][c].length){for(var o=a[e][c],f=[],i=o.length;i--;)f.push({handler:o[i],args:r.call(arguments,1)});!function(){var e=+new Date;do{var r=f.shift(),a=r.handler;try{a.func.apply(a.context,r.args)}catch(c){}}while(f.length&&+new Date-e<n);f.length>0&&setTimeout(arguments.callee,t)}()}},i=function(n,t,r,c){if(c=c||e,a[n]&&a[n][t]&&a[n][t].length)for(var o,f=a[n][t],i=f.length;i--;)o=f[i],o.func===r&&o.context===c&&f.splice(i,1)};e.on=c,e.once=o,e.trigger=f,e.off=i,window.listener=window.listener||e}();
;window.Widget=function(){function n(n){i(n)}var t,o=[],e=[],i=function(n){t.init&&$.isFunction(t.init)&&t.init(n),c()},c=function(){var n,o,e,i,c=t.events,f=t.channels,s=/^(\S+)\s*(.*)$/;c&&c instanceof Object&&$.each(c,function(e,c){return $.isFunction(c)||(c=t[c]),c?(i=e.match(s),n=i[1],o=i[2],r(n,o,c),void 0):!0}),f&&f instanceof Object&&$.each(f,function(t,o){return $.isFunction(o)||(o=this[o]),o?(i=t.match(s),e=i[1],n=i[2],u(e,n,o),void 0):!0}),listener.once("common.page","pagearrived",$.proxy(a,t))},r=function(n,e,i){var c=t.el||"body";e?$(c).on(n,e,$.proxy(i,t)):$(c).on(n,$.proxy(i,t)),o.push([n,e,i])},u=function(n,o,i){listener.on(n,o,$.proxy(i,t)),e.push([n,o,i])},f=function(n,o,e){var i=t.el||"body";o?$(i).off(n,o,e):$(i).off(n,e)},s=function(n,t,o){listener.off(n,t,o)},a=function(){t.destroy&&$.isFunction(t.destroy)&&(t.destroy(),t.destroy=null),$.each(o,function(n,t){f(t[0],t[1],t[2])}),$.each(e,function(n,t){s(t[0],t[1],t[2])}),o=[],e=[],t.el=void 0};return n.extend=function(n){var o=this,e=function(){return t=this,o.apply(this,arguments)},i=function(){this.constructor=e};return i.prototype=o.prototype,e.prototype=new i,i=null,$.extend(e.prototype,n),e.createWidget=function(n){new e(n)},e},n}();
;var BigPipe=function(){function parseJSON(json){return window.JSON?JSON.parse(json):eval("("+json+")")}function ajax(e,n,t){var a=new(window.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP");a.onreadystatechange=function(){4==a.readyState&&n(a.responseText)},a.open(t?"POST":"GET",e+"&t="+~~(1e6*Math.random()),!0),t&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(t)}function getCommentById(e){var n=document.getElementById(e);if(!n)return"";var t=n.firstChild.nodeValue;return t=t.substring(1,t.length-1).replace(/\\([\s\S]|$)/g,"$1"),n.parentNode.removeChild(n),t}function renderPagelet(e,n,t){if(!(e.id in t)){t[e.id]=!0,e.parent_id&&renderPagelet(n[e.parent_id],n,t);var a=document.getElementById(e.id);a||(a=document.createElement("div"),a.id=e.id,container?container.appendChild(a):document.body.appendChild(a)),a.innerHTML=e.html||getCommentById(e.html_id)}}function render(e,n){pagelets=n?n:pagelets;var t,a=pagelets.length,r={},o={},e=e||{};for(t=0;a>t;t++){var i=pagelets[t];r[i.id]=i}for(t=0;a>t;t++)renderPagelet(pagelets[t],r,o);e.trigger===!0&&trigger("pagerendercomplete",{url:pageUrl,resource:resource})}function process(e,n){function t(){var t=getNeedLoad(e.js);if(e.style){var a=document.createElement("style");a.innerHTML=e.style,document.getElementsByTagName("head")[0].appendChild(a)}n(),t?LazyLoad.js(t,function(){recordLoaded(t),e.script&&window.eval(e.script),trigger("onpageloaded")}):(e.script&&window.eval(e.script),trigger("onpageloaded"))}e.async&&require.resourceMap(e.async);var a=getNeedLoad(e.css);a?LazyLoad.css(a.reverse(),function(){recordLoaded(a),t()}):t()}function getNeedLoad(e){var n=[];if("string"==typeof e)n=[e];else if("[object Array]"===Object.prototype.toString.call(e))for(var t=0;t<e.length;t++)loadedResource[e[t]]!==LOADED&&n.push(e[t]);return 0===n.length&&(n=null),n}function recordLoaded(e){var n=e;"string"==typeof n&&(n=[n]);for(var t=0;t<n.length;t++)loadedResource[e[t]]=LOADED}function register(e){process(e,function(){render({trigger:!0}),"function"==typeof onReady&&onReady()})}function fetch(e,n,t,a){var r,o=location.href,t=t||{},i={};containerId=n;var c=function(t,r){if(o===location.href&&n==containerId){pageUrl=e;var i=parseJSON(t);resource=i,trigger("pagearrived",r),onPagelets(i,n,a)}};isCacheAvailable(e)&&t.cache!==!1?(r=getCachedResource(e),i.initiator=initiatorType.FROM_CACHE,statRecord(e),c(r,i)):ajax(e,function(n){i.initiator=initiatorType.QUICKLING,addResourceToCache(e,n),c(n,i)})}function refresh(e,n,t,a){fetch(e,n,t,a)}function asyncLoad(e,n,t){function a(e){resource=e,pageUrl=s,process(e.resource_map,function(){render({},e.pagelets),"function"==typeof t&&t()})}e instanceof Array||(e=[e]),n=n||{};var r,o=[],i=location.href,c=n.param?"&"+n.param:"",s="string"==typeof n.url?n.url:location.href.split("#")[0],l=!1;for(r=e.length-1;r>=0;r--){var d=e[r].id;if(e[r].useCache&&(l=!0),!d)throw Error("[BigPipe] missing pagelet id");o.push("pagelets[]="+d)}s=s.replace(/\/$/,"")+"&"+o.join("&")+"&force_mode=1&fis_widget=true"+c;var u=window&&window.openDatabase,g=Websql.getConnection(),f=s,p=o.join("&");u&&g&&l?Websql.getItem(g,p,function(e,n){if(n){var t=parseJSON(n);f=s+"&fis_cache_hash="+t.hash}ajax(f,function(e){if(i===location.href){var r=parseJSON(e);"0"!==r.cache&&n?a(t):Websql.setItem(g,p,e,function(){a(r),g=null})}})}):ajax(f,function(e){i===location.href&&a(parseJSON(e))})}function statRecord(e){if("string"==typeof e){var n=-1===e.indexOf("?")?"/?":"&";e=e+n+"pagecache=1",ajax(e,function(){})}}function addResourceToCache(e,n){resourceCache[e]={data:n,time:Date.now()}}function getCachedResource(e){return resourceCache[e]?resourceCache[e].data:void 0}function isCacheAvailable(e){return!!resourceCache[e]&&Date.now()-resourceCache[e].time<=cacheMaxTime}function onPageletArrived(e){pagelets.push(e)}function onPagelets(e,n,t){e.title&&(document.title=e.title),container=document.getElementById(n),container.innerHTML="",pagelets=e.pagelets,process(e.resource_map,function(){t&&t(),render({trigger:!0})})}function onPageReady(e){onReady=e,trigger("pageready",pagelets)}function onPageChange(e){fetch(location.pathname+(location.search?location.search+"&":"?")+"pagelets="+e)}function trigger(e){var n=events[e];if(n)for(var t=SLICE.call(arguments,1),a=0,r=n.length;r>a;a++){var o=n[a];if(o.f.apply(o.o,t)===!1)break}}function on(e,n,t){var a=events[e]||(events[e]=[]);a.push({f:n,o:t})}var pagelets=[],loadedResource={},container,containerId,pageUrl=location.pathname+(location.search?"?"+location.search:""),resource,resourceCache={},onReady,_pageletUseCache=!1,initiatorType={LANDING:0,QUICKLING:1,FROM_CACHE:2},LOADED=1,cacheMaxTime=3e5,WEBSQL_DB_NAME=location.hostname,WEBSQL_TATBLE_NAME="fis_bigpipe_cache",conn,Websql={getConnection:function(){try{return conn?conn:(conn=window.openDatabase(WEBSQL_DB_NAME,"1.0","",5242880),conn?conn:null)}catch(e){return null}},getItem:function(e,n,t){e.transaction(function(e){e.executeSql("SELECT * FROM "+WEBSQL_TATBLE_NAME+" WHERE id=?",[n],function(e,n){n.rows.length>0?t(null,n.rows.item(0).value):t(null,null)},function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+WEBSQL_TATBLE_NAME+"(id TEXT NOT NULL PRIMARY KEY, value TEXT)",[],function(){t(null)},function(e,n){t(n)})})})},setItem:function(e,n,t,a){e.transaction(function(e){e.executeSql("INSERT OR REPLACE INTO "+WEBSQL_TATBLE_NAME+"(id, value) VALUES (?, ?)",[n,t],function(e){a(null,e)},function(e,n){a(n)})})}},SLICE=[].slice,events={};return{asyncLoad:asyncLoad,register:register,refresh:refresh,onPageReady:onPageReady,onPageChange:onPageChange,onPageletArrived:onPageletArrived,onPagelets:onPagelets,pageletUseCache:_pageletUseCache,on:on,trigger:trigger}}();
;!function(e){function t(e){r(e),T=v(),n(),o()}function r(e){var t={selector:"a,[data-href]",cacheMaxTime:3e5,pushState:!0,layer:document.body,spa:!0};D=l(t,e),C=D.cacheMaxTime,E=D.pushState,M=a(D.layer),I=D.root||"/",!/\/$/.test(I)&&(I+="/")}function n(){var e="index/index/"+location.search;if(E){var t=v();"/mobile/"===t&&A(e,{replace:!0})}}function o(){var e=E?"popstate":"hashchange";window.addEventListener(e,i,!1),M.addEventListener("click",p,!0),BigPipe.on("pagerendercomplete",c,this),BigPipe.on("pagearrived",u,this),BigPipe.on("onpageloaded",f,this)}function a(e){return"string"==typeof e?document.querySelector(e):e&&e.nodeType?e:document.body}function i(){var e=v();T&&e!==T&&(k("historyback"),k("onpagerenderstart"),j(e))}function c(e){B[e.url]={resource:e.resource,time:Date.now()},k("onpagerendercomplete",{url:e.url})}function u(e){k("onpagearrived",e)}function f(){k("onpageloaded")}function l(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function p(e){for(var t=e.target,r=t,n=D.selector;r!==document.body;){if(d(r,n)){if("false"===r.getAttribute("data-redirect"))return;if(urlAttr="a"===r.tagName.toLowerCase()?"href":"data-href",url=r.getAttribute(urlAttr),s(url)){e.stopPropagation(),e.preventDefault();var o={replace:r.getAttribute("data-replace")||!1,containerId:r.getAttribute("data-area"),pagelets:r.getAttribute("data-area"),target:r,refresh:"true"===r.getAttribute("refresh"),cache:"false"===r.getAttribute("cache")?!1:!0};m(url,o)}return}r=r.parentNode}}function d(e,t){if(!e||1!==e.nodeType)return!1;var r,n,o=e.webkitMatchesSelector||e.matchesSelector;return o?n=o.call(e,t):(r=e.parentNode,n=!!r.querySelector(t)),n}function s(e){var t=D.validate,r=Object.prototype.toString.call(t);return"[object RegExp]"===r?t.test(e):"[object Function]"===r?t(e):!0}function g(e){var t="";return R.test(e)?(t=E||""===RegExp.$9?RegExp.$5:RegExp.$9,h(t)):("console"in window&&console.error("[url error]:",e),!1)}function h(e){return e.replace(I,"")}function v(){return g(window.location.href)}function y(){var e=v();return I+e}function m(e,t){if(t=t||{},t.refresh||D.spa===!1)return b(e,t.replace),void 0;if(e=g(e),v()!==e){var r={trigger:!0,forword:!0,replace:!1},n={url:e};if(t=l(r,t),n.target=t.target||null,t.trigger===!1)return A(e,t),void 0;k("onpagerenderstart",n),j(e,t,function(){t.forword&&A(e,t)})}}function b(e,t){var r=!!t;/^http/.test(e)||(e="http://"+location.host+e),r===!0?location.replace(e):location.href=e}function w(e,t,r,n){var o={},a="object"==typeof r?r:{},i="function"==typeof r?r:n;"function"!=typeof i&&(i=function(){}),"string"==typeof t&&(o.param=t),o.url="string"==typeof a.url?a.url:I+v();var c=function(){k("asyncloaded",o),i()};a.removeStatCookie!==!1&&x(),k("beforeasyncload",o),BigPipe.asyncLoad(e,o,c)}function x(){if(/(?:^| )H_MAP_CLK=([^;]*)(?:;|$)/i.test(document.cookie)){var e=new Date;e.setTime(e.getTime()-1e4),document.cookie='H_MAP_CLK="";expires='+e.toGMTString()+";path=/;"}}function A(e,t){t=t||{};var r=!!t.replace;E?(e=I+e,P(e,r)):S(e,r),T=e}function P(e,t){var r=t?"replaceState":"pushState";window.history[r]({},document.title,e)}function S(e,t){var r=e.replace(/^\//,""),n=location.href.replace(/(javascript:|#).*$/,"");t?location.replace(n+"#"+r):location.href=n+"#"+r}function j(e,t,r){if(e){var t=(Date.now(),t||{}),n=[],o={},a=t.containerId?t.containerId:D.containerId,i=t.pagelets?t.pagelets:D.pagelets;if("string"==typeof i&&(i=[i]),T=e,i.length>0){for(var c=0,u=i.length;u>c;c++)n.push("pagelets[]="+i[c]);e=-1===e.indexOf("?")?e+"/?"+n.join("&"):e+"&"+n.join("&")}e=I+e,t.cache===!1&&(o.cache=!1),BigPipe.refresh(e,a,o,function(){r&&r()})}}function k(e){var t=N[e];if(t)for(var r=_.call(arguments,1),n=0,o=t.length;o>n;n++){var a=t[n];if(a.f.apply(a.o,r)===!1)break}}function L(e,t,r){var n=N[e]||(N[e]=[]);n.push({f:t,o:r})}var T,E,M,$=e,B={},C=0,D={},I="",R=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/i,_=[].slice,N={};$.appPage={start:t,redirect:m,on:L,getFragment:y,asyncLoad:w},"define"in window&&"undefined"!=typeof module&&(module.exports=$.appPage)}(this);
;define("common:static/js/mercatorProjection.js",function(t,e,a){"use strict";a.exports={EARTHRADIUS:6370996.81,MCBAND:[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],convertMC2LL:function(t){var e,a;e={lng:Math.abs(t.lng),lat:Math.abs(t.lat)};for(var n=0;n<this.MCBAND.length;n++)if(e.lat>=this.MCBAND[n]){a=this.MC2LL[n];break}var r=this.convertor(t,a),t={lng:r.lng.toFixed(6),lat:r.lat.toFixed(6)};return t},convertLL2MC:function(t){var e,a;t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74),e={lng:t.lng,lat:t.lat};for(var n=0;n<this.LLBAND.length;n++)if(e.lat>=this.LLBAND[n]){a=this.LL2MC[n];break}if(!a)for(var n=this.LLBAND.length-1;n>=0;n--)if(e.lat<=-this.LLBAND[n]){a=this.LL2MC[n];break}var r=this.convertor(t,a),t={lng:r.lng.toFixed(2),lat:r.lat.toFixed(2)};return t},convertor:function(t,e){if(t&&e){var a=e[0]+e[1]*Math.abs(t.lng),n=Math.abs(t.lat)/e[9],r=e[2]+e[3]*n+e[4]*n*n+e[5]*n*n*n+e[6]*n*n*n*n+e[7]*n*n*n*n*n+e[8]*n*n*n*n*n*n;return a*=t.lng<0?-1:1,r*=t.lat<0?-1:1,{lng:a,lat:r}}},getRange:function(t,e,a){return null!=e&&(t=Math.max(t,e)),null!=a&&(t=Math.min(t,a)),t},getLoop:function(t,e,a){for(;t>a;)t-=a-e;for(;e>t;)t+=a-e;return t}}});
;define("common:widget/cookie/cookie.js",function(e,n,t){"use strict";var i={};i._isValidKey=function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},i.getRaw=function(e){if(i._isValidKey(e)){var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),t=n.exec(document.cookie);if(t)return t[2]||null}return null},i.get=function(e){var n=i.getRaw(e);return"string"==typeof n?n=decodeURIComponent(n):null},i.setRaw=function(e,n,t){if(i._isValidKey(e)){t=t||{};var o=t.expires;"number"==typeof t.expires&&(o=new Date,o.setTime(o.getTime()+t.expires)),document.cookie=e+"="+n+(t.path?"; path="+t.path:"")+(o?"; expires="+o.toGMTString():"")+(t.domain?"; domain="+t.domain:"")+(t.secure?"; secure":"")}},i.remove=function(e,n){n=n||{},n.expires=new Date(0),i.setRaw(e,"",n)},i.set=function(e,n,t){i.setRaw(e,encodeURIComponent(n),t)},t.exports=i});
;define("common:widget/fastclick/fastclick.js",function(t,e,i){function n(t){"use strict";var e,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){n.prototype.onClick.apply(i,arguments)},this.onTouchStart=function(){n.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){n.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){n.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){n.prototype.onTouchCancel.apply(i,arguments)},"undefined"!=typeof window.ontouchstart&&(t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,i.hijacked||i,n):o.call(t,e,i,n)},t.addEventListener=function(e,i,n){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):o.call(t,e,i,n)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}n.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,n.prototype.deviceIsChrome=navigator.userAgent.indexOf("Chrome")>0,n.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),n.prototype.deviceIsIOS4=n.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),n.prototype.deviceIsIOSWithBadTarget=n.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),n.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"input":return this.deviceIsIOS&&"file"===t.type?!0:t.disabled;case"label":case"video":return!0;default:return/\bneedsclick\b/.test(t.className)}},n.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled;default:return/\bneedsfocus\b/.test(t.className)}},n.prototype.sendClick=function(t,e){"use strict";var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},n.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},n.prototype.updateScrollParent=function(t){"use strict";var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},n.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},n.prototype.onTouchStart=function(t){"use strict";var e,i,n;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,this.touchStartClientX=i.clientX,this.touchStartClientY=i.clientY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},n.prototype.onTouchMove=function(t){"use strict";var e,i;return e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.trackingClick?((Math.abs(i.clientX-this.touchStartClientX)>10||Math.abs(i.clientY-this.touchStartClientY)>10)&&(this.trackingClick=!1,this.targetElement=null),!0):!0},n.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0];return Math.abs(e.pageX-this.touchStartX)>10||Math.abs(e.pageY-this.touchStartY)>10?!0:!1},n.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},n.prototype.onTouchEnd=function(t){"use strict";var e,i,n,o,c,r=this.targetElement;if(!this.trackingClick)return!0;if(this.touchHasMoved(t)&&(this.trackingClick=!1,this.targetElement=null),!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(c=t.changedTouches[0],r=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)),n=r.tagName.toLowerCase(),"label"===n){if(e=this.findControl(r)){if(this.focus(r),this.deviceIsAndroid)return!1;r=e}}else if(this.needsFocus(r))return t.timeStamp-i>150||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(r),(this.deviceIsIOS4||this.deviceIsChrome)&&"select"===n?!1:(this.targetElement=null,t.preventDefault(),!1));if(this.deviceIsIOS&&!this.deviceIsIOS4&&(o=r.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop))return!0;if(!this.needsClick(r))if(t.preventDefault(),this.deviceIsIOS)this.sendClick(r,t);else{var s=this;setTimeout(function(){s.sendClick(r,t)},20)}return!1},n.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},n.prototype.onClick=function(t){"use strict";var e;return this.targetElement?t.forwardedTouchEvent?!0:(e=this.targetElement,this.targetElement=null,this.trackingClick?(this.trackingClick=!1,!0):t.cancelable?"submit"===t.target.type&&0===t.detail?!0:!this.needsClick(e)||this.cancelNextClick?(this.cancelNextClick=!1,t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0):!0},n.prototype.destroy=function(){"use strict";var t=this.layer;t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchcancel",function(t){t.preventDefault()},!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},"undefined"!=typeof define&&define.amd&&define(function(){"use strict";return n}),"undefined"!=typeof i&&i.exports&&(i.exports=function(t){"use strict";return new n(t)},i.exports.FastClick=n),i.exports=n});
;define("common:static/js/gmu/src/core/gmu.js",function(){window.gmu=window.gmu||{version:"2.1.2",$:window.Zepto,staticCall:function(n){var t=n.fn,o=[].slice,e=n();return e.length=1,function(n,i){return e[0]=n,t[i].apply(e,o.call(arguments,2))}}(Zepto)}});
;define("common:widget/geolocation/myposition.js",function(i,t,e){"use strict";var o=i("common:widget/cookie/cookie.js");e.exports={domain:".baidu.com",path:"/",webCookie:"H_LOC_MI",nativeCookie:"H_LOC_APP",baiduLoc:"BAIDULOC",expires:1728e5,get:function(i){var t,e;if("baiduLoc"===i){if(t=o.get(this.baiduLoc),!t)return;var a={};try{e=t.split("_"),a={crd:{x:e[0],y:e[1],r:e[2]},cc:e[3],t:e[4]}}catch(r){}return a}if(i&&("web"===i||"native"===i)){var s="web"===i?this.webCookie:this.nativeCookie;if((t=o.get(s))&&(e=JSON.parse(t),t&&e)){if(e.crd){var n=e.crd.split("_");n[0]&&n[1]&&n[2]&&(e.crd={x:n[0],y:n[1],r:n[2]})}return e}}},save:function(i){"object"!=typeof i&&i.x&&i.y&&i.cityCode&&i.accuracy||this._save(i)},_save:function(i){var t=Date.now();i.t=t+"";var e=i.join("_");o.set(this.baiduLoc,e,{domain:this.domain,path:this.path,expires:this.expires})},remove:function(i){if(!i)return o.remove(this.webCookie,{domain:this.domain,path:this.path}),void 0;var t=o.get(this.webCookie),e=JSON.parse(t),a={};for(var r in e)i!==r&&(a[r]=e[r]);var s=JSON.stringify(a);o.set(this.webCookie,s,{domain:this.domain,path:this.path})}}});
;define("common:widget/geolocation/preciseipgeolocation.js",function(require,exports,module){"use strict";var PreciseIPGeoLocation={init:function(){this._startGeo()},_startGeo:function(){var addrbyip=_DEFAULT_CITY.addrbyip;addrbyip?this._getDetailLoc(eval("("+addrbyip+")")):listener.trigger("common.geomethod","fail",{})},_getDetailLoc:function(e){var i,t=e&&e.content,o=t&&t.address_detail,r=t&&t.point;return 0!==e.error||""===t.address?(listener.trigger("common.geomethod","fail",{}),void 0):(i={addr:{address:t.address||null,city:o.city||null,cityCode:o.city_code||1,district:o.district||null,street:o.street||null,accuracy:o.accuracy||null},point:{x:r.x||null,y:r.y||null},isGeoSuc:!0,isExactPoi:!0,type:"preciseip",isUserDeny:!1,isSaveLocInCookie:!0},listener.trigger("common.geomethod","success",i),void 0)}};module.exports=PreciseIPGeoLocation});
;define("common:static/js/gmu/src/extend/parseTpl.js",function(){!function(e){e.parseTpl=function(e,r){var n="var __p=[];with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(e,r){return"',"+r.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(e,r){return"');"+r.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',p=new Function("obj",n);return r?p(r):p}}(Zepto)});
;define("common:widget/pagemgr/pagemgr.js",function(n,e,t){"use strict";var i=0,r=0,a=1,o={switchstart:1,pagearrived:2,switchend:3,pageloaded:4},c=["landing","quickling","fromcache"],g="landing",p=[],d=function(){var n,e=document.referrer,t=/^.*?\/\/(.*?)(\/|\?|\#|$)/i,i=e.match(t);return i&&(n=i[1]),n},s=function(){return 0===i},u=function(){return location.href.indexOf("fromhash=1")>-1?!0:window.location.host!==d()},f=function(){return s()&&u()},m=function(){return!0},h=function(){return g},l=function(n){c[n]&&(g=c[n])},v=function(){$.each(p,function(n,e){e()}),p=[]},w=function(n){return o[n]?(("switchstart"===n||a===o.pageloaded)&&r++,a=o[n],r):void 0},P=function(){appPage.on("onpagerenderstart",function(n){var e=n||{};e.eid=w("switchstart"),listener.trigger("common.page","switchstart",e)}),appPage.on("onpagearrived",function(n){var e=n||{};e.eid=w("pagearrived"),l(n.initiator),listener.trigger("common.page","pagearrived",e)}),appPage.on("onpagerendercomplete",function(n){var e=n||{};e.eid=w("switchend"),i++,v(),listener.trigger("common.page","switchend",e)}),appPage.on("onpageloaded",function(n){var e=n||{};e.eid=w("pageloaded"),listener.trigger("common.page","pageloaded",e)}),appPage.on("historyback",function(){listener.trigger("common.page","historyback")})},k=function(n){$.isFunction(n)&&p.push(n)},y=function(){P()};t.exports={init:y,getInitiator:h,registerDestory:k,isLandingPage:f,isSinglePageApp:m}});
;define("common:static/js/gmu/src/extend/highlight.js",function(){!function(t){function o(){if(c){var t=c.attr("hl-cls");clearTimeout(n),c.removeClass(t).removeAttr("hl-cls"),c=null,e.off("touchend touchmove touchcancel",o)}}var c,n,e=t(document);t.fn.highlight=function(h,i){return this.each(function(){var u=t(this);u.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.hl"),h&&u.on("touchstart.hl",function(s){var l;c=i?(l=t(s.target).closest(i,this))&&l.length&&l:u,setTimeout(function(){o()},2e3),c&&(c.attr("hl-cls",h),n=setTimeout(function(){c.addClass(h)},10),e.on("touchend touchmove touchcancel",o))})})}}(Zepto)});
;define("common:widget/stat/metrics-stat.js",function(n,t,e){"use strict";function r(n,t){if(!n)return!1;f(n,N.suspend,1);var e={};if(e.type="ms0",e.target=n,e.ts=Date.now(),g[n]=e,t){var r=t.expire;r>0&&i(n,r);var u=t.callback;u&&u instanceof Function&&(b[n]=u)}return!0}function i(n,t){x[n]=setTimeout(function(){s(n)},1e3*t)}function u(n,t,e,r){if(!n||!t)return!1;e||(e=1);var i=g[n];if(!i)return!1;if($.isPlainObject(e)){for(var u in e){var o=t+"_"+u;i[o]=e[u]}i[t]=a(i[t],1,r)}else i[t]=a(i[t],e,r);return!0}function a(n,t,e){return e?isNaN(n)?t:isNaN(t)?t:n+t:t}function o(n){return f(n,N.success,1)}function s(n){return f(n,N.expire,1)}function c(){if(!p(g))for(var n in g)f(n,N.suspend,1)}function f(n,t,e){if(!n)return!1;var r=g[n];if(!r)return!1;r.status=t;var i=v(T,r);l(i,e),r.url=i,delete g[n];var u=x[n];u&&(delete x[n],clearTimeout(u));var a=b[n];return a&&a instanceof Function&&(d(a,r,50),delete b[n]),!0}function d(n,t,e){setTimeout(function(){n(t)},e)}function v(n,t){var e=n.split("?"),r=e[0],i=e[1];i?i+="&":i="",i+=$.param(t);var u=r+"?"+i;return u}function l(n){(new Image).src=n}function p(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}function m(n){return n?g[n]:void 0}function w(n,t){var e={t:Date.now(),code:n};$.extend(e,t);var r=v(T,e);l(r,1)}var g={},b={},x={},N={success:0,expire:1,suspend:2},T="/mobile/img/transparent.gif?newmap=1";$.each(["blur","pagehide","beforeunload","unload"],function(n,t){var e="on"+t;void 0!==window[e]&&$(window).bind(t,c)}),e.exports={start:r,addStat:u,submit:o,getTarget:m,sendOldStat:w}});
;define("common:widget/datepicker/datepicker.js",function(t,e){"use strict";var a=$;!function(t){var e,a,i,r=!1,n=function(){clearTimeout(a),e&&(i=e.attr("highlight-cls"))&&(e.removeClass(i).attr("highlight-cls",""),e=null)};t.extend(t.fn,{highlight:function(i){return r=r||!!t(document).on("touchend.highlight touchmove.highlight touchcancel.highlight",n),n(),this.each(function(){var r=t(this);r.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.highlight"),i&&r.on("touchstart.highlight",function(){a=setTimeout(function(){e=r.attr("highlight-cls",i).addClass(i)},100)})})}})}(a),function(t,e){function a(e,a){this._el=t(e),this._data=t.extend({date:null,firstDay:1,maxDate:null,minDate:null,container:null,gap:!0,dateList:[]},a),i(e,this),this._init()}var i=function(){var t=0,a={},i="dp"+ +new Date;return function(r,n){var s=r[i]||(r[i]=t++);return n!==e&&(n?a[s]=n:delete a[s]),a[s]}}(),r=Array.prototype.slice,n=["01","02","03","04","05","06","07","08","09","10","11","12"],s=["","","","","","",""],h=/^(\+|\-)?(\d+)(M|Y)$/i,c=function(t,e){return 32-new Date(t,e,32).getDate()},o=function(t,e){return new Date(t,e,1).getDay()};t.datepicker={parseDate:function(t){var e=/^(\d{4})\-(\d{1,2})\-(\d{1,2})$/;return"object"==typeof t?t:e.test(t)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null},parseDateList:function(e){for(var a=[],i=0;i<e.length;i++)a.push(t.datepicker.parseDate(e[i]));return a},formatDate:function(e){var a=t.datepicker.formatNumber;return e.getFullYear()+"-"+a(e.getMonth()+1,2)+"-"+a(e.getDate(),2)},formatNumber:function(t,e){for(var a=""+t;a.length<e;)a="0"+a;return a}},t.extend(a.prototype,{root:function(t){return this._el=t||this._el},on:function(e,a){return this.root().on(e,t.proxy(a,this)),this},off:function(t,e){return this.root().off(t,e),this},trigger:function(e,a){e="string"==typeof e?t.Event(e):e;var i,r=this._data,n=r[e.type];return n&&"function"==typeof n&&(e.data=a,i=n.apply(this,[e].concat(a)),i===!1||e.defaultPrevented)?this:(this.root().trigger(e,a),this)},_init:function(){var e=this._data,a=t.proxy(this._eventHandler,this);e._container=this._el,this.date(e.date||new Date).minDate(e.minDate).maxDate(e.maxDate).dateList(e.dateList).refresh(),e._container.addClass("ui-datepicker").on("click",a).highlight(),e._isShow=e._inited=!0},_eventHandler:function(e){var a,i,r,n=this,s=n._data,h=s._container;i=e.target,(a=t(i).closest(".ui-datepicker-calendar tbody a",h.get(0)))&&a.length?(e.preventDefault(),r=a.parent(),this.selectedDate(new Date(r.attr("data-year"),r.attr("data-month"),a.text())),this._commit(),this.refresh()):(a=t(i).closest(".ui-datepicker-prev, .ui-datepicker-next",h.get(0)))&&a.length&&(e.preventDefault(),setTimeout(function(){n.goTo((a.is(".ui-datepicker-prev")?"-":"+")+"1M")},0))},_checkUnSelectable:function(t){var e,a=this.minDate(),i=this.maxDate(),r=this.dateList();if(r.length){for(var n=0;n<r.length;n++)if(e=t-r[n],!e)return!1;return!0}return a&&a>t||i&&t>i},_generateHTML:function(){var t,e,a,i,r,h,d,u,l,g,p,f,D=this._data,_="",m=D._drawYear,v=D._drawMonth,k=new Date,w=new Date(k.getFullYear(),k.getMonth(),k.getDate()),y=this.selectedDate();for(r=parseInt(D.firstDay,10),r=isNaN(r)?0:r,_+='<div class="ui-datepicker-header"><a class="ui-datepicker-prev" href="#">&lt;&lt;</a><div class="ui-datepicker-title">'+D._drawYear+""+n[D._drawMonth]+'</div><a class="ui-datepicker-next" href="#">&gt;&gt;</a></div>',t="<thead><tr>",a=0;7>a;a++)h=(a+r)%7,t+="<th"+((a+r+6)%7>=5?' class="ui-datepicker-week-end"':"")+"><span>"+s[h]+"</span></th>";for(t+="</thead></tr>",e="<tbody>",e+=D.gap?'<tr class="ui-datepicker-gap"><td colspan="7">&#xa0;</td></tr>':"",u=c(m,v),d=(o(m,v)-r+7)%7,l=Math.ceil((d+u)/7),g=new Date(m,v,1-d),a=0;l>a;a++){for(e+="<tr>",i=0;7>i;i++)p=g.getMonth()!==v,f=p||this._checkUnSelectable(g),e+="<td class='"+((i+r+6)%7>=5?" ui-datepicker-week-end":"")+(p?" ui-datepicker-other-month":"")+(f?" ui-datepicker-unselectable ui-state-disabled":"")+(p||f?"":(g.getTime()===y.getTime()?" ui-datepicker-current-day":"")+(g.getTime()===w.getTime()?" ui-datepicker-today":""))+"'"+(f?"":" data-month='"+g.getMonth()+"' data-year='"+g.getFullYear()+"'")+">"+(p?"&#xa0;":f?"<span class='ui-state-default'>"+g.getDate()+"</span>":"<a class='ui-state-default"+(g.getTime()===w.getTime()?" ui-state-highlight":"")+(g.getTime()===y.getTime()?" ui-state-active":"")+"' href='#'>"+g.getDate()+"</a>")+"</td>",g.setDate(g.getDate()+1);e+="</tr>"}return e+="</tbody>",_+='<table  class="ui-datepicker-calendar">'+t+e+"</table>"},_commit:function(){var e,a=this._data,i=t.datepicker.formatDate(e=this.selectedDate());return a.date=e,a._inited&&this.trigger("valuecommit",[e,i,this]),this},option:function(a,i){var r=this._data;if(i!==e){switch(a){case"minDate":case"maxDate":r[a]=i?t.datepicker.parseDate(i):null;break;case"selectedDate":i=t.datepicker.parseDate(i),r._selectedYear=r._drawYear=i.getFullYear(),r._selectedMonth=r._drawMonth=i.getMonth(),r._selectedDay=i.getDate(),r._inited&&this.trigger("select",[this.selectedDate(),this]);break;case"date":this.option("selectedDate",i);break;case"dateList":r[a]=i?t.datepicker.parseDateList(i):[];break;case"gap":r[a]=i}return r._invalid=!0,this}return"selectedDate"===a?new Date(r._selectedYear,r._selectedMonth,r._selectedDay):r[a]},maxDate:function(t){return this.option("maxDate",t)},minDate:function(t){return this.option("minDate",t)},date:function(t){return this.option("date",t)},selectedDate:function(t){return this.option("selectedDate",t)},dateList:function(t){return this.option("dateList",t)},goTo:function(t,e){var a,i,r,n=this._data,s=this.minDate(),c=this.maxDate();return"string"==typeof t&&h.test(t)?(a="-"===RegExp.$1?-parseInt(RegExp.$2,10):parseInt(RegExp.$2,10),i=RegExp.$3.toLowerCase(),t=n._drawMonth+("m"===i?a:0),e=n._drawYear+("y"===i?a:0)):(t=parseInt(t,10),e=parseInt(e,10)),r=new Date(e,t,1),r=s&&s>r?s:c&&r>c?c:r,t=r.getMonth(),e=r.getFullYear(),(t!==n._drawMonth||e!==n._drawYear)&&(this.trigger("changemonthyear",[n._drawMonth=t,n._drawYear=e]),n._invalid=!0,this.refresh()),this},refresh:function(){var e=this._data;if(e._invalid)return t(".ui-datepicker-calendar td:not(.ui-state-disabled), .ui-datepicker-header a",e._container).highlight(),e._container.empty().append(this._generateHTML()),t(".ui-datepicker-calendar td:not(.ui-state-disabled), .ui-datepicker-header a",e._container).highlight("ui-state-hover"),e._invalid=!1,this},destroy:function(){var e=this._data,a=this._eventHandler;t(".ui-datepicker-calendar td:not(.ui-state-disabled)",e._container).highlight(),e._container.off("click",a).remove()}}),t.fn.datepicker=function(n){var s,h,c=r.call(arguments,1);return t.each(this,function(){if(h=i(this)||new a(this,t.isPlainObject(n)?n:null),"string"==typeof n&&n in h){if(s=h[n].apply(h,c),s!==h&&s!==e)return!1;s=e}else if("this"===n)return s=h,!1}),s!==e?s:this}}(a),e=a});
;define("common:widget/popup/popup.js",function(t,i,o){"use strict";o.exports={_defaultOptions:{autoCloseTime:2e3,isTouchHide:!1},_$el:null,_autoCloseTimeout:null,_create:function(t){var i,o;t.layer&&(o=$("<div/>").addClass("common-widget-popup-layer").appendTo(document.body)),i=$("<div></div>").addClass("common-widget-popup").text(t.text||"").hide().appendTo(document.body),this._layout(i),this._$el=i,this._$layer=o},_layout:function(t){var i,o;"none"===t.css("display")&&(o=t.css("visibility"),t.css({visibility:"visibile"}).show()),i=t.offset(),t.css({left:(window.innerWidth-i.width)/2,top:(window.innerHeight-i.height)/2,visibility:o})},open:function(t){var i=this;t=this._options=$.extend({},this._defaultOptions,"string"==typeof t?{text:t}:t),this._$el?(t.html?this._$el.html(t.html):this._$el.text(t.text),this._layout(this._$el)):this._create(t),this._$el.show(),t.autoCloseTime&&(clearTimeout(this._autoCloseTimeout),this._autoCloseTimeout=setTimeout($.proxy(this.close,this),t.autoCloseTime)),t.isTouchHide?(this._$el.on("click",function o(t){t.stopPropagation(),$("#bmap_pop_cover").hide(),i.close(),this._boxTouchHandle=o,this._$el.off("click",o)}),$(document.body).on("click",function e(t){t.stopPropagation(),$("#bmap_pop_cover").hide(),i.close(),this._docTouchHandle=e,$(document.body).off("click",e)})):(this._boxTouchHandle&&this._$el.off("click",this._boxTouchHandle),this._docTouchHandle&&$(document.body).off("click",this._docTouchHandle)),listener.on("common","sizechange",function(){setTimeout(function(){i.setPos()},1e3)})},close:function(){var t;this._$layer&&(this._$layer.remove(),this._$layer=null),this._$el&&(this._$el.remove(),this._$el=null,$.isFunction(t=this._options.onClose)&&t.call(this),this._autoCloseTimeout=null)},setPos:function(){if(this._$el){var t=this._$el.offset(),i=(window.innerWidth-t.width)/2,o=(window.innerHeight-t.height)/2+window.scrollY;this._$el.css({left:i,top:o})}}}});
;define("common:widget/monitor/pagelog.js",function(e,n,t){"use strict";function a(){var e=window._APP_HASH||{},n=e.module,t=e.action,a=e.page,i="";if(/vt=map/.test(location.href))i=(n+"_map").toLowerCase();else if(i=(n+"_"+t).toLowerCase(),"index"===n&&"index"===t&&"index"!==a)return"";return i}function i(){var e=a();return PDC.DICT[e]?PDC.DICT[e]:""}function o(){var e=a()+"_"+window._APP_HASH.page;return PDC.special_page[e]?PDC.special_page[e]:""}function r(){var e=a();return SDC.DICT[e]?SDC.DICT[e]:""}var d=e("common:widget/pagemgr/pagemgr.js");t.exports={init:function(){var e=i(),n=o();(e||n)&&PDC&&PDC.init({sample:1,product_id:16,page_id:e,special_pages:[{id:n,sample:1}]});var t={};listener.on("common.page","switchstart",function(e,n){t[n.eid]={start:Date.now()}}),listener.on("common.page","pagearrived",function(e,n){t[n.eid]&&(t[n.eid].wait=Date.now())}),listener.on("common.page","switchend",function(e,n){t[n.eid]&&(t[n.eid].end=Date.now())}),listener.on("common.page","pageloaded",function(e,n){if(!d||!d.isLandingPage()){var a=t[n.eid];if(a&&a.start&&a.end&&a.end-a.start>100){a.loaded=Date.now();var i=r();if(i){var o=SDC.createApp(r());o.start_event(a.start),o.view_time(a.end),a.wait&&o.mark("c_wt",a.wait),a.loaded&&o.mark("c_ld",a.loaded),o.ready(),listener.trigger("common.perf","log",{type:"pagelog",app:o})}}}})}}});
;define("common:widget/map/preloader/plugin.js",function(e,t,a){"use strict";function r(e,t){var a=document.createElement("script");a.src=e,a.addEventListener&&a.addEventListener("load",function(e){var a=e.target;a.parentNode.removeChild(a),t&&"app"===t.from&&t.cbk&&t.cbk&&t.cbk()},!1),document.getElementsByTagName("head")[0].appendChild(a),a=null}var n="/mobile/?qt=getMobileModules&v=2&",o={vector:"ygm4ly"},c={mainReady:!1,lazyReady:!1,isPreLoaded:!1,getVectorMdl:function(e){if(e=e||{},!this.isPreLoaded)try{var t=[],a=window.localStorage;for(var c in o){var d="async_"+c+"_"+o[c],i=c+"_"+o[c];(!a[d]||a[d].length<=0)&&t.push(i)}if(t.length>0){this.isPreLoaded=!0;var l=n+"mod="+t.join(",")+"&cbk=preLoadVec";r(l,e)}else e&&"app"===e.from&&e.cbk&&e.cbk&&e.cbk()}catch(s){}}};window.preLoadVec=function(e,t){try{if(!t)return;for(var a=window.localStorage,r="async_"+e,n="async_"+e.split("_")[0],o=a.length,c=o-1;c>=0;c--){var d=a.key(c);d.indexOf(n)>-1&&a.removeItem(d)}a.setItem(r,t)}catch(i){}},a.exports=c});
;define("common:widget/monitor/monitor.js",function(_,e,l){"use strict";SDC.DICT={MAP_INDEX_INDEX:77,MAP_PLACE_LIST:78,MAP_PLACE_DETAIL:79,MAP_TRANSIT_DETAIL:80,MAP_DRIVE_LIST:81,MAP_WALK_LIST:82,MAP_OTHER_PAGE:83,map_level_1:84,map_level_5:85,map_level_12:86,map_level_13:87,map_level_14:88,map_level_15:89,map_level_16:90,map_level_17:91,map_level_18:92,MAP_WAIT_LOC:93,MAP_GESTURE:189,MAP_DRAG:190,MAP_AVG:205,MAP_VCT:206,MAP_TIL:207,TRAFFIC_LAD:220,ST_LOAD:230,index_index:180,place_list:181,place_detail:182,transit_list:183,transit_detail:184,drive_list:185,walk_list:186,index_async_widget:187,index_websql_widget:188},SDC.special_page={place_list_cater:240,place_list_hotel:241,place_list_hotelimg:242},PDC.DICT={index_index:10,place_list:11,place_detail:12,transit_list:13,transit_detail:14,drive_list:15,walk_list:16,transit_crosslist:17,transit_crossdetail:18,index_map:19,place_map:20,transit_map:21,drive_map:22},PDC.special_page={place_list_cater:23,place_list_hotel:24,place_list_hotelimg:25},l.exports={init:function(){SDC&&SDC.init({sample:1,product_id:16,max:5}),_("common:widget/monitor/pagelog.js").init()}}});
;define("common:widget/map/iwcontroller.js",function(i,n,o){"use strict";o.exports={_instances:{0:"PoiInfoWindow",1:"PoiInfoWindow",2:"TrsInfoWindow",3:"PoiInfoWindow",4:"TrsInfoWindow",5:"TrsInfoWindow",6:"TrsInfoWindow",7:"PoiInfoWindow",10:"TfcInfoWindow",11:"PoiInfoWindow",12:"AddrInfoWindow"},_infoWindows:{},_overlay:null,init:function(i){return this._map=i,this},get:function(i){if(!this._instances[i])return this._overlay;var n,o;this._infoWindows[i]?n=this._infoWindows[i]:(o=this[this._instances[i]],n=this._infoWindows[i]=o.init(i),n._type=i);for(var t=this._map.getOverlays(),s=0,e=t.length;e>s;s++)if(n===t[s])return this._setOverlay(n);return n instanceof BMap.Overlay&&this._map.addOverlay(n),this._setOverlay(n)},_setOverlay:function(i){return this._overlay&&this._overlay!==i&&this._overlay.hide(),this._overlay=i,this._overlay.show(),i}}});
;define("common:widget/map/preloader/CBounds.js",function(t,n,s){"use strict";function e(t,n){this._sw={lng:t.lng,lat:t.lat},this._ne={lng:n.lng,lat:n.lat},this._swLng=t.lng,this._swLat=t.lat,this._neLng=n.lng,this._neLat=n.lat}$.extend(e.prototype,{getCenter:function(){return{lng:(this._swLng+this._neLng)/2,lat:(this._swLat+this._neLat)/2}},toSpan:function(){return{lng:Math.abs(this._neLng-this._swLng),lat:Math.abs(this._neLat-this._swLat)}}}),s.exports=e});
;define("common:widget/backtop/backtop.js",function(o,n,i){"use strict";var c=$(".common-widget-back-top");$(window).on("scroll",function(){window.scrollY<window.innerHeight/2?c.hide():c.show()}),i.exports={init:function(){c=$(".common-widget-back-top"),c.on("click",function(){window.scrollTo(0,1)})}}});
;define("common:static/js/gmu/src/core/event.js",function(t){t("common:static/js/gmu/src/core/gmu.js"),function(t,n){function e(t,n,e){(t||"").split(c).forEach(function(t){e(t,n)})}function i(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function s(t){var n=(""+t).split(".");return{e:n[0],ns:n.slice(1).sort().join(" ")}}function r(t,n,e,r){var o,u;return u=s(n),u.ns&&(o=i(u.ns)),t.filter(function(t){return!(!t||u.e&&t.e!==u.e||u.ns&&!o.test(t.ns)||e&&t.cb!==e&&t.cb._cb!==e||r&&t.ctx!==r)})}function o(t,e){return this instanceof o?(e&&n.extend(this,e),this.type=t,this):new o(t,e)}var u=[].slice,c=/\s+/,f=function(){return!1},a=function(){return!0};o.prototype={isDefaultPrevented:f,isPropagationStopped:f,preventDefault:function(){this.isDefaultPrevented=a},stopPropagation:function(){this.isPropagationStopped=a}},t.event={on:function(t,n,i){var r,o=this;return n?(r=this._events||(this._events=[]),e(t,n,function(t,n){var e=s(t);e.cb=n,e.ctx=i,e.ctx2=i||o,e.id=r.length,r.push(e)}),this):this},one:function(t,n,i){var s=this;return n?(e(t,n,function(t,n){var e=function(){return s.off(t,e),n.apply(i||s,arguments)};e._cb=n,s.on(t,e,i)}),this):this},off:function(t,n,i){var s=this._events;return s?t||n||i?(e(t,n,function(t,n){r(s,t,n,i).forEach(function(t){delete s[t.id]})}),this):(this._events=[],this):this},trigger:function(t){var n,e,i,s,c,f=-1;if(!this._events||!t)return this;if("string"==typeof t&&(t=new o(t)),n=u.call(arguments,1),t.args=n,n.unshift(t),e=r(this._events,t.type))for(s=e.length;++f<s;)if((i=t.isPropagationStopped())||!1===(c=e[f]).cb.apply(c.ctx2,n)){i||(t.stopPropagation(),t.preventDefault());break}return this}},t.Event=o}(gmu,gmu.$)});
;define("common:static/js/localstorage.js",function(e,t,s){"use strict";var a=window.localStorage,r="<#lsvalid#>",c="</#lsvalid#>",o=new RegExp("^(<#lsvalid#>)(.*)(</#lsvalid#>)$"),d=function(){},i=d.prototype;i.deleteData=function(e,t){if(a){t=t||{};try{a.removeItem(e),t.success&&t.success()}catch(s){t.error&&t.error()}}},i.addData=function(e,t,s){if(a){s=s||{};try{a.setItem(e,r+JSON.stringify(t)+c),s.success&&s.success()}catch(o){s.error&&s.error(),n.addStat&&n.addStat(20155,{message:o.message,key:e,type:"ad"})}}},i.getData=function(e){if(a){var t=a.getItem(e);if(null===t)return null;var s=null;return(s=t.match(o))?t=s[2]:void 0}};var n=e("common:static/js/util.js");i.selectData=function(e,t){if(a){var s,r=a.getItem(e);if(t=t||{},null===r)return t.success&&t.success(r),void 0;var c=null;if(c=r.match(o)){r=c[2];try{s=JSON.parse(r),t.success&&t.success(s)}catch(d){t.error&&t.error(),n.addStat&&n.addStat(20155,{key:e,type:"sd",message:d.message})}}else t.error&&t.error(),n.addStat&&n.addStat(20155,{key:e,type:"sd",message:"data not valid"})}},s.exports=new d});
;define("common:widget/geolocation/html5geolocation.js",function(t,o,e){"use strict";var i=t("common:static/js/util.js"),n=t("common:widget/stat/metrics-stat.js"),a={param:{x:"",y:"",r:"",prod:"maponline"},getReqQuery:function(t,o,e){var i={x:t||"",y:o||"",r:e||""},n=[],a=this;return $.extend(a.param,i),$.each(a.param,function(t){n.push(t+"="+a.param[t])}),n.join("&")},request:function(t,o){var e={x:t[0],y:t[1],pois:"1"},i=location.origin+"/mobile/?qt=loc";$.ajax({url:i,data:e,dataType:"json",success:function(t){o&&o(t)}}),this._delay=window.setTimeout(function(){listener.trigger("common.geomethod","fail",{message:"html5 geolocation fail"})},15e3)}},c={getCurrentPosition:function(t,o,e){return navigator.geolocation.getCurrentPosition(t,o,e)},watchPosition:function(t,o,e){return navigator.geolocation.watchPosition(t,o,e)},clearWatch:function(t){navigator.geolocation.clearWatch(t)}},s={init:function(t){this._data=t||{},this._config={enableHighAccuracy:!0,maximumAge:6e4,timeout:this._data.par||3e4,accuracy:2e8},this._getCurrentPosition(c)},_getCurrentPosition:function(t){n.addStat("geo","html5_geo_all",1,!0),t.getCurrentPosition(this._onSuccess,this._onFailure,this._config)},_onSuccess:function(t){var o,e,i=s;o=t.coords,e=o.accuracy,e<i._config.accuracy&&0!==o.longitude&&0!==o.latitude?i._getPosSuccess(t,{success:i.onWlocSuccess}):listener.trigger("common.geomethod","fail",{}),n.addStat("geo","wlan_geo_radius",parseInt(e,10))},_onFailure:function(t){n.addStat("geo","html5_geo_fail",{error:t.code,messgae:t.message},!0),listener.trigger("common.geomethod","fail",t)},_isUserDeny:function(t){return t&&1===t.code?i.isIOS()&&"user denied geolocation"===t.message.toLowerCase()||i.isAndroid()?!0:!1:void 0},_getPosSuccess:function(t){if(t){var o=this,e=t.coords;if(e){var i=new Array;i.push(e.longitude),i.push(e.latitude),o._isFirstSetLoc=!0;var c=o._data.id;a.request(i,function(t){if(a._delay&&window.clearTimeout(a._delay),"object"==typeof t){var o={},i=t.result,s=t.result.addressComponent,r=t.result.cityCode;if(!i.location)return listener.trigger("common.geomethod","fail",{message:"has no point"}),void 0;o={addr:{city:s.city,cityCode:r,district:s.district,street:s.street,accuracy:e.accuracy},point:{x:i.location.lng,y:i.location.lat}},$.extend(o,{type:"html5",isExactPoi:i.location?!0:!1,isSaveLocInCookie:!0}),n.addStat("geo","html5_get_geo_suc",{id:c},!0),listener.trigger("common.geomethod","success",o)}})}}}};e.exports=s});
;define("common:widget/geolocation/nativegeolocation.js",function(i,t,o){"use strict";var e=i("common:widget/stat/metrics-stat.js"),a="http://127.0.0.1:6259/",c={lochost:"http://map.baidu.com",apnUrl:a+"getapn?callback=getApnCallback",apinfoUrl:a+"getlocstring?timeout=0&callback=getapinfo",locSdkUrl:a+"geolocation?timeout=12000&callback=getGeoByNative",init:function(i){this._isApnTimeout=!1,this._isNativeAvailable=!1,this._isNativeTimeout=!1,this._isLocsdkTimeout=!1,this._isApinfoTimeout=!1,this._isGeoSuc=!1,this._isApinfoSuc=!1,this._isLocsdkSuc=!1,this._isLocsdkFail=!0,this._isApinfoFail=!0,this.outofdate=!1,this._data=i||{},this.checkApn()},checkApn:function(){var i=this;$.ajax({url:i.apnUrl,dataType:"jsonp",success:function(t){i._isApnTimeout===!1&&t&&0===t.error&&(i._isNativeAvailable=!0,i.nativeGeo&&i.nativeGeo())}}),i.checkApnTimeout(2)},checkApnTimeout:function(i){var t=this;setTimeout(function(){t._isNativeAvailable===!1&&(t._isApnTimeout=!0,listener.trigger("common.geomethod","fail",{}))},1e3*i)},nativeGeo:function(){this.geobyApinfo(),this.geobyLocsdk(),e.addStat("geo","native_geo_all",1,!0)},nativeGeofailed:function(i){var t=this;"locsdk"===i?t._isLocsdkFail=!0:"apinfo"===i&&(t._isApinfoFail=!0),t._isLocsdkFail&&t._isApinfoFail&&!t.outofdate&&(t.outofdate=!0,listener.trigger("common.geomethod","fail",{}),e.addStat("geo","native_geo_fail",1,!0))},geobyApinfo:function(){var i=this;$.ajax({url:i.apinfoUrl,dataType:"jsonp",success:function(t){0===t.error&&i._isApinfoTimeout===!1?i.getLocation(t):(e.addStat("geo","native_geo_apinfo_fail",{id:t.error},!0),i.nativeGeofailed("apinfo")),e.addStat("geo","native_get_geo_suc",{id:"apinfo"},!0)}}),i.checkApinfoTimeout(12)},geobyLocsdk:function(){var i=this;$.ajax({url:i.locSdkUrl,dataType:"jsonp",success:function(t){0===t.error&&i._isLocsdkTimeout===!1?i.getDetailLoc(t):i.nativeGeofailed("locsdk"),e.addStat("geo","native_get_geo_suc",{id:"locsdk"},!0)}}),i.checkLocsdkTimeout(12)},checkLocsdkTimeout:function(i){var t=this;setTimeout(function(){t._isLocsdkSuc!==!1&&t._isGeoSuc||(t._isLocsdkTimeout=!0,t.nativeGeofailed("locsdk"))},1e3*i)},checkApinfoTimeout:function(i){var t=this;setTimeout(function(){t._isApinfoSuc!==!1&&t._isGeoSuc||(t._isApinfoTimeout=!0,t.nativeGeofailed("apinfo"))},1e3*i)},getLocbyUrl:function(i){var t=this,o=t._data.id;$.ajax({url:i,dataType:"jsonp",success:function(i){var a,c=i&&i.content,s=c&&c.address_detail,n=c&&c.point;if(!t.outofdate){if(0!==i.error||""===c.address)return"apinfo"===i.reqtype||"locsdk"===i.reqtype?t.nativeGeofailed(i.reqtype):(t.outofdate=!0,listener.trigger("common.geomethod","fail",{})),void 0;0===i.error&&"apinfo"===i.reqtype&&e.addStat("geo","url_geo_apinfo_suc_back",1,!0),t._isGeoSuc||(t._isGeoSuc=!0,a={addr:{address:c.address||null,city:s.city||null,cityCode:s.city_code||1,district:s.district||null,street:s.street||null,accuracy:s.accuracy},point:{x:n.x||null,y:n.y||null},isGeoSuc:!0,isExactPoi:!0,type:"native",isUserDeny:!1,isSaveLocInCookie:!0},listener.trigger("common.geomethod","success",a),e.addStat("geo","native_geo_getinfo_suc",{type:i.reqtype,id:o},!0))}}})},getLocation:function(i){var t=this,o=i.locstring.split("&"),e=o[0]+"|"+o[1],a=t.lochost+"/mobile/?qt=geo&apinfo="+e+"&type=apinfo&callback=";t._isApinfoSuc=!0,t.getLocbyUrl(a)},getDetailLoc:function(i){var t=this,o=t.getRgcUrl(i);t._isLocsdkSuc=!0,t.getLocbyUrl(o)},getRgcUrl:function(i){var t,o=i.coords.longitude,e=i.coords.latitude,a=i.coords.accuracy,c=this;return t=o&&e?c.lochost+"/mobile/?qt=geo&x="+o+"&y="+e+"&radius="+a+"&type=locsdk&callback=":""}};o.exports=c});
;define("common:widget/geolocation/sharegeolocation.js",function(t,e,i){"use strict";var r=t("common:widget/geolocation/myposition.js"),o=t("common:static/js/localstorage.js"),a=t("common:widget/stat/metrics-stat.js");i.exports={_MINUTES:5,init:function(t){t=t||{},this._MINUTES=parseInt(t.par)||this._MINUTES,this._data=t,this._startGeo()},_startGeo:function(){if("number"==typeof this._MINUTES){var t=r.get("baiduLoc")||r.get("native")||r.get("web");null!=t?this._setCookieLoc(t):this._geoFailHandler()}else this._geoFailHandler()},_isInMinutes:function(t){if(!t)return!1;var e=parseInt(Date.now()),i=e-6e4*this._MINUTES;return t>i?!0:!1},_formatLoc:function(t){var e=t&&t.crd;if(e)return{addr:{address:t.addr,city:t.city,district:t.district,street:t.street,cityCode:t&&t.cc,accuracy:e&&e.r},point:{x:e&&e.x,y:e&&e.y},t:t&&t.t,isUserInput:t&&"ui"===t.tp?!0:!1,type:"share",isExactPoi:!0,isGeoSuc:!0,minutes:this._MINUTES}},_setCookieLoc:function(t){var e=this,i=e._isInMinutes(t.t);t&&t.crd&&i?t.addr?e._addStatAndTriggerEvent(t):e._checkLocFromStorage(t.crd)?e._getLocFromStorage(t):e._getRgcLoc(t):e._geoFailHandler()},_getRgcLoc:function(t){var e=this;if(t.crd.x&&t.crd.y){var i="http://api.map.baidu.com/?qt=rgc_standard&x="+t.crd.x+"&y="+t.crd.y+"&dis_poi="+t.crd.r+"&poi_num=10&ie=utf-8&oue=1&res=api&callback=";$.ajax({url:i,dataType:"jsonp",success:function(i){var r=i.content.address,a=i.content.address_detail;$.extend(t,{addr:r,city:a.city,district:a.district,street:a.street}),o.addData("webapp-location-cookie",t),e._addStatAndTriggerEvent(t)}})}},_checkLocFromStorage:function(t){var e,i;if(void 0===t)return!1;try{if(e=o.getData("webapp-location-cookie"),!e)return!1;i=JSON.parse(e)}catch(r){return!1}return parseInt(i.x)===parseInt(t.x)&&parseInt(i.y)===parseInt(t.y)?(this._locAddress=i,!0):!1},_getLocFromStorage:function(t){var e=this._locAddress;$.extend(t,{addr:e.address?e.address:e.city+e.district+e.street,city:e.city,district:e.district,street:e.street}),this._addStatAndTriggerEvent(t)},_addStatAndTriggerEvent:function(t){var e=this._formatLoc(t);a.addStat("geo","share_geo_suc",1,!0),listener.trigger("common.geomethod","success",e)},_geoFailHandler:function(){return this._MINUTES<=5?(listener.trigger("common.geomethod","fail",{}),void 0):this._MINUTES>=30?(listener.trigger("common.geomethod","fail",this._data),void 0):void 0}}});
;define("common:widget/geolocation/urlgeolocation.js",function(t,e,o){"use strict";var i=t("common:widget/stat/metrics-stat.js");o.exports={lochost:"http://map.baidu.com",init:function(){this._startGeo()},_startGeo:function(){var t=this,e=t.getContainLoc();e?t.getDetailLoc(e):listener.trigger("common.geomethod","fail",{})},getDetailLoc:function(t){var e=this,o=t||[],r=e.lochost+"/mobile/?qt=geo&x="+o[0]+"&y="+o[1]+"&type=url&callback=";return o[0]&&o[1]?(i.addStat("geo","url_geo_startget"),$.ajax({url:r,dataType:"jsonp",success:function(t){var e,o=t&&t.content,i=o&&o.address_detail,r=o&&o.point;return 0!==t.error||""===o.address?(listener.trigger("common.geomethod","fail",{}),void 0):(e={addr:{address:o.address||null,city:i.city||null,cityCode:i.city_code||1,district:i.district||null,street:i.street||null},point:{x:r.x||null,y:r.y||null},isGeoSuc:!0,isExactPoi:!0,type:"url",isSaveLocInCookie:!0,isUserDeny:!1},listener.trigger("common.geomethod","success",e),void 0)},error:function(){listener.trigger("common.geomethod","fail",{})}}),void 0):(listener.trigger("common.geomethod","fail",{}),void 0)},getContainLoc:function(){var t=decodeURI(window.location.href),e=t.indexOf("locMC="),o="",i="",r=[];return 0>e?void 0:(e+=6,o=t.substr(e,t.length),i=o.indexOf("|"),i>0?(r=[],r[0]=o.substr(0,i),r[1]=o.substr(i+1,o.length),r):void 0)}}});
;define("common:static/js/gmu/src/core/widget.js",function(t){t("common:static/js/gmu/src/core/gmu.js"),t("common:static/js/gmu/src/core/event.js"),t("common:static/js/gmu/src/extend/parseTpl.js"),function(t,n,e){function r(t){return"[object Object]"===h.call(t)}function i(t,n){t&&Object.keys(t).forEach(function(e){n(e,t[e])})}function o(t){try{t="true"===t?!0:"false"===t?!1:"null"===t?null:+t+""===t?+t:/(?:\{[\s\S]*\}|\[[\s\S]*\])$/.test(t)?JSON.parse(t):t}catch(n){t=e}return t}function s(t){for(var n,r,i={},s=t&&t.attributes,u=s&&s.length;u--;)r=s[u],n=r.name,"data-"===n.substring(0,5)&&(n=n.substring(5),r=o(r.value),r===e||(i[n]=r));return i}function u(i){var o=i.substring(0,1).toLowerCase()+i.substring(1),s=n.fn[o];n.fn[o]=function(o){var s,u,a=g.call(arguments,1),c="string"==typeof o&&o;return n.each(this,function(l,f){if(u=y(f,i)||new t[i](f,r(o)?o:e),"this"===c)return s=u,!1;if(c){if(!n.isFunction(u[c]))throw new Error(""+c);if(s=u[c].apply(u,a),s!==e&&s!==u)return!1;s=e}}),s!==e?s:this},n.fn[o].noConflict=function(){return n.fn[o]=s,this}}function a(t,e){var r=this;t.superClass&&a.call(r,t.superClass,e),i(y(t,"options"),function(t,i){i.forEach(function(i){var o=i[0],s=i[1];("*"===o||n.isFunction(o)&&o.call(r,e[t])||o===e[t])&&s.call(r)})})}function c(t,r){var o=this;t.superClass&&c.call(o,t.superClass,r),i(y(t,"plugins"),function(t,s){r[t]!==!1&&(i(s,function(t,r){var i;o[t]=n.isFunction(r)&&(i=o[t])?function(){var t,n=o.origin;return o.origin=i,t=r.apply(o,arguments),n===e?delete o.origin:o.origin=n,t}:r}),s._init.call(o))})}function l(){for(var t,e=g.call(arguments),i=e.length;i--;)t=t||e[i],r(e[i])||e.splice(i,1);return e.length?n.extend.apply(null,[!0,{}].concat(e)):t}function f(t,i,o,u,f){var p,g=this;return r(u)&&(f=u,u=e),f&&f.el&&(u=n(f.el)),u&&(g.$el=n(u),u=g.$el[0]),p=g._options=l(i.options,s(u),f),g.template=l(i.template,p.template),g.tpl2html=l(i.tpl2html,p.tpl2html),g.widgetName=t.toLowerCase(),g.eventNs="."+g.widgetName+o,g._init(p),g._options.setup=g.$el&&g.$el.parent()[0]?!0:!1,a.call(g,i,p),c.call(g,i,p),g._create(),g.trigger("ready"),u&&y(u,t,g)&&g.on("destroy",function(){y(u,t,null)}),g}function p(r,o,s){function u(t,n){if("Base"===r)throw new Error("Base");return this instanceof u?f.call(this,r,u,a++,t,n):new u(t,n)}"function"!=typeof s&&(s=t.Base);var a=1,c=1;return n.extend(u,{register:function(t,n){var e=y(u,"plugins")||y(u,"plugins",{});return n._init=n._init||m,e[t]=n,u},option:function(t,n,e){var r=y(u,"options")||y(u,"options",{});return r[t]||(r[t]=[]),r[t].push([n,e]),u},inherits:function(t){return p(r+"Sub"+c++,t,u)},extend:function(t){var n=u.prototype,r=s.prototype;v.forEach(function(n){t[n]=l(s[n],t[n]),t[n]&&(u[n]=t[n]),delete t[n]}),i(t,function(t,i){n[t]="function"==typeof i&&r[t]?function(){var n,o=this.$super;return this.$super=function(){var n=g.call(arguments,1);return r[t].apply(this,n)},n=i.apply(this,arguments),o===e?delete this.$super:this.$super=o,n}:i})}}),u.superClass=s,u.prototype=Object.create(s.prototype),u.extend(o),u}var g=[].slice,h=Object.prototype.toString,m=function(){},v=["options","template","tpl2html"],y=function(){var t={},n=0,r="_gid";return function(i,o,s){var u=i[r]||(i[r]=++n),a=t[u]||(t[u]={});return s!==e&&(a[o]=s),null===s&&delete a[o],a[o]}}(),d=t.event;t.define=function(n,e,r){t[n]=p(n,e,r),u(n)},t.isWidget=function(n,e){return e="string"==typeof e?t[e]||m:e,e=e||t.Base,n instanceof e},t.Base=p("Base",{_init:m,_create:m,getEl:function(){return this.$el},on:d.on,one:d.one,off:d.off,trigger:function(e){var r="string"==typeof e?new t.Event(e):e,i=[r].concat(g.call(arguments,1)),o=this._options[r.type],s=this.getEl();return o&&n.isFunction(o)&&!1===o.apply(this,i)&&(r.stopPropagation(),r.preventDefault()),d.trigger.apply(this,i),s&&s.triggerHandler(r,(i.shift(),i)),this},tpl2html:function(t,e){var r=this.template;return r="string"==typeof t?r[t]:(e=t,r),e||~r.indexOf("<%")?n.parseTpl(r,e):r},destroy:function(){this.$el&&this.$el.off(this.eventNs),this.trigger("destroy"),this.off(),this.destroyed=!0}},Object),n.ui=t}(gmu,gmu.$)});
;define("common:widget/url/url.js",function(e,t,a){"use strict";var r=e("common:static/js/util.js"),i="_lastPageUrl";a.exports={host:"http://"+location.host,appPathReg:/^\/mobile\/webapp\//i,update:function(e,t){var a,r=t||{},i=this._get(e,r),o=this._getCurrentUrl();i.replace(this.appPathReg,"")!==o.replace(this.appPathReg,"")&&(a=this.host+i,this.navigate(a,t))},navigate:function(e,t){if("string"==typeof e){var a="/"+this._getCurrentUrl(),r=t||{};if(r.trigger=r.trigger!==!1,r.replace===!0&&r.storageKey!==!1){try{window.localStorage.setItem(i,a)}catch(o){}appPage.redirect(e,r)}else appPage.redirect(e,r)}},get:function(e){e=e||{};var t=e.path||this._getCurrentUrl(),a=e.disableEncode||!1,i=t.replace(/^\//,""),o=i.split("/"),n=o[0],p=o[1],s=o[2],l=o[3],c=o[4],u=o[5]||"";if(!a){var d={seachbox:function(e){var t={place:function(e){var t=u.split("from=place&"+e+"=");u="from=place&"+e+"="+encodeURIComponent(t[1])},loc:function(e){var t=u.split(e+"=");u=e+"="+encodeURIComponent(t[1])}};e&&t[e[1]](e[0])}};if(!/%3d|%26/gi.test(u)&&u.indexOf("=")>-1){var g={DictionaryName:"seachbox",DictionaryData:""},f=!/^(from=place&start=word%3d|from=place&end=word%3d)/gi.test(u),h=!/^(start=word%3d|end=word%3d)/gi.test(u);if(f||h){if(-1!==u.indexOf("start")){var y=/^start=word=/gi.test(u);!y&&f&&(g.DictionaryData=["start","place"]),y&&h&&(g.DictionaryData=["start","loc"])}else if(-1!==u.indexOf("end")){var m=/^end=word=/gi.test(u);!m&&f&&(g.DictionaryData=["end","place"]),m&&h&&(g.DictionaryData=["end","loc"])}d[g.DictionaryName](g.DictionaryData)}}}return{product:n,style:p,module:s,action:l,query:r.urlToJSON(c||""),pageState:r.urlToJSON(u||"")}},_getCurrentUrl:function(){return appPage.getFragment().replace(/^\//,"")},toIndex:function(e){var t=$.extend({queryReplace:!0,pageStateReplace:!0},e);this.update({module:"index",action:"index"},t)},_get:function(e,t){var a=this._getCurrentUrl(),i=a.split("/"),o=i[0]||"mobile",n=i[1]||"webapp",p=i[2]||"index",s=i[3]||"index",l=i[4]||"foo=bar",c=i[5]||"",u=t&&t.queryReplace||!1,d=t&&t.pageStateReplace||!1,g=[];if(g.push(e.product||o),g.push(e.style||n),g.push(e.module||p),g.push(e.action||s),u)e.query&&g.push(r.jsonToUrl(e.query));else{var f=r.urlToJSON(l);e.query=e.query||{};for(var h in e.query)""!==e.query[h]?f[h]=e.query[h]:delete f[h];g.push(r.jsonToUrl(f))}if(d)e.pageState&&g.push(r.jsonToUrl(e.pageState));else{e.pageState=e.pageState||{};var y=r.urlToJSON(c);for(var m in e.pageState)""!==e.pageState[m]?y[m]=e.pageState[m]:delete y[m];g.push(r.jsonToUrl(y))}return"/"+g.join("/")}}});
;define("common:widget/map/preloader/tileloader.js",function(t,e,i){"use strict";var n=t("common:widget/map/preloader/CBounds.js"),a={Config:{rasterURLs:{host:["http://online1.map.bdimg.com/it/","http://online2.map.bdimg.com/it/","http://online3.map.bdimg.com/it/","http://online4.map.bdimg.com/it/"],pd:{params:{fm:42,f:"webapp",format_add:".jpg"}},hd:{params:{format:"jpeg",fm:41,quality:70,f:"webapp",format_add:".jpg"}}},vectorURLs:["http://online1.map.bdimg.com/gvd/?","http://online2.map.bdimg.com/gvd/?","http://online3.map.bdimg.com/gvd/?","http://online4.map.bdimg.com/gvd/?"],vctMetaKey:"vct_meta",vctMeta:null,vctMaxNum:100,vctDelNum:25},mapOptions:{},init:function(t){this.mapOptions=t||{}},loadTiles:function(t,e,i){var n=i||{},a=this.getMapSize(),o=this.mapOptions,r=n.mapWidth||a.width,s=n.mapHeight||a.height,c=n.drawType||o.drawType,g=o.vectorMapLevel||3,l=this.getCurViewTiles(t,e,r,s);"vector"===c&&e>=g?(this.initVectorEnvOnce(),this.loadVectorTiles(l)):this.loadRasterTiles(l)},getCurViewTiles:function(t,e,i,n){var a=this.getTileSize(),o=this.getZoomUnits(e),r=o*a,s=Math.ceil(t.lng/r),c=Math.ceil(t.lat/r),g=[s,c,(t.lng-s*r)/r*a,(t.lat-c*r)/r*a],l=g[0]-Math.ceil((i/2-g[2])/a),h=g[1]-Math.ceil((n/2-g[3])/a),m=g[0]+Math.ceil((i/2+g[2])/a),p=g[1]+Math.ceil((n/2+g[3])/a);return[l,h,m,p,e]},initVectorEnvOnce:function(){if(!this._initVectorEnv){this._initVectorEnv=!0;var t=localStorage,e=this.Config.vctMetaKey;if(!t.getItem(e)){var i=this.getVectorVersionInfo(!0),n='{"v":"'+i+'","vcts":[]}';try{t.setItem(e,n)}catch(a){}}var o=this.Config.vctMeta=JSON.parse(t.getItem(e));if(o){var i=o.v,r=o.vcts,s=this.getVectorVersionInfo(!0);if(i!==s){try{for(var c=0,g=r.length;g>c;c++)t.removeItem(r[c])}catch(a){}o.v=s,r.length=0}var l=this.Config.vctMaxNum,h=this.Config.vctDelNum;if(r.length>=l){var m=r.splice(0,h);try{for(var c=0,g=m.length;g>c;c++)t.removeItem(m[c])}catch(a){}}try{t.setItem(e,JSON.stringify(o))}catch(a){}}}},loadVectorTiles:function(t){for(var e=t[0],i=t[1],n=t[2],a=t[3],o=t[4],r=e;n>r;r++)for(var s=i;a>s;s++)this.loadVectorData(r,s,o)},loadVectorData:function(t,e,i){for(var n=this,a=n.Config.vectorURLs,o=n.getVectorVersionInfo(),r=o.ver,s=o.udt,c=Math.abs(t+e)%a.length,g=a[c],l="_"+(0>t?"_":"")+(0>e?"$":""),h=l+parseInt(Math.abs(t)+""+Math.abs(e)+i).toString(36),m="vct"+h,p=localStorage,d=0,v=p.length;v>d;d++){var f=p.key(d);if(f===m)return}g+="qt=lgvd&layers=bg,df&x="+t+"&y="+e+"&z="+i+"&styles=pl&f=mwebapp&v="+r+"&udt="+s+"&fn=window."+h,window[h]=function(t){var e=t.content;if(e){var i=e.bg||[],a=e.df||[],o=i.concat(a),r=JSON.stringify(o);try{var s=n.Config.vctMeta,c=n.Config.vctMetaKey;s&&s.vcts.length<n.Config.vctMaxNum&&(s.vcts.push(m),localStorage.setItem(c,JSON.stringify(s)),localStorage.setItem(m,r))}catch(g){}}delete window[h]},n.request(g)},getVectorVersionInfo:function(t){var e="undefined"!=typeof TVC?TVC.api_for_mobile.vector:{},i=e.version?e.version:"001",n=e.updateDate?e.updateDate:"20130501";return t===!0?parseInt(n+i).toString(36):{ver:i,udt:n}},request:function(t){var e=document.createElement("script");e.src=t,e.addEventListener&&e.addEventListener("load",function(t){var e=t.target;e.parentNode.removeChild(e)},!1),document.getElementsByTagName("head")[0].appendChild(e),e=null},loadRasterTiles:function(t){var e=t[0],i=t[1],n=t[2],a=t[3],o=t[4],r=this.Config.rasterURLs,s="",c={},g={};this.mapOptions.enableHighResolution?"undefined"!=typeof TVC&&(g=TVC.webapp.high_normal,c=r.hd):"undefined"!=typeof TVC&&(g=TVC.webapp.lower_normal,c=r.pd);for(var l in c.params)s+="&"+l+"="+c.params[l];for(var h=r.host,m=g.version?g.version:"014",p=g.updateDate?"&udt="+g.updateDate:"",d=e;n>d;d++)for(var v=i;a>v;v++){var f=(d+v)%h.length,u=h[f];u+="u=x="+d+";y="+v+";z="+o+";v="+m+";type=web"+p+s;var w=new Image;w.src=u.replace(/-(\d+)/gi,"M$1")}},getViewport:function(t,e){if(t&&0!==t.length){e=e||{};var i=t.slice(0),a=new n(i[0],i[1]),o=a.getCenter(),r=this.getBestLevel(a,e);if(e.margins){var s=e.margins,c=(s[1]-s[3])/2,g=(s[0]-s[2])/2,l=this.getZoomUnits(r);o.lng=o.lng+l*c,o.lat=o.lat+l*g}return{center:o,zoom:r}}},getTileSize:function(){return this.Config.tileSize=256,this.mapOptions.enableHighResolution&&(this.Config.tileSize=128),this.Config.tileSize},getZoomUnits:function(t){var e=1;this.mapOptions.enableHighResolution&&(e=2);var i=Math.pow(2,18-t)*e;return i},getMapSize:function(){var t=window._APP_HASH||{},e=t.module,i=t.action,n=window.innerHeight,a=window.innerWidth,o=$(".index-widget-searchbox").height()||58,r=$(".index-widget-tabgroup").height()||50,s=$(".common-widget-nav").height()||51;return"index"===e&&"index"===i?n=n-r-o:n-=s,{width:a,height:n}},getBestLevel:function(t,e){for(var i=e.margins||[10,10,10,10],n=e.zoomFactor||0,a=i[1]+i[3],o=i[0]+i[2],r=this.mapOptions.minZoom,s=this.mapOptions.maxZoom,c=this.getMapSize(),g=s;g>=r;g--){var l=this.getZoomUnits(g);if(t.toSpan().lng/l<c.width-a&&t.toSpan().lat/l<c.height-o)break}return g+=n,r>g&&(g=r),g>s&&(g=s),g}};i.exports=a});
;define("common:widget/monitor/maplog.js",function(e,t,n){"use strict";function r(){$(window).on("pageshow",function(e){e&&e.persisted&&(Z=!0)}),$(window).on("pagehide",function(){z=!0}),listener.on("common.page","switchstart",function(){H=!0})}function a(){return!Z&&!z&&!H}function o(e){if(e>0){e=10*(e||1);for(var t=0,n=j.get("BAIDUID")||"",r=0,a=n.length;a>r;r++)t+=n.charCodeAt(r);var o=e>t%10&&0!=t?!0:!1;return o}return!1}function i(){var e=window._APP_HASH||{},t=e.module,n=e.action,r=("MAP_"+t+"_"+n).toUpperCase();return SDC.DICT[r]?SDC.createApp(SDC.DICT[r]):SDC.createApp(SDC.DICT.MAP_OTHER_PAGE)}function c(){var e,t=b.getZoom();e=4>=t?1:t>=12?t:5;var n="map_level_"+e,r=SDC.createApp(SDC.DICT[n]);return r}function v(){R.mark("c_map_load"),b.removeEventListener("load",v)}function m(){L=Date.now()}function _(){T=Date.now()}function s(){S=Date.now();try{if(!h){R.mark("c_vct_fst");var e=b.getCenter(),t=b.getZoom();h={time:Date.now(),lng:e.lng,lat:e.lat,zoom:t,type:"vector"}}}catch(n){}}function d(){y=Date.now();try{if(!h){R.mark("c_rst_fst");var e=b.getCenter(),t=b.getZoom();h={time:Date.now(),lng:e.lng,lat:e.lat,zoom:t,type:"raster"}}}catch(n){}}function l(){var t=b.getCenter(),n=b.getZoom(),r=0;if(h&&(h.lng!==t.lng||h.lat!==t.lat||h.zoom!==n)){var a=e("common:widget/map/map.js");if(a&&a.getMapOptions){var o=a.getMapOptions();"vector"===o.drawType&&(r=S-h.time)}}return r}function f(e){if(b.removeEventListener("onvectorbegin",s),b.removeEventListener("ontilesbegin",d),b.removeEventListener("onvectorloaded",f),b.removeEventListener("ontilesloaded",g),S&&a()){var t=Date.now(),n=e.drawingTime,r=t-n;R.mark("c_vector_begin",S),R.mark("c_vct_dst",r),R.mark("c_vector_load"),R.view_time(),R.ready();var o=c();o&&(o.start_event(I),o.mark("c_vct_st",S),o.mark("c_vct_dst",r),o.view_time(),o.ready());var v=i();v.start_event(I),v.mark("c_vct_st",S),v.mark("c_vct_lt_"+O),v.view_time(),v.ready();var m=SDC.createApp(SDC.DICT.MAP_VCT);m.start_event(I),m.mark("c_vct_st",S),m.mark("c_vct_dst",r),m.view_time(),m.ready();try{var _=l();if(_){var p=SDC.createApp(SDC.DICT.MAP_WAIT_LOC);p.start_event(I),p.mark("c_vct_fst",h.time),p.mark("c_vct_st",S),p.mark("c_vct_dst",r),p.view_time(),p.ready()}}catch(D){}listener.trigger("common.perf","log",{type:"maplog",app:R})}b.temp._firstScreenVectorStat="finished"}function g(){if(b.removeEventListener("onvectorbegin",s),b.removeEventListener("ontilesbegin",d),b.removeEventListener("onvectorloaded",f),b.removeEventListener("ontilesloaded",g),y&&a()){R.mark("c_tiles_begin",y),R.mark("c_tiles_load"),R.view_time(),R.ready(1);var e=c();e&&(e.start_event(I),e.mark("c_rst_st",y),e.view_time(),e.ready(1));var t=i();t.start_event(I),t.mark("c_rst_st",y),t.mark("c_rst_lt_"+O),t.view_time(),t.ready(1);var n=SDC.createApp(SDC.DICT.MAP_TIL);n.start_event(I),n.mark("c_rst_st",y),n.view_time(),n.ready(1),listener.trigger("common.perf","log",{type:"maplog",app:R})}}function p(e){C(e)}function D(e){C(e)}function C(e){if((L||T)&&G){var t=L?SDC.DICT.MAP_DRAG:SDC.DICT.MAP_GESTURE,n=L||T,r=e&&"onvectorloaded"===e.type?"c_vct_lt":"c_rst_lt",a=SDC.createInstance(t);if(a.start_event(n),a.mark(r),e&&e.drawingTime){var o=Date.now(),i=e.drawingTime,c=o-i;a.mark("c_vct_dst",c)}a.view_time(),a.ready(1),T=null,L=null}}function u(){P=Date.now()}function w(){if(P&&a()){var e=SDC.createApp(SDC.DICT.TRAFFIC_LAD);e.start_event(P),e.view_time(),e.ready(1)}b.removeEventListener("onTrafficvectorbegin",u),b.removeEventListener("onTrafficvectorloaded",w)}function k(){I=Date.now(),R.start_event()}function A(e,t){var n=t&&t.isCache?"c_js_lt_ic":"c_js_lt_nc";R.mark("c_js_load"),R.mark(n)}function E(e,t){b=t,b.addEventListener("load",v),b.addEventListener("onvectorbegin",s),b.addEventListener("ontilesbegin",d),b.addEventListener("onvectorloaded",f),b.addEventListener("onvectorloaded",p),b.addEventListener("ontilesloaded",g),b.addEventListener("ontilesloaded",D),b.addEventListener("onTrafficvectorbegin",u),b.addEventListener("onTrafficvectorloaded",w),b.addEventListener("ondragend",m),b.addEventListener("ongestureend",_)}var L,T,S,y,I,P,b,h,M=e("common:widget/pagemgr/pagemgr.js"),j=e("common:widget/cookie/cookie.js"),G=o(.1),O=M.isLandingPage()?"ild":"uld",R=SDC.createApp(SDC.DICT.MAP_AVG),Z=!1,z=!1,H=!1;n.exports={init:function(){r(),listener.once("common.map","start",k),listener.once("common.map","jsloaded",A),listener.once("common.map","init",E)}}});
;define("common:widget/geolocation/geolocation.js",function(t,o,e){"use strict";t("common:static/js/gmu/src/core/widget.js");var i=t("common:widget/geolocation/html5geolocation.js"),a=t("common:widget/geolocation/nativegeolocation.js"),s=t("common:widget/geolocation/sharegeolocation.js"),n=t("common:widget/geolocation/preciseipgeolocation.js"),c=t("common:widget/geolocation/urlgeolocation.js"),r=t("common:widget/geolocation/myposition.js"),m=t("common:widget/stat/metrics-stat.js"),g=t("common:static/js/util.js"),_=t("common:static/js/localstorage.js");e.exports={_IS_LAST_GEO_FAIL:!1,_GEO_METHOD_INDEX:0,_GEO_ARRAY:[],init:function(){this._bindEvent(),this.startGeo({isInitGeo:!0})},_bindEvent:function(){var t=this;t._hasBindEvent!==!0&&(t._hasBindEvent=!0,listener.on("common.html5Geolocation","start",function(t,o){i.init(o)}),listener.on("common.nativeGeolocation","start",function(t,o){a.init(o)}),listener.on("common.shareGeo","start",function(t,o){setTimeout(function(){s.init(o)},0)}),listener.on("common.preciseipGeo","start",function(t,o){setTimeout(function(){n.init(o)},0)}),listener.on("common.urlgeolocation","start",function(t,o){setTimeout(function(){c.init(o)},0)}),listener.on("common.geolocation","success",function(o,e){t._geoSuccess(e)}),listener.on("common.geolocation","mylocsuc",function(o,e){t._addStatGeoSuc(e)}),listener.on("common.geolocation","fail",function(o,e){t._geoFail(e)}),listener.on("common.geomethod","fail",function(o,e){t._geoMethodFail(e)}),listener.on("common.geomethod","success",function(o,e){t._geoMethodSuccess(e)}))},startGeo:function(t){var o=t||{};this._IS_LAST_GEO_FAIL=!1,this._time=Date.now(),this._isInitGeo=o.isInitGeo||!1,this.sucCallback=o.success||function(){},m.start("geo",{expire:50}),m.addStat("geo","start_geo_loc"),o.isInitGeo===!0?this._checkStorageGeoStatus()&&this._checkStorageMyLocStatus()||this._startGeo({isInitGeo:!0}):this._startGeo()},_startGeo:function(){this._initGeoData(),this._GEO_METHOD_INDEX=0,this._useNextMethod()},_checkStorageGeoStatus:function(){if(window._INIT_LOC_SUC===!0){var o=t("common:widget/geolocation/location.js");return setTimeout(function(){listener.trigger("common.geolocation","success",o._location)},0),!0}return!1},_checkStorageMyLocStatus:function(){if(window._INIT_MYLOC_SUC===!0){var o=t("common:widget/geolocation/location.js");return setTimeout(function(){listener.trigger("common.geolocation","mylocsuc",o._mylocation)},0),!0}return!1},_formatToCookie:function(t){var o=t.addr||{},e=t.point||{},i=(new Date).getTime()+"",a=[];return o.accuracy=o.accuracy||1e3,o.cityCode=o.cityCode||1,e.x&&e.y&&o.cityCode?(a.push(parseInt(e.x)),a.push(parseInt(e.y)),a.push(o.accuracy),a.push(o.cityCode),a.push(i),a):void 0},_saveAddressInStorage:function(t){var o=t.addr||{},e=t.point||{},i={address:o.address,city:o.city,district:o.district,street:o.street,x:parseInt(e.x),y:parseInt(e.y)};_.addData("webapp-location-cookie",i)},_geoSuccess:function(t){var o,e=this,i=t.type,a=t.isExactPoi,s=t.isSaveLocInCookie;if(a&&"share"!==i&&"storage"!==i){if(s===!1)return;o=this._formatToCookie(t),this._saveAddressInStorage(t),r.save(o)}a===!0&&(e._IS_LAST_GEO_FAIL=!1),e.sucCallback&&e.sucCallback(t),e.sucCallback=null},_geoFail:function(t){var o=this;o._IS_LAST_GEO_FAIL=!0,o._addStatGeoFail(t),o.sucCallback&&(o.sucCallback=null)},_getStatTime:function(){var t=Date.now();return t=Math.ceil((t-this._time)/1e3)},_addStatGeoSuc:function(t){var o,e=this;switch(o=e._getStatTime(),t.isExactPoi&&m.addStat("geo","geo_suc_all"),t.type){case"share":var i=t.minutes&&parseInt(t.minutes);5===i&&m.addStat("geo","share_geo_five_suc",{time:o}),30===i&&m.addStat("geo","share_geo_thirty_suc",{time:o});break;case"native":m.addStat("geo","native_geo_suc",{time:o});break;case"html5":m.addStat("geo","wlan_geo_success",{time:o});break;case"preciseip":m.addStat("geo","preciseip_geo_sucess",{time:o});break;case"url":m.addStat("geo","url_geo_sucess",{time:o});break;case"storage":t.isExactPoi&&m.addStat("geo","storage_geo_success",{time:o})}m.addStat("geo","geo_suc_end"),m.submit("geo")},_addStatGeoFail:function(t){m.addStat("geo","wlan_geo_error",{error:t.code,messgae:t.message}),m.submit("geo")},_geoMethodSuccess:function(o){var e=t("common:widget/geolocation/location.js");e.setAddress(o,this._isInitGeo),this._geoindex=0},_geoMethodFail:function(t){var o=this;o._useNextMethod(t)},_initGeoData:function(){var t={geostr:"common.nativeGeolocation",type:"start",param:{id:"first"}},o={geostr:"common.nativeGeolocation",type:"start",param:{id:"second"}},e={geostr:"common.shareGeo",type:"start",param:{par:5,id:"5min"}},i={geostr:"common.shareGeo",type:"start",param:{par:30,id:"30min"}},a={geostr:"common.preciseipGeo",type:"start",param:{}},s={geostr:"common.html5Geolocation",type:"start",param:{id:"first",par:3e4}},n={geostr:"common.html5Geolocation",type:"start",param:{id:"second",par:3e4}},c={geostr:"common.urlgeolocation",type:"start",param:{}};this._GEO_ARRAY=g.isAndroid()===!0?[c,e,t,a,s,o,i,n]:[c,e,s,a,i,n]},_useNextMethod:function(t){var o=this._GEO_ARRAY[this._GEO_METHOD_INDEX];o?(o.geostr=o.geostr||"",o.param=o.param||{},o.type=o.type||"",this._GEO_METHOD_INDEX++,listener.trigger(o.geostr,o.type,o.param)):listener.trigger("common.geolocation","fail",t)}}});
;define("common:widget/geolocation/location.js",function(t,i,o){"use strict";var e=t("common:widget/cookie/cookie.js"),n=t("common:widget/geolocation/geolocation.js");o.exports={_location:null,_mylocation:null,_getAddr:function(){return this._location&&this._location.addr||{}},_getPoint:function(){return this._location&&this._location.point||{}},_getMyAddr:function(){return this._mylocation&&this._mylocation.addr||{}},_getMyPoint:function(){return this._mylocation&&this._mylocation.point||{}},getMyPointX:function(){var t=this._getMyPoint();return t.x?t.x:""},getMyPointY:function(){var t=this._getMyPoint();return t.y?t.y:""},getMyCityCode:function(){var t=this._getMyAddr();return t.cityCode?t.cityCode:null},getMyLocation:function(){return this._mylocation},getMyCenterPoi:function(){var t=this;return{x:t.getMyPointX(),y:t.getMyPointY()}},isGeoEnd:function(){return this._location.isGeoEnd},startGeo:function(){this._isInitSuc=!1,n.startGeo()},getUpCityCode:function(){var t=this,i=t._getAddr();return i.upCityCode},getAddress:function(){var t,i=this;return t=i._getAddr(),null!=t.address?t.address:i.getCity()+i.getDistrict()+i.getStreet()},getCity:function(){var t=this._getAddr();return t.city?t.city:""},getCityCode:function(){var t=this._getAddr();return t.cityCode?parseInt(t.cityCode):""},getDistrict:function(){var t=this._getAddr();return t.district?t.district:""},getStreet:function(){var t=this._getAddr();return t.street?t.street:""},getPointX:function(){var t=this._getPoint();return t.x?t.x:""},getPointY:function(){var t=this._getPoint();return t.y?t.y:""},getCenterPoi:function(){var t=this;return{x:t.getPointX(),y:t.getPointY()}},hasExactPoi:function(){return!!this._location.isExactPoi},getLocation:function(){return this._location},getLevel:function(){var t,i=this,o=i.getCityCode();return t=this._location.level,1===o?4:(i.hasExactPoi()&&e.get("ab")&&(this._location.level=t>16?t:16),this._location.level?this._location.level:this._location.isExactPoi?15:12)},getType:function(){return this._location&&this._location.type},getCityType:function(){var t,i=this;return t=i._getAddr(),t.cityType},hasGeoSuc:function(){return null!==this._location.isGeoSuc?this._location.isGeoSuc:null},getAccuracy:function(){var t=this._getAddr();return t.accuracy},isUserDeny:function(){},isLocFailed:function(){return!!this._location.isGeoSuc},isUserInput:function(){return this._location.isUserInput},_isUserInput:function(t){var i=t||{};return i.isUserInput?!0:null==i.type?!0:!1},_saveLocInStorage:function(){var t,i=this,o=window.localStorage;if(o){if(i._location){t=i._location.isInitGeo,delete i._location.isInitGeo;try{o.setItem("webapp-loc",JSON.stringify(i._location))}catch(e){}i._location.isInitGeo=t}if(i._mylocation){t=i._mylocation.isInitGeo,delete i._mylocation.isInitGeo;try{o.setItem("webapp-myloc",JSON.stringify(i._mylocation))}catch(e){}i._mylocation.isInitGeo=t}}},setAddress:function(t,i){var o,e,n=this,c=t||{},r=c.addr||{},s=c.point||{},a=i||!1;""===r.city&&(r.city="");var u={addr:{city:r.city?r.city:"",cityCode:r.cityCode?r.cityCode:1,district:r.district?r.district:"",street:r.street?r.street:"",accuracy:r.accuracy?r.accuracy:null,address:r.address?r.address:null,cityType:r.cityType?r.cityType:null,upCityCode:r.upCityCode?r.upCityCode:null},point:{x:s.x?s.x:null,y:s.y?s.y:null},type:c.type?c.type:null,t:c.t?c.t:(new Date).getTime(),isGeoSuc:c.isGeoSuc?!!c.isGeoSuc:null,isExactPoi:c.isExactPoi?c.isExactPoi:!1,level:c.level?c.level:!1,isSaveLocInCookie:c.isSaveLocInCookie||!1,isSaveInStorage:c.isSaveInStorage===!1?!1:!0,minutes:c.minutes?c.minutes:null,isInitGeo:a,isUserInput:this._isUserInput(c),isGeoEnd:"ip"!==c.type?!0:!1};o=u.type,e=n.getType(),i===!0&&"storage"!==e&&"changeCity"!==e&&(n._location=u),i||(n._location=u),u.isExactPoi&&(n._mylocation=u,listener.trigger("common.geolocation","mylocsuc",u)),u.isSaveInStorage&&n._saveLocInStorage(),"ip"!==o&&(n._location.isInitGeo=i,listener.trigger("common.geolocation","success",n._location))}}});
;define("common:widget/stat/pbstat.js",function(e,t,n){"use strict";function i(e,t,n){if(n=n||{},t=t||"click",e&&_[t.toUpperCase()]){n.module=_APP_HASH.module,n.action=_APP_HASH.action,n.page=_APP_HASH.page,n.third_party=_APP_HASH.third_party,n.wise_net=_WISE_INFO.netype,n.is_landing=a.isLandingPage(),n.c=o.getCityCode(),n.resid=s,n.da_ver=r,n.t=Date.now(),n.da_src=[_APP_HASH.da_page,c,e].join("."),n.da_act=t;var u=function(e,t){e&&(i._sending=!0,setTimeout(function(){i._sending=!1,d.src=g+"&"+e,m()},t||50))},m=function(){var e=i._reqQueue.shift();e&&u(e,50)},p=$.param(n);i._sending?i._reqQueue.push(p):u(p,0)}}var a=e("common:widget/pagemgr/pagemgr.js"),o=e("common:widget/geolocation/location.js"),s=31,r="2.1.0",_={READY:"ready",SHOW:"show",CLICK:"click",DBLCLICK:"dblclick",MOVE:"move",REQUEST:"request",RESPONSE:"response"},c="default",d=$("#statImg")[0],g=function(){var e="/mobile/img/t.gif?newmap=1";return/kehuduan=1|nostat=1/.test(location.href)&&(e="/mobile/img/nostat.gif?newmap=1"),e}();i._reqQueue=[],n.exports={addStat:i}});
;define("common:widget/stat/stat.js",function(t,e,n){"use strict";var i=t("common:widget/cookie/cookie.js"),o=t("common:static/js/util.js"),a=t("common:widget/pagemgr/pagemgr.js"),r=t("common:widget/stat/pbstat.js"),d=20138,c=function(){var t=i.get("flow_ctrl")||!1;return t===!1?!1:!0}(),s=function(e,n,i){var o={expires:1e4,path:"/"},a=t("common:widget/cookie/cookie.js"),r=i||function(){},d=n||{};m(e,d),d=$.extend({module:window._APP_HASH.module,action:window._APP_HASH.action,page:window._APP_HASH.page,third_party:window._APP_HASH.third_party,resid:31,da_ver:"2.1.0"},d),e&&(d.code=e,d.trackCode=e),a.set("H_MAP_CLK",JSON.stringify(d),o),r()},u=function(t){if("object"==typeof t&&t.code)return s(t.code,t),void 0;if("string"==typeof t)try{for(var e=t.replace(/[{}"']/g,"").split(","),n={},o=0;o<e.length;o++){var a=e[o].split(":");n[$.trim(a[0])]=$.trim(a[1])}s(n.code,n)}catch(r){}else null==i.get("H_MAP_CLK")&&s("",{})},g=function(){listener&&listener.on("common.page","switchstart",function(t,e){var n,i=e.target;i&&(n=$(i).data("log"),u(n));var o=$(i).data("da-src");o&&r.addStat(o)}),$(document).on("click","a,[data-href]",function(){var t=$(this).data("log");t&&u(t);var e=$(this).data("da-src");e&&r.addStat(e)},!0)},_=function(){var t="/mobile/img/t.gif?newmap=1";return/(&|\?)(kehuduan=1|nostat=1)(&|$|#)/.test(location.href)&&(t="/mobile/img/nostat.gif?newmap=1"),function(){return t}}(),f=$("#statImg"),m=function(e,n,i){var r=i||function(){};if(e){n=n||{},c&&(n.flow_ctrl=!0),n.module=_APP_HASH.module,n.action=_APP_HASH.action,n.page=_APP_HASH.page,n.third_party=_APP_HASH.third_party,n.net_type=_WISE_INFO.netype,n.is_landing=a.isLandingPage(),n.resid=31,n.da_ver="2.1.0";var d=o.jsonToUrl(n),s=function(t){var e=_();t&&(m._sending=!0,setTimeout(function(){m._sending=!1,f[0].src=e+t.src,$(document).trigger("addStat",t.code),u()},50),r())},u=function(){var t=m._reqQueue.shift();t&&s(t)},g=Date.now(),p=t("common:widget/geolocation/location.js"),l={src:"&t="+g+"&code="+e+"&c="+p.getCityCode()+"&"+d,code:e};m._sending?m._reqQueue.push(l):s(l)}};m._reqQueue=[];var p=function(){var t=d,e={},n=!1,i=200,o=!1,a=[],r=function(i){if(!n){var r=i||{},d=i.pid||"unkown",s=i.page_id||"unkown",u={pid:d,page_id:s},g=e;a.push(u),r.step_len=a.length,r.time=Date.now(),r=$.extend({},r,u,g),m(t,r),e={ref_pid:u.pid,ref_page_id:u.page_id},(!window.checkLandingPage()||o)&&c(),o=!0}},c=function(){n=!0;var t=setTimeout(function(){n=!1,clearTimeout(t)},i)};return r}();n.exports={addStat:m,sendPvStat:p,initClickStat:g,addCookieStat:s}});
;define("common:static/js/mapconst.js",function(_,o,i){var t=_("common:static/js/util.js");i.exports={GEO_TYPE_AREA:0,GEO_TYPE_LINE:1,GEO_TYPE_POINT:2,POI_TYPE_NORMAL:0,POI_TYPE_BUSSTOP:1,POI_TYPE_BUSLINE:2,POI_TYPE_SUBSTOP:3,POI_TYPE_SUBLINE:4,ROUTE_TYPE_DEFAULT:0,ROUTE_TYPE_BUS:1,ROUTE_TYPE_WALK:2,ROUTE_TYPE_DRIVE:3,ROUTE_TYPE_UNSURE:6,TRANS_TYPE_BUS:0,TRANS_TYPE_SUB:1,DEST_START:0,DEST_END:1,DEST_MIDDLE:2,DEST_SEC:3,INPUT_SUG:"",MY_GEO:"",ViewMargins:t.isAndroid()?[60,50,50,50]:[60,50,50,0],ROUTE_MARGINS:t.isAndroid()?[85,50,50,50]:[85,50,50,20],GRViewMargins:[60,50,60,50],SvpOpts:{enableAnimation:!1,margins:this.ViewMargins},PAGE_ID:{traffic:3},SEARCH_FOR_LOC_TIMEOUT:8e3,GLCON_TIMEOUT:3e4,BUSINESS_SPLIT:"     ",APP_ROOT:"mobile/webapp/",CITY_BY_BOUNDS_URI:"http://s0.map.baidu.com/",TRAFIIC_URI:"http://its.map.baidu.com:8001/showevents.php",MARKERS_PATH:"http://s1.map.bdimg.com/mobile/simple/static/common/images/markers_d2cfab5.png",DEST_MKR_PATH:"http://s1.map.bdimg.com/mobile/simple/static/common/images/dest_mkr_4dfb043.png",NAVI_MKR_PATH:"http://s1.map.bdimg.com/mobile/simple/static/common/images/navigation_d11feb4.png",DRV_DIRECTION_PATH:"http://s1.map.bdimg.com/mobile/simple/static/common/images/drv_dest_a021ac0.png",DRV_KEY_POI_PATH:"http://s1.map.bdimg.com/mobile/simple/static/common/images/drv_pin_c99bbd5.png",BUS_DIRECTION_PATH:"http://s1.map.bdimg.com/mobile/simple/static/common/images/bus_direction_d783d51.png",ROUTE_DICT:[{stroke:6,color:"#3a6bdb",opacity:.65},{stroke:6,color:"#3a6bdb",opacity:.75},{stroke:4,color:"#30a208",opacity:.65},{stroke:5,color:"#3a6bdb",opacity:.65},{stroke:6,color:"#3a6bdb",opacity:.5},{stroke:4,color:"#30a208",opacity:.5,strokeStyle:"dashed"},{stroke:4,color:"#575757",opacity:.65,strokeStyle:"dashed"}],IW_POI:0,IW_GRT:1,IW_BSL:2,IW_CNT:3,IW_BUS:4,IW_NAV:5,IW_WLK:6,IW_SHR:7,IW_TFC:10,IW_VCT:11,IW_ADDR:12}});
;define("common:widget/map/config.js",function(e,t,n){"use strict";function r(e){if(m)return m;e=e||navigator.userAgent;var t=parseInt(window._WISE_INFO.netspeed)||0,n=parseInt(window._WISE_INFO.netype)||0,r=c,i=w.plantform[p].enable,a=w.plantform[p].disable;return t>=w.netspeed||w.nettype.indexOf(n)>=0?r=l:i&&a?r=i.test(e)?a.test(e)?c:l:c:(i&&(r=i.test(e)?l:c),a&&(r=a.test(e)?c:l)),r}function i(){if(r()===c&&window.devicePixelRatio>1){var e=parseInt(window._WISE_INFO.netspeed)||0,t=parseInt(window._WISE_INFO.netype)||0;return 300>=e&&1===t?!0:!1}return!1}function a(){return r()===l?3:99}function o(){return window.devicePixelRatio||1}function d(e){e=e||{};var t=$.extend(f,e);for(var n in t)this[n]=t[n]}var s=e("common:static/js/util.js"),l="vector",c="raster",p=s.isIPad()?"iPad":s.isIPhone()?"iPhone":s.isAndroid()?"Android":"other",w={netspeed:800,nettype:[2],plantform:{iPad:{},iPhone:{enable:/iphone os [6-9]/i},Android:{enable:/android((\s)*|\/)(4\.[1-9]|[5-9])/i,disable:/UCBrowser|Huawei|Xiaomi_2013022|Xiaomi_2013023/i},other:{}}},m="";try{var u=location.href;/drawtype=vector/.test(u)&&localStorage&&localStorage.setItem("drawtype","vector"),/drawtype=raster/.test(u)&&localStorage&&localStorage.setItem("drawtype","raster"),m=localStorage.getItem("drawtype")}catch(I){}var f={drawMargin:0,maxZoom:18,minZoom:3,enableFulltimeSpotClick:!0,enableInertialDragging:!0,drawType:r(),vectorMapLevel:a(),devicePixelRatio:o(),enableHighResolution:i()};n.exports=d});
;define("common:widget/appresize/appresize.js",function(e,i,t){"use strict";var n=e("common:static/js/util.js");t.exports={init:function(){this.bind(),this.setMainHeight(),$(document.body).css("min-height",window.innerHeight)},bind:function(){listener.on("common","sizechange",$.proxy(this.update,this)),"undefined"!=typeof window.onorientationchange?(window.addEventListener("orientationchange",this.resize,!1),n.isAndroid()&&window.addEventListener("resize",this.resize,!1)):window.addEventListener("resize",this.resize,!1),listener.on("common.page","switchend",$.proxy(this.setMainHeight,this))},getAppHeight:function(){var e=window.innerHeight,i=$(".common-widget-header").height(),t=$(".index-widget-tabgroup").height(),n=$(".index-widget-searchbox").height(),o=$(".common-widget-nav").height(),h=$(".common-widget-footer").height(),s=$(".common-widget-bottom-banner").height(),r=e-(i+h+s),g=i+o+t+n,a=e-g;return{min:r,mapTop:g,mapHeight:a,header:i,footer:h,bottom:s}},setMainHeight:function(){var e=this.getAppHeight();$("#main").css({"min-height":e.min})},update:function(){var e=this.getAppHeight();$("#main").css({"min-height":e.min}),$(".common-widget-map").css({height:e.mapHeight,top:e.mapTop})},resize:function(e){function i(){setTimeout(function(){$(document.body).css("min-height",window.innerHeight)},1),listener.trigger("common","sizechange",{width:e.target.innerWidth,height:e.target.innerHeight,delay:!0})}var t=e.type,n={orientationchange:function(){setTimeout(function(){i()},1e3)},resize:function(){i()}};t=t.replace(/^on/,""),t&&n[t]()}}});
;define("common:widget/login/login.js",function(o,t,e){"use strict";var a=o("common:widget/cookie/cookie.js"),n=o("common:widget/stat/pbstat.js"),s=o("common:widget/url/url.js");e.exports={checkLogin:function(o){$.ajax({type:"GET",url:"http://mc.map.baidu.com/passport/Session3.php?t="+Date.now(),dataType:"jsonp",timeout:2e3,success:function(t,e){if("success"===e&&"0"===t.bdErrCode&&""!==t.displayname){var s={domain:location.hostname,path:"/mobile",expires:6048e5};return a.set("myUserName",t.displayname,s),localStorage.loginErr&&(n.addStat(COM_PB_STAT.LOGIN_SUCCESS,"request"),localStorage.removeItem("loginErr")),o&&o({status:!0,username:t.displayname}),!0}localStorage.loginErr=1,o&&o({status:!1,username:""})},error:function(){return localStorage.loginErr=1,o&&o({status:!1,username:""}),!1}})},loginAction:function(){n.addStat(COM_PB_STAT.LOGIN_BTN),location.href="http://wappass.baidu.com/passport/?authsite=1&u="+encodeURIComponent(document.location)},logoutAction:function(){n.addStat(COM_PB_STAT.LOGOUT_BTN),a.remove("myUserName"),location.href="http://wappass.baidu.com/passport/?logout&u=http://"+location.host+"/mobile/webapp/index/index/force=simple"},goMycenter:function(){n.addStat(COM_PB_STAT.GOTO_MYCENTER_BTN),s.navigate("/mobile/webapp/user/mycenter/force=simple")}}});
;var mercatorProjection=require("common:static/js/mercatorProjection.js");define("common:static/js/util.js",function(n,e,t){"use strict";Date.prototype.format=function(n){var e,t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(e in t)new RegExp("("+e+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?t[e]:("00"+t[e]).substr((""+t[e]).length)));return n},String.prototype.format=function(){var n=[];n=Array.apply(n,arguments);var e=this.replace(/\{([0-9]+)\}/g,function(e,t){var i=n[parseInt(t,10)];return"undefined"==typeof i?"":i});return e};var i={encodeHTML:function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#39;")},urlToJSON:function(n){if(!n)return{};var e,t,i,o={},a=n.split("&");for(e=0,i=a.length;i>e;e++)t=a[e].split("="),o[t[0]]=decodeURIComponent(t[1]);return o},requestUid:function(n){var e=location.href;e=decodeURIComponent(e),e=decodeURIComponent(e);var t,i,o=e.substring(0,e.length).split("&"),a={};for(t=0;i=o[t];t++)a[i.substring(0,i.indexOf("=")).toLowerCase()]=i.substring(i.indexOf("=")+1,i.length);var r=a[n.toLowerCase()];return"undefined"==typeof r?"":r},jsonToUrl:function(n){if(!n)return"";var e,t=[];for(e in n)n.hasOwnProperty(e)&&t.push(e+"="+encodeURIComponent(n[e]));return t.join("&")},isAndroid:function(){return/android/i.test(navigator.userAgent)},isIOS:function(){return/iphone|ipad|ipod/i.test(navigator.userAgent)},isIPhone:function(){return/iphone/i.test(navigator.userAgent)},isIPad:function(){return/ipad/i.test(navigator.userAgent)},isIPod:function(){return/ipod/i.test(navigator.userAgent)},getIosVersion:function(){return/OS 7_\d[_\d]* like Mac OS X/i.test(navigator.userAgent)},geoToPoint:function(n){if("string"==typeof n){var e,t,i=n.split("|");return 1===parseInt(i[0],10)?(e=i[1].split(","),t={lng:parseFloat(e[0]),lat:parseFloat(e[1])}):void 0}},jsonToQuery:function(n,e){var t,i,o=[];e=e||function(n){return n};for(t in n)n.hasOwnProperty(t)&&(i=n[t],i&&o.push(t+"="+e(i)));return o.join("&")},need2ShowTraffic:function(e){for(var t=n("common:widget/geolocation/location.js"),i=n("common:widget/url/url.js"),o=i.get().query,a=e||o&&o.code||t.getCityCode(),r=(a&&parseInt(a),[131,289,257,340,348,75,167,92,178,53,132,315,163,218,180,150,300,333,58,317,244,179,332,158,194,134,119,138,140,187,236,261,104,224,233,288]),s=0;s<r.length;s++)if(a===r[s])return!0;return!1},ifSupportSubway:function(n){var e={131:"beijing,,131",289:"shanghai,,289",257:"guangzhou,,257",340:"shenzhen,,340",2912:"hongkong,,2912",75:"chengdu,,75",53:"changchun,,53",132:"chongqing,,132",167:"dalian,,167",138:"foshan,,138",179:"hangzhou,,179",104:"kunming,,104",315:"nanjing,,315",58:"shenyang,,58",224:"suzhou,,224",332:"tianjin,,332",218:"wuhan,,218",233:"xian,,233",48:"haerbin,,48",268:"zhengzhou,,268",158:"changsha,,158",180:"ningbo,,180",beijing:"beijing,,131",shanghai:"shanghai,,289",guangzhou:"guangzhou,,257",shenzhen:"shenzhen,,340",hongkong:"hongkong,,2912",chengdu:"chengdu,,75",changchun:"changchun,,53",chongqing:"chongqing,,132",dalian:"dalian,,167",foshan:"foshan,,138",hangzhou:"hangzhou,,179",kunming:"kunming,,104",nanjing:"nanjing,,315",shenyang:"shenyang,,58",suzhou:"suzhou,,224",tianjin:"tianjin,,332",wuhan:"wuhan,,218",xian:"xian,,233",haerbin:"haerbin,,48",zhengzhou:"zhengzhou,,268",changsha:"changsha,,158",ningbo:"ningbo,,180"},t=navigator.userAgent,i=/android((\s)*|\/)(1\.\d|2\.[12])/i,o=/FlyFlow/i,a=!(i.test(t)||o.test(t));return a?e[n]:!1},showLoading:function(n){var e=this;e.$pageLoading=i.LoadingBox,e.$pageLoading.show(n);var t=n.css("position");"static"===t&&n.css("position","relative")},hideLoading:function(n,e){var t=function(){n?n.children(".page-loading").length>0&&n.children(".page-loading").remove():$(".page-loading").remove()},i=parseInt(e,10);i&&i>-1?setTimeout(function(){t()},i):t()},create:function(n,e){var t=document.createElement(n);e=e||{};for(var i in e)if("style"!==i){if(e[i])if(t.setAttribute)t.setAttribute(i,e[i]);else try{t[i]=e[i]}catch(t){}}else t.style.cssText=e[i];return t},nativeInfo:{},getNativeInfo:function(n,e,t){var i="http://127.0.0.1:6259/getpackageinfo?packagename="+n,o=this;o.isAndroid()?"object"==typeof o.nativeInfo[n]?e&&e(o.nativeInfo[n]):"number"==typeof o.nativeInfo[n]&&o.nativeInfo[n]>=2?t&&t():$.ajax({url:i,dataType:"jsonp",success:function(t){o.nativeInfo[n]=t,e&&e(t)},error:function(){o.nativeInfo[n]=o.nativeInfo[n]||0,o.nativeInfo[n]++,t&&t()}}):t&&t()},isInstalledClient:function(n,e,t){var i=this;i.getNativeInfo("com.baidu.BaiduMap",function(o){var a=parseInt(o.error);0===a?$.isFunction(n)&&n(i.getClientUrl("open",t)):$.isFunction(e)&&e(i.getClientUrl("download",t))},function(){$.isFunction(e)&&e(i.getClientUrl("download",t))})},getClientUrl:function(n,e){var t=this,i="";if(t.os=t.isAndroid()?"android":t.isIPhone()?"iphone":t.isIPad()?"ipad":"unknown","download"===n)i="http://mo.baidu.com/map/code/?from=gw10015";else if(n="open")switch(t.os){case"android":i=e?"bdapp://map/place/detail?uid="+e+"&src=baidu|lbswebapp":"bdapp://map/";break;case"iphone":i=e?"baidumap://map/place/detail?uid="+e+"&src=baidu|lbswebapp":"baidumap://map/";break;case"ipad":i=e?"baidumap://map/place/detail?uid="+e+"&src=baidu|lbswebapp":"baidumap://map/";break;case"unknown":i=e?"bdapp://map/place/detail?uid="+e+"&src=baidu|lbswebapp":"bdapp://map/";break;default:i="http://mo.baidu.com/map"}return i},setHrefStat:function(n,e,t){return n&&e?(t?n.attr("href",e).attr("data-log","{code:"+t+"}"):n.attr("href",e),n):void 0},bindHrefStat:function(n,e){var t=function(t){t.stopPropagation(),t.preventDefault(),e&&e(),setTimeout(function(){window.navigator.standalone?window.open(n.attr("data")):n.attr("data")&&(window.location.href=n.attr("data"))},200)};n.bind("click",t)},getNativeUrl:function(){var e,t,i,o,a,r,s,d,c=n("common:widget/geolocation/location.js"),u=n("common:widget/url/url.js"),p=u.get(),l=window._WEBAPP_TO_NA,g=c.getCity(),h=c.getCenterPoi(),f=h.y+","+h.x,v=window._APP_HASH.module,b=window._APP_HASH.action,m=v+"_"+b,_="baidumap://map/",w="0,0",y="0,0",x=!0,$="place";switch(l&&Array.isArray(l.end)&&(l.end=l.end.shift()),l&&Array.isArray(l.end_city)&&(l.end_city=l.end_city.shift()),l&&(e=l.wd||"",t=l.uid||"",l.end_city&&l.start_city&&l.end_city.cname!==l.start_city.cname&&(x=!1),l.start&&(i=l.start.wd||"",w=l.start.pt||"0,0"),l.end&&(o=l.end.wd||"",y=l.end.pt||"0,0"),l.start_city&&(a=l.start_city.cname||""),l.end_city&&(r=l.end_city.cname||"")),p&&p.pageState&&"line"===p.pageState.tab&&($="line"),s=w.split(","),w=s[1]+","+s[0],d=y.split(","),y=d[1]+","+d[0],m){case"place_list":_+="place/search?query="+e+"&region="+g+"&location=latlng:"+f+"|name="+g+"&radius=5000&coord_type=bd09mc";break;case"place_detail":t&&(_+="place/detail?uid="+t);break;case"index_index":"line"===$&&(_+="direction?region="+g);break;case"transit_detail":case"transit_list":_+="direction?mode=transit&origin=name:"+i+"|latlng:"+w+"&destination=name:"+o+"|latlng:"+y+"&coord_type=bd09mc",_+=x?"&region="+g:"&origin_region="+a+"&destination_region="+r;break;case"drive_list":_+="direction?mode=driving&origin=name:"+i+"|latlng:"+w+"&destination=name:"+o+"|latlng:"+y+"&coord_type=bd09mc",_+=x?"&region="+g:"&origin_region="+a+"&destination_region="+r;break;case"walk_list":_+="direction?mode=walking&origin=name:"+i+"|latlng:"+w+"&destination=name:"+o+"|latlng:"+y+"&coord_type=bd09mc",_+=x?"&region="+g:"&origin_region="+a+"&destination_region="+r}return _+=-1!==_.indexOf("?")?"&src=baidu|lbswebapp":"?src=baidu|lbswebapp"},convertMC2LL:function(n){return mercatorProjection.convertMC2LL(n)},convertLL2MC:function(n){return mercatorProjection.convertLL2MC(n)}};i.TelBox={bindEvent:function(){$("#telBox").on("click .ok-telbox",function(){$("#telBox").off(),$("#telBox").remove()}),$("#telBox").on("click .cancel-telbox",function(){$("#telBox").off(),$("#telBox").remove()})},showTb:function(n){if(n){$("#telBox")[0]&&$("#telBox").remove();var e=[];e.push('<div id="telBox" class="telbox">'),e.push('<div class="t"></div>'),e.push('<div  class="c">'),e.push('<div class="t1"></div><div>'),e.push('<button class="bt qx cancel-telbox" ></button>'),e.push('<a href="wtai://wp/mc;'+$.trim(n)+'"><button class="bt qd ok-telbox" ></button></a>'),e.push("</div></div></div>"),$("body").append(e.join("")),this.bindEvent()}}},i.DownBox={bindEvent:function(){var e=$("#downBox button").eq(1),t=$("#downBox #c1avie-usewebapp").eq(0);e.on("click",function(){n("common:widget/stat/stat.js").addCookieStat(COM_STAT_CODE.TOP_BANNER_APP_ERROR_DOWN),$("#downBox").remove()}),t.on("click",function(){n("common:widget/stat/stat.js").addCookieStat(COM_STAT_CODE.TOP_BANNER_APP_ERROR_CANCEL),$("#downBox").remove(),$("#greybackground").remove(),$("#indexCloseCover").click()})},showTb:function(){$("#downBox")[0]&&$("#downBox").remove();var n=[];n.push('<div id="greybackground">'),n.push('<div id="downBox" class="downbox">'),n.push('<div class="t"></div>'),n.push('<div  class="c">'),n.push('<div class="t1"><p></p><p></p></div><div class="c1avie-downloadtop">'),/iphone/i.test(navigator.userAgent)?n.push('<p class="c1avie-downloadbox c1avie-downloadbox-weight"><a href="http://itunes.apple.com/cn/app/id452186370?ls=1&mt=8"><span class="bt qd cancel-downbox" ></span></a></p>'):n.push('<p class="c1avie-downloadbox c1avie-downloadbox-weight"><a href="http://mo.baidu.com/map/code/?from=gw10015"><span class="bt qd cancel-downbox" ></span></a></p>'),n.push('<p class="c1avie-downloadbox"><a href="javascript:void(0)" id="c1avie-usewebapp" class="bt qx cancel-downbox" ></a></p>'),n.push("</div></div></div></div>"),$("body").append(n.join(""));var e=$(document).height();$("#greybackground").css({height:e}),this.bindEvent()}},i.LoadingBox={show:function(n){if(n.children(".page-loading").length>0)return n.children(".page-loading");var e=i.create("div",{"class":"mappic-loading page-loading slide in",id:"loadingbox"}),t='<div>                           <span class="dot-1"></span>                           <span class="dot-2"></span>                           <span class="dot-3"></span>                           <span class="dot-4"></span>                           <span class="dot-5"></span>                           <span class="dot-6"></span>                           <span class="dot-7"></span>                           <span class="dot-8"></span>                      </div>';return $(e).html(t),n&&n.append($(e)),$(e).show(),$(e)}};var o=["=",".","-","*"],a=1<<23;$.extend(i,{decode_geo_diff:function(n){for(var e=this._decode_type(n.charAt(0)),t=n.substr(1),i=0,a=t.length,r=[],s=[],d=[];a>i;)if(t.charAt(i)===o[0]){if(13>a-i)return 0;if(d=this._decode_6byte_(t.substr(i,13),r),0>d)return 0;i+=13}else if(";"===t.charAt(i))s.push(r.slice(0)),r.length=0,++i;else{if(8>a-i)return 0;if(d=this._decode_4byte_(t.substr(i,8),r),0>d)return 0;i+=8}for(var c=0,u=s.length;u>c;c++)for(var p=0,l=s[c].length;l>p;p++)s[c][p]/=100;return{geoType:e,geo:s}},_decode_type:function(n){var e=-1;return n===o[1]?e=2:n===o[2]?e=1:n===o[3]&&(e=0),e},_decode_6byte_:function(n,e){for(var t=0,i=0,o=0,a=0;6>a;a++){if(o=this._char2num_(n.substr(1+a,1)),0>o)return-1-a;if(t+=o<<6*a,o=this._char2num_(n.substr(7+a,1)),0>o)return-7-a;i+=o<<6*a}return e.push(t),e.push(i),0},_decode_4byte_:function(n,e){var t=e.length;if(2>t)return-1;for(var i=0,o=0,r=0,s=0;4>s;s++){if(r=this._char2num_(n.substr(s,1)),0>r)return-1-s;if(i+=r<<6*s,r=this._char2num_(n.substr(4+s,1)),0>r)return-5-s;o+=r<<6*s}return i>a&&(i=a-i),o>a&&(o=a-o),e.push(e[t-2]+i),e.push(e[t-1]+o),0},_char2num_:function(n){var e=n.charCodeAt(0);return n>="A"&&"Z">=n?e-"A".charCodeAt(0):n>="a"&&"z">=n?26+e-"a".charCodeAt(0):n>="0"&&"9">=n?52+e-"0".charCodeAt(0):"+"===n?62:"/"===n?63:-1},getPoiPoint:function(n){var e=[],t=null;if("Point"===n.toString())t=n;else{if("string"==typeof n){if(e=$.trim(n).split(","),e.length<2)return;e[0]=parseFloat($.trim(e[0])),e[1]=parseFloat($.trim(e[1]))}else if(e=n.slice(0),e.length<2)return;t=new BMap.Point(e[0],e[1])}return t},parseGeo:function(n){if("string"==typeof n){var e=n.split("|"),t=parseInt(e[0]),i=e[1],o=e[2],a=o.split(";"),r=[];switch(t){case 1:r.push(a[0]);break;case 2:case 3:for(var s=0;s<a.length-1;s++){var d=a[s];if(d.length>100)d=d.replace(/([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*)(,)/g,"$1,$2;"),r.push(d);else{for(var c=[],u=d.split(","),p=0;p<u.length;p+=2){var l=u[p],g=u[p+1];c.push(l+","+g)}r.push(c.join(";"))}}}return r.length<=1&&(r=r.toString()),{type:t,bound:i,points:r}}},parse2Geo:function(n,e){e?.25>e?e=0:e>.25&&1>e?e=1:e>32&&(e=32):e=0;var t,i=n.split("|");if(1===i.length)return t=this.decode_geo_diff(i[0]),{type:t.type,bound:"",points:t.geo.join(",")};if(i.length>1){for(var o=n.split(";.="),a=[],r=[],s=0,d=o.length,c=0;d>c;c++){var u=o[c];d>1&&(0===c&&(u+=";"),c>0&&d-1>c&&(u=".="+u+";"),c===d-1&&(u=".="+u));var p=u.split("|"),l=this.decode_geo_diff(p[0]),g=this.decode_geo_diff(p[1]);a.push(l.geo.join(",")),a.push(g.geo.join(",")),t=this.decode_geo_diff(p[2]),s=t.type;var h=t.geo.join(",");if(h=h.replace(/([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*)(,)/g,"$1,$2;"),e>0){var f=new RegExp("(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);)(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);){"+e+"}","ig");h=h.replace(f,"$1")}r.push(h)}return 1>=d&&(r=r.join(";")),{type:s,bound:a.join(";"),points:r}}},getPointByStr:function(e){var t=n("common:widget/map/map.js").getBMap();if("string"==typeof e){var i=e.split(",");if(!(i.length<2))return t?new t.Point(i[0],i[1]):{lng:parseFloat(i[0]),lat:parseFloat(i[1])}}},getBPoints:function(n){if(n&&0!==n.length){for(var e=[],t=0;t<n.length;t++)if(n[t])for(var o=n[t].split(";"),a=0;a<o.length;a++){var r=i.getPointByStr(o[a]);e.push(r)}return e}}}),t.exports=i});
;define("common:widget/geolocation/initgeo.js",function(e,t,a){"use strict";var o=e("common:widget/geolocation/location.js"),i=e("common:widget/cookie/cookie.js");a.exports={init:function(e){this._resetCurrentCity(),this._initIpLocation(),e&&e.isStartGeo!==!1&&this._initGeoLocation(),this.changeCity(!0)},_resetCurrentCity:function(){var e=window._DEFAULT_CITY,t=window.localStorage;try{e.index?(t.setItem("_DEFAULT_CITY",JSON.stringify(window._DEFAULT_CITY)),i.set("DEFAULT_CITY","1",{expires:3e5,path:"/"})):t.getItem("_DEFAULT_CITY")?window._DEFAULT_CITY=JSON.parse(t.getItem("_DEFAULT_CITY"))||{}:(window._DEFAULT_CITY={addrbyip:'{"error":1,"content":""}',default_city:"",index:'{"content":{"baike":0,"city_type":0,"cname":"","code":1,"count_info":null,"geo":"1|11590057.96,4489812.75;11590057.96,4489812.75|11590057.96,4489812.75;","if_current":1,"level":0,"sup":0,"sup_bus":0,"sup_business_area":0,"sup_lukuang":0,"sup_subway":0,"uid":"b04c4accaab2fb7f410245f2"},"mo":{"data":{"mo_text":"","mo_color":"#ff0000","mo_layer_text":"90%","popup_img1":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/86bd8022f311d822940c36647c0aa131_143_221.jpg","popup_img2":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/94383d365350ba776eaee9d9daaf2387_143_221.jpg","popup_img3":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/c6c9811cff704539cc97e1fa385df81d_143_221.jpg","popup_title1":"","popup_title2":"","popup_title3":"","popup_version_iphone":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/18a9fef8f8276dedb1d8129a36ceb181_25_26.png","popup_version_andriod":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/e87051a70c258e51bb947a95789ca815_25_26.png","banner_home":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/8cf335e0d9f4c9e0f8656c1e369c7f67_316_100.jpg","banner_poi":"http://map.baidu.com/fwmap/upload/r/image/2013-07-16/6f90db9e61476f2cd8975c3fac3c70a8_316_100.jpg","banner_bus":"http://map.baidu.com/fwmap/upload/r/image/2013-07-16/b39713e7c4cbf5a27c72308d1846248f_316_100.jpg","banner_driving":"http://map.baidu.com/fwmap/upload/r/image/2013-07-16/8a512aa177b13df62758f7326f4a5682_316_100.jpg"}},"result":{"jump_back":0,"qid":"","time":0,"type":1},"current_city":{"code":1,"sup":0,"sup_bus":0,"sup_business_area":0,"sup_lukuang":0,"sup_subway":0,"type":0,"up_province_name":""}}',loopindex:-1},i.set("DEFAULT_CITY","0",{expires:-1e3,path:"/"}))}catch(a){}if(!window._CURRENT_CITY){var o=JSON.parse(_DEFAULT_CITY.index)||{},p=o.content||{};window._CURRENT_CITY={code:p.code||1,geo:p.geo||"",name:p.cname||"",sup:p.sup||0,sup_bus:p.sup_bus||0,sup_business_area:p.sup_business_area||0,sup_lukuang:p.sup_lukuang||0,sup_subway:p.sup_subway||0,type:p.city_type||0,up_province_name:p.up_province_name||"",reset_cur:1}}},_initIpLocation:function(){try{this._hasStorageLoc()||this._initIpGeo()}catch(e){this._initIpGeo()}},_initGeoLocation:function(){e.async("common:widget/geolocation/geolocation.js",function(e){e.init()})},getLocFromStorage:function(e){var t=window.localStorage;if(t)try{var a=t.getItem(e);return JSON.parse(a)}catch(o){return}},_hasStorageLoc:function(){var e=this,t=e.getLocFromStorage("webapp-loc"),a=e.getLocFromStorage("webapp-myloc"),i=(new Date).getTime();return a&&a.isExactPoi===!0&&parseInt(a.t)+3e5>i&&(o._mylocation=a,$.extend(o._mylocation,{type:"storage"}),window._INIT_MYLOC_SUC=!0),t&&"ip"!==t.type&&parseInt(t.t)+3e5>i?(o._location=t,$.extend(o._location,{type:"storage"}),window._INIT_LOC_SUC=!0,!0):!1},_initIpGeo:function(){var e,t,a,i,p,n;e=JSON.parse(_DEFAULT_CITY.index)||{},t=e&&e.content,a=t&&t.geo,p=t.level,i=a.split(";")[1].split("|")[0].split(","),n=t.code&&parseInt(t.code),1===n&&(t.name="");var c={addr:{city:t.cname,cityCode:t.code},point:{x:i[0],y:i[1]},level:p,type:"ip",isExactPoi:!1,isGeoEnd:!1,isSaveLocInStorage:!1};o.setAddress(c,!0)},changeCity:function(e){var t=window._CURRENT_CITY,a=t.is_update_city&&parseInt(t.is_update_city),i=t.code&&parseInt(t.code),p=t.type&&parseInt(t.type);if(t&&1!==t.reset_cur&&(i!==o.getCityCode()&&i!==o.getUpCityCode()||1===a)){var n=t.geo&&t.geo.split(";")[0].split("|")[1].split(",");if(void 0===n)return;1===i&&(t.name="");var c=null;3===p&&(c=t.up_cityid);var _=0!==t.level?t.level:4,s={addr:{city:t.name,cityCode:t.code,cityType:t.type,upCityCode:c},point:{x:n[0],y:n[1]},level:_,isSaveLocInCookie:!0,type:"changeCity"};e?o.setAddress(s):o.setAddress(s,!1)}}}});
;define("common:widget/map/map.js",function(e,t,i){"use strict";var o=e("common:static/js/mapconst.js"),n=e("common:widget/pagemgr/pagemgr.js"),a=e("common:static/js/util.js"),r=e("common:widget/url/url.js"),s=e("common:widget/appresize/appresize.js"),d=e("common:widget/geolocation/location.js"),c=e("common:widget/map/iwcontroller.js"),l=e("common:widget/map/config.js"),m=e("common:widget/monitor/maplog.js"),h=e("common:widget/stat/stat.js"),p=new l;i.exports={DEST_MKR_PATH:"http://s1.map.bdimg.com/mobile/simple/static/common/images/dest_mkr_4dfb043.png",BUS_DIRECTION_PATH:"http://s1.map.bdimg.com/mobile/simple/static/common/images/bus_direction_d783d51.png",_initialized:!1,driveRoutes:[],destPois:[],init:function(e){this._initialized?(this.show(),e&&e(this._BMap),this.trafficControl.update()):this._init(e)},_init:function(e){var t=this;m.init(),listener.trigger("common.map","start");var i=localStorage.getItem("common:widget/api/api.js")?!0:!1;this._getAsyncWidget(function(){var o=t._BMap=arguments[0];listener.trigger("common.map","jsloaded",{isCache:i}),$.each(arguments,function(e,i){i._className_&&(/InfoWindow/.test(i._className_)?c[i._className_]=i:t[i._className_]=i)}),t._initMap(),t._initialized=!0,e&&e(o)})},getMapOptions:function(){return p},setViewport:function(e,t){var i=this._map.getViewport(e,t),o=i.center,n=i.zoom;this._centerAndZoom(o,n)},_centerAndZoom:function(e,t){e&&t||(e=new BMap.Point(d.getPointX(),d.getPointY()),t=d.getLevel()),this._map.enableLoadTiles=!0,this._map.centerAndZoom(e,t)},_initMap:function(){this.DEST_MARKER_SIZE=new this._BMap.Size(29,35),this.DEST_MARKER_ANCHOR=new this._BMap.Size(15,34),this.DEST_DRIVER_DIR_SIZE=new this._BMap.Size(18,18),this.show();var e=this._map=new this._BMap.Map("map-holder",p);e.enableLoadTiles=!1,this._bindEvent(),this._initControl(),listener.trigger("common.map","init",e)},hide:function(){$(".common-widget-map").css("visibility","hidden"),$(".common-widget-map").css("z-index",-10)},show:function(){s.update(),$(".common-widget-map").css("visibility","visible"),$(".common-widget-map").css("z-index",0),this._fixCenterPos()},_bindEvent:function(){var e=this,t=this._map,i=this._BMap;this._bindMapClick(),listener.on("common.geolocation","success",function(t,o){var s=r.get(),c=s.module,l=s.action,m=s.pageState||{},h=n.isLandingPage(),p=new i.Point(o.point.x,o.point.y);o.isExactPoi&&null!=o.type&&(o.isInitGeo===!1||1===m.showmygeo||"index"===c&&"index"===l&&h)&&!d.isUserInput()?e.addGLCenter(p):null==o.type&&void 0!==e.geolocationMarker&&d.isUserInput()&&(e._map.removeOverlay(e.geolocationMarker),e.geolocationMarker=void 0);var _=o.addr.accuracy;null!==_&&e.addGLCircle(p,_),(o.isInitGeo===!1||1===m.showmygeo||"index"===c&&"index"===l&&h)&&e._map.centerAndZoom(p,d.getLevel()),a.isIPad()&&(o.isExactPoi&&null!=o.type&&"index"===c&&"index"===l?e.addGLCenter(p):e.iwController.get().hide(),"index"===c&&"index"===l&&e._map.centerAndZoom(p,d.getLevel()))},this),t.addEventListener("ontilesloaded",function o(){e._addLazyControl(),t.removeEventListener("ontilesloaded",o)}),t.addEventListener("onvectorloaded",function s(){e._addLazyControl(),t.removeEventListener("onvectorloaded",s)}),e.addControlTimer=window.setTimeout(function(){e._addLazyControl()},3e3),listener.on("common.page","pageloaded",function(){/map/.test(window._APP_HASH.page)||e.hide()})},_bindMapClick:function(){var e=this,t=this._map;listener.on("infowindow."+o.IW_VCT,"click",function(e,t){var i=t.id,o=t.data,n=t.instance;switch(i){case"iw-l":n.nbSearch(o.name,o.geo);break;case"iw-c":n.detailSearch(o.uid);break;case"iw-r":n.lineSearch(o.name,o.geo)}}),t.addEventListener("onvectorclick",function(i){if("madian"!==i.form){var n=e.iwController.get();if(!(n&&n.skipClickHandler||"base"!==i.from)){var a=i.iconInfo;if(a.uid&&a.name&&a.point){h.addStat(COM_STAT_CODE.MAP_VECTOR_MARKER_CLICK);var r=t.pixelToPoint(a.point);n=e.iwController.get(o.IW_VCT),n.setData(o.IW_VCT,{json:[{uid:a.uid,name:a.name,geo:"1|"+r.lng+","+r.lat}]}).switchTo(0)}}}}),t.addEventListener("click",function(){var t=e.iwController.get();t&&(t.handled?(t.handled=!1,t.skipClickHandler=!0):(t.skipClickHandler=!1,t.hide()))}),t.addEventListener("touchstart",function(){e.menuControl&&e.menuControl.hideMenuDrop(),e.geoControl&&e.geoControl.hideInfoBar()})},_addSyncControl:function(){var e=this._BMap,t=this._map;if(this.isMyCenter()){var i=d.getCenterPoi(),o=new e.Point(i.x,i.y),n=d.getAccuracy();this.addGLOverlay(o,n)}this.lineStepControl=new this.LineStepControl,t.addControl(this.lineStepControl),this.lineStepControl.hide(),this.iwController=c.init(t),t.addOverlay(this.iwController.get())},_addLazyControl:function(){if(!this._isAddControl){this._isAddControl=!0;var e=this._map;e.addControl(this.trafficControl),e.addControl(this.zoomControl),!a.isIPad()&&e.addControl(this.menuControl),e.addControl(this.geoControl),e.addControl(this.scaleControl),listener.trigger("common.map","addlazycontrol")}},_initControl:function(){var e=this,t=this._BMap;this.trafficControl=new this.TrafficControl,this.trafficControl.addEventListener("click",function(t){h.addStat(COM_STAT_CODE.MAP_TRAFFIC_MARKER_CLICK);var i=e.iwController.get(o.IW_TFC);i.setData(o.IW_TFC,{json:[t.data]}).switchTo(0),e._singleMarker&&e._singleMarker.hide(),e.grMarker&&e.grMarker.hide()}),this.trafficControl.addEventListener("removelayer",function(){e.iwController.get(o.IW_TFC).hide()}),this.zoomControl=new this.ZoomControl,a.isIPad()||(this.menuControl=new this.MenuControl),this.geoControl=new this.GeoControl;var i=BMAP_ANCHOR_BOTTOM_LEFT,n=new t.Size(52,22);a.isIPad()&&(i=BMAP_ANCHOR_BOTTOM_RIGHT,n=new t.Size(16,16)),this.scaleControl=new t.ScaleControl({anchor:i,offset:n}),this._addSyncControl()},_getAsyncWidget:function(t){e.async(["common:widget/api/api.js","common:widget/api/ext/circleoverlay.js","common:widget/api/ext/custommarker.js","common:widget/api/ext/geocontrol.js","common:widget/api/ext/linestepcontrol.js","common:widget/api/ext/menucontrol.js","common:widget/api/ext/zoomcontrol.js","common:widget/api/ext/trafficcontrol.js","common:widget/api/ext/userheading.js","common:widget/api/ext/poiinfowindow.js","common:widget/api/ext/trsinfowindow.js","common:widget/api/ext/tfcinfowindow.js","common:widget/api/ext/addrinfowindow.js"],t)},isMyCenter:function(){var e=d.getCenterPoi(),t=d.getMyCenterPoi();return d.hasExactPoi()&&!d.isUserInput()&&t&&t.x===e.x&&t.y===e.y?!0:!1},getCustomMarker:function(){return this.CustomMarker},getBMap:function(){return this._BMap},getMap:function(){return this._map||{}},getInfoWindow:function(e){return this.iwController.get(e)},getLineStepControl:function(){return this.lineStepControl},openGeoIw:function(){var e=d.getMyCenterPoi(),t=this.iwController.get(o.IW_CNT);t.setData(o.IW_CNT,{json:[{name:o.MY_GEO,html:"<b>{0}</b><p>{1}</p>".format(o.MY_GEO,d.getAddress()),geo:"1|"+e.x+","+e.y}]}).switchTo(0)},_bindGeoIWEvent:function(){listener.on("infowindow."+o.IW_CNT,"click",function(e,t){var i=t.id,o=t.data,n=t.instance;switch(i){case"iw-l":n.nbSearch(o.name,o.geo);break;case"iw-c":r.update({module:"index",action:"mylocation"},{trigger:!0,queryReplace:!0,pageStateReplace:!0});break;case"iw-r":n.lineSearch(o.name,o.geo)}})},_fixCenterPos:function(){var e=this;setTimeout(function(){e.geolocationMarker&&e.geolocationMarker.draw()},100)},addGLCenter:function(e){var t=this,i=this._map,n=this._BMap;if(this.geolocationMarker)this.geolocationMarker.setPoint(e);else{var a=new n.Icon(o.DEST_MKR_PATH,new n.Size(14,14),{anchor:new n.Size(7,7),imageOffset:new n.Size(80,0)}),r=new this.CustomMarker(a,e,{className:"dest_mkr",click:function(){h.addStat(COM_STAT_CODE.MAP_GEOLOCATION_MARKER_CLICK),t.openGeoIw()}});r.enableMassClear=!1,i.addOverlay(r),this.geolocationMarker=r,this.addUserHeading(r),this._bindGeoIWEvent(),this._fixCenterPos()}return listener.trigger("common.map","addcenter"),this.geolocationMarker},addUserHeading:function(e){e&&this.UserHeading.isSupport()&&!d.isUserInput()&&(e.setIcon(new BMap.Icon(o.NAVI_MKR_PATH,new BMap.Size(38,40),{anchor:new BMap.Size(19,20)})),e.setClassName("navi_mkr"),this.UserHeading.start(e.getContainer()))},addGLCircle:function(e,t){if(/MI 2S/i.test(navigator.userAgent)&&(t=t>100?100:t),this.geolocationCircle)this.geolocationCircle.setInfo(e,t);else{var i=new this.CircleOverlay(e,t);this._map.addOverlay(i),this.geolocationCircle=i}return this.geolocationCircle},addGLOverlay:function(e,t){var i,o=this.addGLCenter(e);return null!==t&&this.addGLCircle(e,t),{center:o,circle:i}},clearOverlays:function(){this.geoControl&&this.geoControl.hideInfoBar(),this.spotshotLayer&&this._map.removeTileLayer(this.spotshotLayer),this.grControl&&this.grControl.clearCache();var e=this.iwController.get();e&&e.hide(),this.lineStepControl&&this.lineStepControl.hide(),this._map.clearOverlays()},removeOverlayInArray:function(e){for(var t=0;t<e.length;t++)this._map.removeOverlay(e[t]);e=[]},addRoute:function(e,t){var i=o.ROUTE_DICT;if("undefined"==typeof t&&(t=0),i[t]){var n=i[t],a={strokeWeight:n.stroke,strokeColor:n.color,strokeOpacity:n.opacity,strokeStyle:n.strokeStyle},r=new this._BMap.Polyline(e,a);return this._map.addOverlay(r),r._routeType=t,r}},addDriveRoute:function(e){var t=this.addRoute(e,o.ROUTE_TYPE_DRIVE);return this.driveRoutes.push(t),t},removeDriveRoute:function(){this.removeOverlayInArray(this.driveRoutes)},removeRoute:function(e){this._map.removeOverlay(e),e=null},selectRoute:function(e){if(e instanceof this._BMap.Polyline){var t=["#ff0103","#ff0103","#ff0103","#ff0103","#ff0103","#ff0103","#ff0103"];t[e._routeType]&&e.setStrokeColor(t[e._routeType])}},unselectRoute:function(e){if(e instanceof this._BMap.Polyline){var t=["#3a6bdb","#3a6bdb","#30a208","#3a6bdb","#3a6bdb","#30a208","#575757"];t[e._routeType]&&e.setStrokeColor(t[e._routeType])}},addKeyPoiMarker:function(e,t,i){var n=a.getPoiPoint(e);if(n){var r=i?0:22,s=new this._BMap.Icon(o.DRV_KEY_POI_PATH,new this._BMap.Size(24,22),{anchor:new this._BMap.Size(12,22),imageOffset:new this._BMap.Size(0,r)}),d=new this.CustomMarker(s,n),c=document.createElement("div");return c.className="nplb",c.style.width=t.length+"em",c.innerHTML=t,this._map.addOverlay(d),d._div.appendChild(c),d}},addDirectionMarker:function(e,t){var i=a.getPoiPoint(e);if(i){(0>t||t>12)&&(t=0);var n=18*t,r=new this._BMap.Icon(o.DRV_DIRECTION_PATH,this.DEST_DRIVER_DIR_SIZE,{anchor:new this._BMap.Size(9,9),imageOffset:new this._BMap.Size(n,0)}),s=new this.CustomMarker(r,i,{className:"drv_dest"});return this._map.addOverlay(s),s}},addDestPoi:function(e,t){if(e=a.getPoiPoint(e)){var i=new this._BMap.Icon(o.DEST_MKR_PATH,this.DEST_MARKER_SIZE,{anchor:this.DEST_MARKER_ANCHOR,imageOffset:new this._BMap.Size(29*t,0)}),n=new this.CustomMarker(i,e,{className:"dest_mkr"});return this._map.addOverlay(n),n.setZIndex(400),this.destPois.push(n),n}},removeDestPoi:function(){this.removeOverlayInArray(this.destPois)}}});
;define("common:widget/statistics/statistics.js",function(t,s,i){"use strict";var n=t("common:widget/stat/pbstat.js");i.exports={init:function(){window.navigator.standalone&&n.addStat(COM_PB_STAT.OPEN_FROM_DESKTOP,"request")}}});
;define("common:widget/map/preloader/preloader.js",function(e,i,n){"use strict";function t(){var e=window._APP_HASH||{},i=e.module,n=e.action,t=e.page;return"index"===i&&"index"===n?g[i+"_"+n+"_"+t]:g[i+"_"+n]}function o(){var e=t()||0;if([1,2,3].indexOf(e)>=0)return{zoom:c.getLevel(),center:{lng:c.getPointX(),lat:c.getPointY()}};var i,n,o=window._APP_HASH||{},a=o.module,d={};if(window._MAP_BOUNDS){["transit","drive","walk"].indexOf(a)>=0&&(d.margins=m.ROUTE_MARGINS);var p=l.getBPoints([window._MAP_BOUNDS]),r=s.getViewport(p,d);r&&r.center&&r.zoom&&(i=r.center,n=r.zoom)}return{center:i,zoom:n}}function a(e){if(d(e)){var i=o(),n=i.center,t=i.zoom;n&&t&&s.loadTiles(n,t)}}function d(e){var i=window._APP_HASH||{},n=i.page,o=parseInt(window._WISE_INFO.netype,10)||0,a=p.isSinglePageApp()?1:2,d=t()||0,c=w[e]||{};return!/map/.test(n)&&c.nettype.indexOf(o)>=0&&c.apptype.indexOf(a)>=0&&c.pageid.indexOf(d)>=0}var p=e("common:widget/pagemgr/pagemgr.js"),c=e("common:widget/geolocation/location.js"),l=e("common:static/js/util.js"),r=e("common:widget/map/map.js"),m=e("common:static/js/mapconst.js"),s=e("common:widget/map/preloader/tileloader.js"),g={index_index_map:1,index_index_index:2,index_index_navline:3,place_list:4,place_detail:5,transit_detail:6,drive_list:7,walk_list:8},w={geolocation:{pageid:[2,3],nettype:[0,1,2,3],apptype:[1,2]},onload:{pageid:[2,3,4,5,6,7,8],nettype:[0,1,2,3],apptype:[1,2]},switchend:{pageid:[2,3,4,5,6,7,8],nettype:[0,1,2,3],apptype:[1]},mapclick:{pageid:[2,3,4,5,6,7,8],nettype:[0,1,2,3],apptype:[1]}};n.exports={_initialized:!1,init:function(){this.bindEvent(),e.async(["common:widget/api/api.js","common:widget/api/ext/tfcinfowindow.js"]),e("common:widget/map/preloader/plugin.js").getVectorMdl(),this._initialized=!0},loadTiles:function(e){a(e)},bindEvent:function(){if(!this._initialized){var e=r.getMapOptions();s.init(e),$(window).on("load",function(){a("onload")});var i={};listener.on("common.page","switchend",function(e,n){i[n.eid]=1}),listener.on("common.page","pageloaded",function(e,n){i[n.eid]&&(a("switchend"),delete i[n.eid])}),listener.on("common.geolocation","success",function(){a("geolocation")},this)}}}});
;define("common:widget/initapp/initapp.js",function(n,i,o){"use strict";var e=n("common:widget/appresize/appresize.js"),t=n("common:widget/popup/popup.js"),c=n("common:widget/pagemgr/pagemgr.js"),p=n("common:widget/fastclick/fastclick.js"),s=!1,m=function(){window.scrollTo(0,1)},a=function(){t.open({text:"",autoCloseTime:1e4})},g=function(){t.close()},r=function(){s||(listener.on("common.page","switchstart",a),listener.on("common.page","switchend",g),listener.on("common.page","switchend",m))},d=function(){e.init(),c.init(),c.isSinglePageApp()&&new p(document.body),r(),s=!0};o.exports.init=d});
;define("common:widget/stat/aladdin-stat.js",function(t){"use strict";var a=t("common:widget/stat/stat.js");("aladdin"===window._APP_HASH.third_party||"webapp-aladdin"===window._APP_HASH.third_party)&&listener.once("common.page","switchstart",function(){a.addStat(COM_STAT_CODE.ALADDIN_URL_NAVIGATE)})});
;define("common:widget/nav/nav.js",function(a,t,e){"use strict";var o=a("common:widget/url/url.js"),n=a("common:widget/map/preloader/preloader.js"),i=a("common:widget/pagemgr/pagemgr.js"),r=a("common:widget/stat/stat.js"),c=!1,d="_lastPageUrl",l=function(){var a=window.localStorage.getItem(d);"string"==typeof a?(window.localStorage.removeItem(d),o.navigate(a,{replace:!0,storageKey:!1})):history.back()},s=function(){var a=window._APP_HASH.third_party;if(i.isLandingPage()&&"aladdin"!==a&&"webapp-aladdin"!==a&&"uri_api"!==a&&"lbscomponents"!==a)"third"!==window._APP_HASH.module||"transit"!==window._APP_HASH.action&&"weather"!==window._APP_HASH.action&&"traffic"!==window._APP_HASH.action&&"peccancy"!==window._APP_HASH.action&&"peccancydetail"!==window._APP_HASH.action?(window.localStorage.removeItem(d),o.toIndex()):(window.localStorage.removeItem(d),history.back());else if("aladdin"===a||"webapp-aladdin"===a){if(1===history.length)return o.toIndex(),void 0;r.addStat(COM_STAT_CODE.BACK_TO_ALADDIN),setTimeout(function(){history.back()},200)}else c===!0?l():(window.localStorage.removeItem(d),history.back())},w=function(){var a="ontouchend"in document?"tap":"click";$(".common-widget-nav [jsaction]").on(a,$.proxy(function(a){var t=$(a.currentTarget);switch(t.attr("jsaction")){case"jump":s();break;case"tomap":n.loadTiles("mapclick");var e=o.get({path:t.attr("link"),disableEncode:!0});o.update(e);break;case"toindex":o.update({module:"index",action:"index"},{queryReplace:!0,pageStateReplace:!0})}},this))},m=function(a){c=!!a;var t=$("#nav_maplink");t.attr("link",t.attr("data-href")),t.attr("data-href",""),w()};e.exports.init=m});
;define("common:widget/footer/footer.js",function(o,n,t){"use strict";var i=(o("common:widget/login/login.js"),o("common:widget/url/url.js")),e=function(){i.update({module:"user",action:"mycenter"})},c=function(){$(".user").on("click",function(){e()})},u=function(){c()};t.exports.init=u});
;define("common:widget/bottombanner/bottombanner.js",function(t,e,n){"use strict";var i=t("common:static/js/util.js"),a=t("common:widget/stat/pbstat.js"),o=i.isAndroid()?"android":i.isIPhone()?"iphone":i.isIPad()?"ipad":"unknown",d={loadCmsAdConfig:function(t){var e=(new Date).getTime(),n=document.getElementsByTagName("HEAD").item(0),i=document.createElement("script");i.type="text/javascript",i.src="http://map.baidu.com/zt/cms/ws.js?"+e,i.onload=$.proxy(t,this),n.appendChild(i)},getCurrentHash:function(){var t=window._APP_HASH,e=window.location.pathname.replace("/mobile/webapp/",""),n=e.split("/"),a=n[2],o=n[3];return{module:t.module,action:t.action,query:i.urlToJSON(a||""),pageState:i.urlToJSON(o||"")}},checkDisplayBanner:function(t){var e,n,i,a,o,d=[],r=window.bottomBannerDisplayRule,s=t.module,c=t.action,u=t.query,l=t.pageState;return r?($.each(r,function(t){e=[],t.module&&(n=t.module.substring(0,1),i=t.module.substring(1),e.push("!"===n?-1===i.indexOf(s):i.indexOf(s)>-1)),t.action&&(n=t.action.substring(0,1),i=t.action.substring(1),e.push("!"===n?-1===i.indexOf(c):i.indexOf(c)>-1)),t.query&&$.each(t.query,function(t,o){n=o.substring(0,1),i=o.substring(1),a=u[t]||void 0,e.push("!"===n?-1===i.indexOf(a):i.indexOf(a)>-1)}),t.pagestate&&$.each(t.pagestate,function(t,a){n=a.substring(0,1),i=a.substring(1),o=l[t]||void 0,e.push("!"===n?-1===i.indexOf(o):i.indexOf(o)>-1)}),d.push(-1===e.indexOf(!1))}),-1!==d.indexOf(!0)?!0:!1):!1},isHideBanner:function(){return this.bannerHide||navigator.userAgent.indexOf("MicroMessenger")>0?(localStorage.hbt=Date.now(),!0):localStorage.hbt?Date.now()>Number(localStorage.hbt)+9e5?(localStorage.removeItem("hbt"),!1):!0:!1},getPageConfig:function(){var t,e,n,a,o,d=this.getCurrentHash(),r=d.module,s=d.action,c=d.query,u=d.pageState,l={};if(this.cmsDisplayRule=window.bottomBannerDisplayRule,o=window.webapp_cms_bottom_download_img,_APP_HASH.third_party&&(a=window["third_"+_APP_HASH.third_party+"_bottom_config"],a&&$.each(a,function(t,e){o[t]=e})),!o||!this.checkDisplayBanner(d)||this.isHideBanner())return null;try{t=o[r][s]}catch(m){t=null}try{o&&o.wd&&(e=new RegExp(o.wd.transitType,"g"),n=new RegExp(o.wd.driveType,"g"))}catch(m){}if(c.wd&&c.wd.search(e)>-1)try{t=o.transit.list}catch(m){}else if(c.wd&&c.wd.search(n)>-1)try{t=o.drive.list}catch(m){}else"groupon"===u.detail_part&&(t=o.groupon||t);if(!t){if(!o.other)return null;t=o.other}return t?(l.needOpen=t.openUrl?!0:!1,l.bgUrl=t.openUrl&&this.hasInstalled?t.openUrl:t.downloadImgUrl,l.srcUrl=i.isIPhone()?t.iponeSrc:i.isAndroid()?t.androidSrc:i.isIPad()?t.ipadSrc:t.androidSrc,l):null},renderAfterLoaded:function(){this.config=this.getPageConfig(),this.config&&this.config.bgUrl?(this.$el.attr("data-href",this.config.srcUrl).show(),listener.trigger("common","sizechange"),a.addStat(COM_PB_STAT.BOTTOM_BANNER,"ready",{os:o})):this.$el.hide()},andVisibility:function(){function t(){$("#downBox").length>0&&($("#downBox").hide(),$("#greybackground").remove()),clearTimeout(window.a)}document.addEventListener("visibilitychange",t),document.addEventListener("webkitvisibilitychange",t),document.addEventListener("blur",t),document.addEventListener("msvisibilitychange",t)},bindWindowShow:function(){var t=this;$(window).bind("blur",function(){$("#downBox").length>0&&($("#downBox").hide(),$("#greybackground").remove()),clearTimeout(window.a)}).bind("pageshow",function(){$("#downBox").length>0&&($("#downBox").hide(),$("#greybackground").remove()),clearTimeout(window.a)}),t.andVisibility()},currentNativeUrl:function(){var t,e,n,a=location.href;if(n="baidumap://map/",a.match("search")&&a.match("wd")){var o=i.requestUid("wd");n="baidumap://map/place/search?query="+o}if(a.match("uid")){var d=i.requestUid("uid");n="baidumap://map/place/detail?uid="+d}if(a.match("qt=walk")){var r=$("#walk-nav");t=r.attr("data-sn"),e=r.attr("data-en"),n="baidumap://map/direction?mode=walking&origin="+t+"&destination="+e}if(a.match("qt=nav")){var s=$(".gotonav-native");t=s.attr("data-sn"),e=s.attr("data-en"),n="baidumap://map/direction?mode=driving&origin="+t+"&destination="+e}return a.match("qt=bt")&&(t=$("#transit-start").attr("data-sn"),e=$("#transit-end").attr("data-en"),n="baidumap://map/direction?mode=transit&origin="+t+"&destination="+e),n},showNative:function(){var t,e=this;i.isIPhone()?i.bindHrefStat(e.$el,function(){a.addStat(PB_STAT.BOTTOM_BANNER_CLICK),t=e.currentNativeUrl(),$(document.body).append("<iframe src="+t+" id='callapp' width='0' height='0' style='border: 0;display: none;'/>");var n=(new Date).getTime();return window.a=setTimeout(function(){!window.document.webkitHidden&&setTimeout(function(){(new Date).getTime()-n<2e3&&(window.location="http://itunes.apple.com/cn/app/id452186370?ls=1&mt=8",a.addStat(PB_STAT.BOTTOM_BANNER_GONA_FAIL,"show"))},500)},500),!1}):i.bindHrefStat(e.$el,function(){a.addStat(PB_STAT.BOTTOM_BANNER_CLICK),t=e.currentNativeUrl(),$(document.body).append("<iframe src="+t+" id='callapp' width='0' height='0' style='border: 0;display: none;'/>");var n=(new Date).getTime();return window.a=setTimeout(function(){!window.document.webkitHidden&&setTimeout(function(){(new Date).getTime()-n<2e3&&i.DownBox.showTb()},500)},500),!1})},init:function(t){this.bannerHide=t||!1,this.loadCmsAdConfig(function(){var t=this;this.$el=$(".common-widget-bottom-banner-changeId");var e=$("#common-widget-bottom-banner-close");e.click(function(t){a.addStat(PB_STAT.BOTTOM_BANNER_CLOSE_BTN),$(".common-widget-bottom-banner-changeId").hide(),t.stopPropagation()}),t.bindWindowShow(),t.showNative(),window.webapp_cms_bottom_download_img&&(void 0===this.hasInstalled?i.getNativeInfo("com.baidu.BaiduMap",function(e){t.hasInstalled=0===e.error,t.renderAfterLoaded()},function(){t.hasInstalled=!1,t.renderAfterLoaded()}):t.renderAfterLoaded())})}};n.exports=d});
;define("common:widget/topbanner/topbanner.js",function(n,e,t){"use strict";var o=n("common:widget/cookie/cookie.js"),i=n("common:static/js/util.js"),a=n("common:widget/stat/pbstat.js"),d=n("common:widget/url/url.js");t.exports={init:function(n){this.bannerHide=n||!1,this.bind(),this.render()},bind:function(){var n=this;n.closeBtn=$("#banner_close_button"),n.bannerCon=$("#common-widget-top-banner-changeId"),n.appbutton=$("#banner_install_button"),n.bannerWra=$("#common-widget-top-banner-changeId .wrap")},render:function(){var n=this,e=d.get();n.os=i.isAndroid()?"android":i.isIPhone()?"iphone":i.isIPad()?"ipad":"unknown",n.action=e.action,n.module=e.module,n.pageState=e.pageState,n.a=window.a,$(window).bind("blur",function(){$("#downBox").length>0&&($("#downBox").hide(),$("#greybackground").remove()),clearTimeout(window.a)}).bind("pageshow",function(){$("#downBox").length>0&&($("#downBox").hide(),$("#greybackground").remove()),clearTimeout(window.a)}),n.andVisibility(),n.closeBtn.on("click",$.proxy(n._onClose,this)),listener.once("common.page","pageloaded",$.proxy(n.displayBanner,this))},andVisibility:function(){function n(){$("#downBox").length>0&&($("#downBox").hide(),$("#greybackground").remove()),clearTimeout(window.a)}document.addEventListener("visibilitychange",n),document.addEventListener("webkitvisibilitychange",n),document.addEventListener("blur",n),document.addEventListener("msvisibilitychange",n)},displayBanner:function(){var n=this;return o.get("hdBanner")||n.isHideBanner()||window.navigator.standalone?(n.hideBanner(),void 0):(n.showBanner(),n.appbutton.html("90%"),i.isIPhone()?i.bindHrefStat(n.appbutton,function(){a.addStat(PB_STAT.TOP_BANNER_CLICK),$(document.body).append("<iframe src= 'baidumap://map/' id='callapp' width='0' height='0' style='border: 0;display: none;'/>");var n=(new Date).getTime();return window.a=setTimeout(function(){!window.document.webkitHidden&&setTimeout(function(){(new Date).getTime()-n<2e3&&(window.location="http://itunes.apple.com/cn/app/id452186370?ls=1&mt=8",a.addStat(PB_STAT.TOP_BANNER_GONA_FAIL,"show"))},500)},500),clearTimeout(window.a),!1}):i.bindHrefStat(n.appbutton,function(){a.addStat(PB_STAT.TOP_BANNER_CLICK),$(document.body).append("<iframe src= 'baidumap://map/' id='callapp' width='0' height='0' style='border: 0;display: none;'/>");var n=(new Date).getTime();return window.a=setTimeout(function(){!window.document.webkitHidden&&setTimeout(function(){(new Date).getTime()-n<2e3&&i.DownBox.showTb()},500)},500),!1}),void 0)},_onClose:function(){var n=this;n.hideBanner();var e={domain:location.hostname,path:"/mobile",expires:2592e5};o.set("hdBanner","true",e),a.addStat(COM_PB_STAT.TOP_BANNER_CLOSE_BTN,"click",{os:n.os})},hideBanner:function(){var n=this;n.bannerCon.hide()},showBanner:function(){var n=this;n.bannerCon.show(),"index"!==window._APP_HASH.module&&"index"!==window._APP_HASH.action&&n.bannerCon.hide(),a.addStat(COM_PB_STAT.TOP_BANNER,"ready",{os:n.os})},isHideBanner:function(){return this.bannerHide?(localStorage.hbt=Date.now(),!0):localStorage.hbt?Date.now()>Number(localStorage.hbt)+9e5?(localStorage.removeItem("hbt"),!1):!0:!1}}});
;define("common:widget/sharefriends/sharefriends.js",function(t,e,n){"use strict";var s=t("common:static/js/util.js"),o=t("common:widget/url/url.js"),r=t("common:widget/stat/pbstat.js"),i={init:function(t){this.type=t,this.bindEvent()},bindEvent:function(){$(".send-phone").on("click",$.proxy(this.shareToFriends,this))},shareToFriends:function(t){var e,n=this,s=$("#share-to-friends"),o=s.attr("href");if(!(o&&o.indexOf("body")>-1)){e="transit"===this.type?n.getTransitSmsUrl():n.getSmsUrl();var i=function(t){if(t&&t.sms_content){var e=t.sms_content;s.attr("href","sms:?body="+e),location.href="sms:?body="+e}},a=function(){};$.ajax({url:e,dataType:"jsonp",success:i,error:a}),t.preventDefault(),r.addStat(COM_PB_STAT.SHARE_SMS_BTN)}},getTransitSmsUrl:function(){var t=o.get(),e=t.query||{},n=t.pageState||{},r=n.i+",1,1",i="http://map.baidu.com/ag/sms/ready?url=",a="http://map.baidu.com/?i="+r+"&s="+e.qt,c=encodeURIComponent("&"+s.jsonToQuery(e)),m=i+encodeURIComponent(a+c+"&sc=0&smsf=1")+"&t="+(new Date).getTime();return m},getSmsUrl:function(){var t=o.get(),e=t.query||{},n="http://map.baidu.com/ag/sms/ready?url=",r="http://map.baidu.com/?s="+e.qt;delete e.version;var i=encodeURIComponent("&"+s.jsonToQuery(e)),a=n+encodeURIComponent(r+i+"&sc=0&smsf=1")+"&t="+(new Date).getTime();return a},fireEvent:function(t,e){var n=t;if(document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent(e,!0,!1),n.dispatchEvent(s)}}};n.exports=i});